/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CFE
});
module.exports = __toCommonJS(main_exports);

// classes/custom-explorer-view.ts
var import_obsidian5 = require("obsidian");

// classes/source-folder.ts
var import_obsidian4 = require("obsidian");

// classes/cfe-file-handler.ts
var import_obsidian3 = require("obsidian");

// classes/cfe-file.ts
var import_obsidian = require("obsidian");
var _CFEFile = class {
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * Use CFEFileHandler.CreateNew() instead.
   * 
   * CHILD CLASSES SHOULD NOT WRITE TO A FILE. THIS IS DONE INSIDE OF CFEFileHandler
   * 
   * CFEFile layer:
   * 
   * sets the source, id, file type, file name, and parent folder id of the file object.
   */
  static async CreateNewFileForLayer(data) {
    const sourceAndVault = data.snv;
    const sourceFolder = sourceAndVault.sourceFolder;
    const unfinishedFile = new _CFEFile();
    unfinishedFile.id = sourceFolder.fileCount;
    unfinishedFile.fileType = data.fileType;
    unfinishedFile.fileName = "";
    unfinishedFile.parentFolderID = data.parentFolderID;
    sourceFolder.fileCount++;
    await SourceFolder.Save(sourceAndVault);
    if (unfinishedFile.id !== unfinishedFile.parentFolderID) {
      const parentFolder = await CFEFileHandler.LoadFile(sourceAndVault, unfinishedFile.parentFolderID);
      parentFolder.containedFileIDs.push(unfinishedFile.id);
      await parentFolder.Save(sourceAndVault);
    }
    return unfinishedFile;
  }
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * Use CFEFileHandler.DisplayThumbnail() instead.
   * 
   * CFEFile layer:
   * 
   * sets the thumbnail container's css class to 'cfe-thumbnail'
   * and fully displays the file if the thumbnail is clicked.
   */
  async DisplayThumbnail(sourceAndVault, thumbnailDiv, displayDiv) {
    thumbnailDiv.className = "cfe-thumbnail vbox";
    thumbnailDiv.onclick = async () => {
      await this.Display(sourceAndVault, displayDiv);
    };
    const idText = thumbnailDiv.createDiv("hbox");
    idText.textContent = "ID: " + this.id;
    idText.style.justifyContent = "center";
    const fileText = thumbnailDiv.createDiv("hbox");
    fileText.textContent = "File Type: " + this.fileType;
    fileText.style.justifyContent = "center";
    const nameText = thumbnailDiv.createDiv("hbox");
    nameText.textContent = "File Name: " + this.fileName;
    nameText.style.justifyContent = "center";
  }
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * Use CFEFileHandler.Display() instead.
   * 
   * CFEFile layer:
   * 
   * empties the display container provided.
   */
  async Display(snv, container) {
    container.empty();
    const headerContainer = container.createDiv("hbox");
    const backButton = headerContainer.createEl("button", { text: "Back to parent folder" });
    headerContainer.createEl("p", { text: "File ID: " + this.id });
    headerContainer.createEl("p", { text: "File Name: " });
    const nameInput = headerContainer.createEl("input", { type: "text", value: this.fileName });
    backButton.onclick = async () => {
      const parentFolder = await CFEFileHandler.LoadFile(snv, this.parentFolderID);
      if (parentFolder !== null) {
        await parentFolder.Display(snv, container);
      }
    };
    nameInput.onchange = async () => {
      this.fileName = nameInput.value;
      await this.Save(snv);
    };
  }
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * (it is unlikely this method will ever be overriden by child classes, but making this 'inaccessible' is for consistency)
   * 
   * Use CFEFileHandler.SaveFile() instead.
   * 
   * Formatted File layer:
   * 
   * Deletes this file ID from the original parent folder, adds this file to the new parent folder, and changes the parent folder ID
   */
  async MoveFile(sourceAndVault, newParentFolderID) {
    const oldParentFolder = await CFEFileHandler.LoadFile(sourceAndVault, this.parentFolderID);
    const indexOfFile = oldParentFolder.containedFileIDs.indexOf(this.id);
    oldParentFolder.containedFileIDs.splice(indexOfFile, 1);
    oldParentFolder.Save(sourceAndVault);
    const newParentFolder = await CFEFileHandler.LoadFile(sourceAndVault, newParentFolderID);
    newParentFolder.containedFileIDs.push(this.id);
    newParentFolder.Save(sourceAndVault);
    this.parentFolderID = newParentFolderID;
    this.Save(sourceAndVault);
  }
  async Save(sourceAndVault) {
    const sourceFolder = sourceAndVault.sourceFolder;
    const vault = sourceAndVault.vault;
    const filePath = sourceFolder.vaultPath + "/" + this.id + ".json";
    const jsonData = JSON.stringify(this);
    const tFile = vault.getFileByPath(filePath);
    if (tFile === null) {
      const normalizedPath = (0, import_obsidian.normalizePath)(filePath);
      await vault.adapter.write(normalizedPath, jsonData);
      return;
    }
    await vault.modify(tFile, jsonData);
  }
};
var CFEFile = _CFEFile;
CFEFile.FILE_NAME_INPUT_INDEX = 0;
CFEFile.PARENT_FOLDER_ID_INPUT_INDEX = 1;

// classes/file-creation-data.ts
var FileCreationData = class {
  constructor(snv, fileType, parentFolderID) {
    this.snv = snv;
    this.fileType = fileType;
    this.parentFolderID = parentFolderID;
  }
};

// classes/single-media-file.ts
var import_obsidian2 = require("obsidian");

// classes/real-file.ts
var RealFile = class extends CFEFile {
  constructor() {
    super(...arguments);
    this.fileType = "Real File";
  }
  async DisplayMediaOnly(mediaDiv, snv) {
    mediaDiv.empty();
  }
};

// classes/single-media-file.ts
var SingleMediaFile = class extends RealFile {
  constructor() {
    super(...arguments);
    this.fileType = "Single Media File";
  }
  get mediaType() {
    switch (this.extensionName) {
      case "png":
      case "jpg":
      case "webp":
      case "heic":
      case "gif":
        return "Image";
      case "mp4":
      case "MP4":
      case "mov":
      case "MOV":
      default:
        return "Video";
    }
  }
  async getSrc(snv) {
    const mediaFile = await this.getTFile(snv);
    const arrayBuffer = await snv.vault.readBinary(mediaFile);
    const blob = new Blob([arrayBuffer]);
    const mediaUrl = URL.createObjectURL(blob);
    return mediaUrl;
  }
  async getTFile(snv) {
    const mediaPath = await this.getPath(snv);
    let mediaFile = snv.vault.getFileByPath(mediaPath);
    if (mediaFile === null) {
      mediaFile = snv.vault.getFileByPath(mediaPath + "." + this.extensionName);
      if (mediaFile === null) {
        throw Error("File not found at path: " + mediaPath + " or " + mediaPath + "." + this.extensionName);
      }
      snv.vault.rename(mediaFile, mediaPath);
    }
    return mediaFile;
  }
  async getPath(snv) {
    const sourceFolder = snv.sourceFolder;
    return sourceFolder.vaultPath + "/" + this.id + " Actual File";
  }
  static async CreateNewFileForLayer(data) {
    const newMediaFile = await super.CreateNewFileForLayer(data);
    newMediaFile.extensionName = "";
    return newMediaFile;
  }
  async Display(snv, container) {
    await super.Display(snv, container);
    const imageDisplayContainer = container.createDiv("vbox");
    imageDisplayContainer.createEl("p", { text: "Change file" });
    const newFileInput = imageDisplayContainer.createEl("input", { type: "file" });
    await this.DisplayMediaOnly(imageDisplayContainer, snv);
    newFileInput.onchange = async () => {
      try {
        const oldFile = await this.getTFile(snv);
        try {
          await snv.vault.delete(oldFile);
        } finally {
          await this.SaveNewFile(snv, newFileInput);
          this.Display(snv, container);
        }
      } catch (e) {
        console.log();
      }
    };
  }
  async SaveNewFile(snv, fileInput) {
    const fileArray = fileInput.files;
    if (fileArray === null) {
      throw Error("no file was selected");
    }
    const mediaFile = fileArray[0];
    await this.SetFileTo(snv, mediaFile);
  }
  async SetFileTo(snv, mediaFile) {
    const partsOfPath = mediaFile.name.split(".");
    const extension = partsOfPath[partsOfPath.length - 1];
    this.fileName = partsOfPath[0];
    this.extensionName = extension;
    const path = snv.sourceFolder.vaultPath + "/" + this.id + " Actual File";
    const normalizedPath = (0, import_obsidian2.normalizePath)(path);
    await snv.vault.adapter.writeBinary(normalizedPath, await mediaFile.arrayBuffer());
    await this.Save(snv);
  }
  async DisplayMediaOnly(mediaDiv, snv) {
    await super.DisplayMediaOnly(mediaDiv, snv);
    if (this.mediaType === "Image") {
      const imageElement = mediaDiv.createEl("img");
      imageElement.src = await this.getSrc(snv);
      imageElement.style.objectFit = "contain";
    } else {
      const videoElement = mediaDiv.createEl("video");
      videoElement.src = await this.getSrc(snv);
      videoElement.controls = true;
      videoElement.loop = true;
      videoElement.autoplay = true;
      videoElement.style.objectFit = "contain";
    }
  }
};

// classes/folder.ts
var Folder = class extends CFEFile {
  /**
   * @override Folder layer:
   * 
   * initializes the contained file ids array for the folder object
   */
  static async CreateNewFileForLayer(data) {
    const unfinishedFolder = await super.CreateNewFileForLayer(data);
    unfinishedFolder.containedFileIDs = [];
    return unfinishedFolder;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    const createButtonsDiv = mainDiv.createDiv("hbox");
    const newFileButton = createButtonsDiv.createEl("button", { text: "Create New File" });
    newFileButton.onclick = () => {
      this.LoadCreateFileUI(snv, mainDiv);
    };
    const mediaFilesButton = createButtonsDiv.createEl("button", { text: "Upload Multiple Images / Videos" });
    mediaFilesButton.onclick = () => {
      this.LoadFileSelectionUI(snv, mainDiv);
    };
    const folderDisplayContainer = mainDiv.createDiv("cfe-grid");
    for (let i = 0; i < this.containedFileIDs.length; i++) {
      const containedFile = await CFEFileHandler.LoadFile(snv, this.containedFileIDs[i]);
      if (containedFile !== null) {
        await containedFile.DisplayThumbnail(snv, folderDisplayContainer.createDiv(), mainDiv);
      }
    }
  }
  LoadCreateFileUI(snv, mainDiv) {
    const data = new FileCreationData(snv, "Folder", 0);
    const popUpContainer = mainDiv.createDiv("vbox cfe-popup");
    popUpContainer.createEl("p", { text: "Choose a File Type to create: " });
    const fileTypeDropdown = popUpContainer.createEl("select");
    popUpContainer.createEl("p", { text: "Parent Folder ID: " });
    const parentFolderIDInput = popUpContainer.createEl("input", { type: "text", value: "" + this.id });
    for (let i = 0; i < CFEFileHandler.KnownFileTypes.length; i++) {
      const option = fileTypeDropdown.createEl("option");
      option.value = CFEFileHandler.KnownFileTypes[i];
      option.text = CFEFileHandler.KnownFileTypes[i];
      fileTypeDropdown.options.add(option);
    }
    const exitButton = popUpContainer.createEl("button", { text: "X", cls: "cfe-exit-button" });
    exitButton.onclick = () => {
      popUpContainer.remove();
    };
    const submitButton = popUpContainer.createEl("button", { text: "Create" });
    submitButton.onclick = async () => {
      data.fileType = fileTypeDropdown.value;
      data.parentFolderID = parseInt(parentFolderIDInput.value);
      await CFEFileHandler.CreateNew(data);
      exitButton.click();
      const resettedFolder = await CFEFileHandler.LoadFile(snv, this.id);
      await resettedFolder.Display(snv, mainDiv);
    };
  }
  LoadFileSelectionUI(snv, mainDiv) {
    const popUpContainer = mainDiv.createDiv("vbox cfe-popup");
    popUpContainer.createEl("p", { text: "Choose your files" });
    const fileInput = popUpContainer.createEl("input", { type: "file" });
    fileInput.multiple = true;
    popUpContainer.createEl("p", { text: "Parent Folder ID: " });
    const parentFolderIDInput = popUpContainer.createEl("input", { type: "text", value: "" + this.id });
    const exitButton = popUpContainer.createEl("button", { text: "X", cls: "cfe-exit-button" });
    exitButton.onclick = () => {
      popUpContainer.remove();
    };
    const submitButton = popUpContainer.createEl("button", { text: "Create" });
    submitButton.onclick = async () => {
      const fileArray = fileInput.files;
      const parentFolderID = parseInt(parentFolderIDInput.value);
      if (fileArray !== null) {
        for (let i = 0; i < fileArray.length; i++) {
          const data = new FileCreationData(snv, "Single Media File", parentFolderID);
          const cfeFile = await CFEFileHandler.CreateNew(data);
          const mediaFile = Object.assign(new SingleMediaFile(), cfeFile);
          await mediaFile.SetFileTo(snv, fileArray[i]);
          await mediaFile.Save(snv);
        }
        exitButton.click();
        const resettedFolder = await CFEFileHandler.LoadFile(snv, this.id);
        await resettedFolder.Display(snv, mainDiv);
      }
    };
  }
};

// classes/hwayu-story.ts
var HwayuStory = class extends CFEFile {
  constructor() {
    super(...arguments);
    this.fileType = "Hwayu Story";
  }
  get font() {
    return "HwayuReal";
  }
  static async CreateNewFileForLayer(data) {
    const newStoryFile = await super.CreateNewFileForLayer(data);
    newStoryFile.currentPageIndex = 0;
    newStoryFile.pages = [];
    newStoryFile.characters = [];
    return newStoryFile;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    await this.LoadStoryUI(snv, mainDiv.createDiv("vbox"));
  }
  async LoadStoryUI(snv, mainDiv) {
    mainDiv.empty();
    mainDiv.createEl("p", { text: "Go to page number:" });
    const pageSelectDiv = mainDiv.createDiv("hbox");
    const pageNumberInput = pageSelectDiv.createEl("input", { type: "text", value: "" + (this.currentPageIndex + 1) });
    pageSelectDiv.createEl("p", { text: "/" + this.pages.length });
    const goButton = pageSelectDiv.createEl("button", { text: "Go" });
    goButton.onclick = () => {
      this.currentPageIndex = parseInt(pageNumberInput.value) - 1;
      this.LoadCurrentPage(snv, mainDiv);
    };
    this.LoadCharacterEditorUI(snv, mainDiv);
  }
  LoadCharacterEditorUI(snv, mainDiv) {
    const editorDiv = mainDiv.createDiv("vbox");
    const addCharButton = mainDiv.createEl("button", { text: "Add Character" });
    let count = 0;
    for (let i = 0; i < this.characters.length; i++) {
      const currentIndex = count;
      count++;
      const charDiv = editorDiv.createDiv("vbox");
      const nameDiv = charDiv.createDiv("hbox");
      nameDiv.createEl("p", { text: "Name: " });
      const nameInput = nameDiv.createEl("input", { type: "text", value: this.characters[i].name });
      const colorDiv = editorDiv.createDiv("hbox");
      colorDiv.createEl("p", { text: "Text Color:" });
      const colorInput = colorDiv.createEl("input", { type: "color", value: this.characters[i].color });
      colorDiv.createEl("p", { text: "Background Color:" });
      const backgroundInput = colorDiv.createEl("input", { type: "color", value: this.characters[i].backgroundColor });
      const swapButton = colorDiv.createEl("button", { text: "Swap" });
      nameInput.onchange = async () => {
        this.characters[currentIndex].name = nameInput.value;
        await this.Save(snv);
      };
      colorInput.onchange = async () => {
        this.characters[currentIndex].color = colorInput.value;
        await this.Save(snv);
      };
      backgroundInput.onchange = async () => {
        this.characters[currentIndex].backgroundColor = backgroundInput.value;
        await this.Save(snv);
      };
      swapButton.onclick = async () => {
        this.characters[currentIndex].backgroundColor = colorInput.value;
        this.characters[currentIndex].color = backgroundInput.value;
        backgroundInput.value = this.characters[currentIndex].backgroundColor;
        colorInput.value = this.characters[currentIndex].color;
        await this.Save(snv);
      };
    }
    addCharButton.onclick = () => {
      const currentIndex = count;
      count++;
      this.characters.push(new Character("", "white", "black"));
      const charDiv = editorDiv.createDiv("vbox");
      const nameDiv = charDiv.createDiv("hbox");
      nameDiv.createEl("p", { text: "Name: " });
      const nameInput = nameDiv.createEl("input", { type: "text" });
      const colorDiv = editorDiv.createDiv("hbox");
      colorDiv.createEl("p", { text: "Text Color:" });
      const colorInput = colorDiv.createEl("input", { type: "color", value: this.characters[count - 1].color });
      colorDiv.createEl("p", { text: "Background Color:" });
      const backgroundInput = colorDiv.createEl("input", { type: "color", value: this.characters[count - 1].backgroundColor });
      const swapButton = colorDiv.createEl("button", { text: "Swap" });
      nameInput.onchange = () => {
        this.characters[currentIndex].name = nameInput.value;
        this.Save(snv);
      };
      colorInput.onchange = async () => {
        this.characters[currentIndex].color = colorInput.value;
        await this.Save(snv);
      };
      backgroundInput.onchange = async () => {
        this.characters[currentIndex].backgroundColor = backgroundInput.value;
        await this.Save(snv);
      };
      swapButton.onclick = async () => {
        this.characters[currentIndex].backgroundColor = colorInput.value;
        this.characters[currentIndex].color = backgroundInput.value;
        backgroundInput.value = this.characters[currentIndex].backgroundColor;
        colorInput.value = this.characters[currentIndex].color;
        await this.Save(snv);
      };
      this.Save(snv);
    };
  }
  LoadPageSelector(snv, mainDiv) {
    const buttonsDiv = mainDiv.createDiv("hbox");
    const backButton = buttonsDiv.createEl("button", { text: "-" });
    const pageNumberInput = buttonsDiv.createEl("input", { type: "text", value: "" + (this.currentPageIndex + 1) });
    buttonsDiv.createEl("p", { text: "/" + this.pages.length });
    const nextButton = buttonsDiv.createEl("button", { text: "+" });
    const deleteButton = buttonsDiv.createEl("button", { text: "Delete Page" });
    deleteButton.className = "cfe-remove-button";
    const addButton = buttonsDiv.createEl("button", { text: "Add Page" });
    backButton.onclick = async () => {
      if (this.currentPageIndex > 0) {
        this.currentPageIndex--;
        await this.LoadCurrentPage(snv, mainDiv);
      }
    };
    nextButton.onclick = async () => {
      if (this.currentPageIndex < this.pages.length) {
        this.currentPageIndex++;
        await this.LoadCurrentPage(snv, mainDiv);
      }
    };
    pageNumberInput.onchange = async () => {
      this.currentPageIndex = parseInt(pageNumberInput.value) - 1;
      await this.LoadCurrentPage(snv, mainDiv);
    };
    deleteButton.onclick = async () => {
      this.pages.splice(this.currentPageIndex, 1);
      await this.Save(snv);
      if (this.currentPageIndex !== 0) {
        this.currentPageIndex--;
      }
      await this.LoadCurrentPage(snv, mainDiv);
    };
    addButton.onclick = async () => {
      const defaultPage = new Page();
      const thisPageFileID = this.pages[this.currentPageIndex].mediaFileID;
      if (thisPageFileID !== -1 && thisPageFileID < snv.sourceFolder.fileCount) {
        defaultPage.mediaFileID = thisPageFileID;
      }
      this.pages.splice(this.currentPageIndex + 1, 0, defaultPage);
      await this.Save(snv);
      this.currentPageIndex++;
      await this.LoadCurrentPage(snv, mainDiv);
    };
  }
  async LoadCurrentPage(snv, mainDiv) {
    mainDiv.empty();
    const backButton = mainDiv.createEl("button", { text: "Return to Story" });
    backButton.onclick = async () => {
      await this.LoadStoryUI(snv, mainDiv);
    };
    this.LoadPageSelector(snv, mainDiv);
    mainDiv.createEl("p", { text: "Media File ID:" });
    const mediaFileIDInput = mainDiv.createEl("input", { type: "text" });
    const panelDiv = mainDiv.createDiv("hbox");
    const outerMediaDiv = panelDiv.createDiv("vbox");
    const linesDiv = panelDiv.createDiv("vbox");
    const mediaWidthInput = outerMediaDiv.createEl("input", { type: "text" });
    mediaWidthInput.onchange = async () => {
      outerMediaDiv.style.width = mediaWidthInput.value + "%";
      linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
      this.pages[this.currentPageIndex].mediaSizePercentage = parseInt(mediaWidthInput.value);
      await this.Save(snv);
    };
    const mediaDiv = outerMediaDiv.createDiv("vbox");
    outerMediaDiv.style.width = "50%";
    mediaDiv.style.objectFit = "contain";
    linesDiv.style.width = "50%";
    linesDiv.style.maxHeight = "80vh";
    linesDiv.style.position = "sticky";
    linesDiv.style.top = "0%";
    if (this.currentPageIndex < this.pages.length) {
      const currentPage = this.pages[this.currentPageIndex];
      const mediaFileID = currentPage.mediaFileID;
      mediaFileIDInput.value = "" + currentPage.mediaFileID;
      if (mediaFileID > 0) {
        const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
        await mediaFile.DisplayMediaOnly(mediaDiv, snv);
      }
      if (this.pages[this.currentPageIndex].mediaSizePercentage) {
        mediaWidthInput.value = "" + this.pages[this.currentPageIndex].mediaSizePercentage;
        outerMediaDiv.style.width = mediaWidthInput.value + "%";
        linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
      } else {
        mediaWidthInput.value = "50";
        this.pages[this.currentPageIndex].mediaSizePercentage = 50;
        await this.Save(snv);
      }
    } else {
      const defaultPage = new Page();
      const lastPage = this.currentPageIndex - 1;
      if (lastPage >= 0 && this.currentPageIndex !== 0) {
        const lastPageFileID = this.pages[lastPage].mediaFileID;
        const lastPageSize = this.pages[lastPage].mediaSizePercentage;
        defaultPage.mediaSizePercentage = lastPageSize;
        mediaWidthInput.value = "" + lastPageSize;
        outerMediaDiv.style.width = mediaWidthInput.value + "%";
        linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
        if (lastPageFileID !== -1 && lastPageFileID < snv.sourceFolder.fileCount) {
          const mediaFileID = lastPageFileID + 1;
          defaultPage.mediaFileID = mediaFileID;
          mediaFileIDInput.value = "" + mediaFileID;
          if (mediaFileID > 0) {
            const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
            await mediaFile.DisplayMediaOnly(mediaDiv, snv);
          }
        }
      }
      this.pages.push(defaultPage);
      await this.Save(snv);
    }
    await this.LoadDialogueLines(snv, linesDiv);
    mediaFileIDInput.onchange = async () => {
      const currentPage = this.pages[this.currentPageIndex];
      currentPage.mediaFileID = parseInt(mediaFileIDInput.value);
      await this.Save(snv);
      const mediaFile = await CFEFileHandler.LoadFile(snv, currentPage.mediaFileID);
      await mediaFile.DisplayMediaOnly(mediaDiv, snv);
    };
  }
  async LoadDialogueLines(snv, linesDiv) {
    linesDiv.empty();
    const existingLinesDiv = linesDiv.createDiv("hbox");
    existingLinesDiv.style.overflowX = "scroll";
    const fontSize = "17.5px";
    for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
      const currentIndex = i;
      const currentLine = this.pages[this.currentPageIndex].lines[i];
      const speakerIndex = currentLine.speakerIndex;
      const currentSpeaker = this.characters[speakerIndex];
      const lineDiv = existingLinesDiv.createDiv("vbox");
      const deleteButton = lineDiv.createEl("button", { text: "-" });
      deleteButton.className = "cfe-remove-button";
      deleteButton.style.writingMode = "vertical-lr";
      deleteButton.style.textOrientation = "upright";
      deleteButton.onclick = async () => {
        this.pages[this.currentPageIndex].lines.splice(currentIndex, 1);
        await this.Save(snv);
        await this.LoadDialogueLines(snv, linesDiv);
      };
      const indexElement = lineDiv.createEl("p", { text: "" + currentIndex });
      indexElement.style.color = currentSpeaker.color;
      indexElement.style.fontFamily = this.font;
      indexElement.style.writingMode = "vertical-lr";
      indexElement.style.textOrientation = "upright";
      const charDropdownDiv = lineDiv.createDiv();
      charDropdownDiv.style.position = "relative";
      const charDropdown = charDropdownDiv.createEl("button");
      charDropdown.style.height = "fit-content";
      charDropdown.onclick = () => {
        const selectDiv = charDropdownDiv.createDiv("hbox");
        selectDiv.style.position = "absolute";
        selectDiv.style.top = "0%";
        selectDiv.style.left = "0%";
        for (let i2 = 0; i2 < this.characters.length; i2++) {
          const currentCharIndex = i2;
          const currentChar = this.characters[currentCharIndex];
          const currentOption = selectDiv.createEl("button", { text: currentChar.name, value: "" + i2 });
          currentOption.style.color = currentChar.color;
          currentOption.style.fontFamily = this.font;
          currentOption.style.backgroundColor = currentChar.backgroundColor;
          currentOption.style.writingMode = "vertical-lr";
          currentOption.style.textOrientation = "upright";
          currentOption.style.height = "fit-content";
          currentOption.style.zIndex = "2";
          currentOption.onclick = async () => {
            this.pages[this.currentPageIndex].lines[currentIndex].speakerIndex = currentCharIndex;
            const newSpeakerColor = this.characters[currentCharIndex].color;
            const newBackgroundColor = this.characters[currentCharIndex].backgroundColor;
            charDropdown.style.color = newSpeakerColor;
            charDropdown.style.backgroundColor = newBackgroundColor;
            charDropdown.textContent = this.characters[currentCharIndex].name;
            lineInput.style.color = newSpeakerColor;
            lineInput.style.backgroundColor = newBackgroundColor;
            indexElement.style.color = newSpeakerColor;
            await this.Save(snv);
            selectDiv.remove();
          };
        }
      };
      charDropdown.textContent = this.characters[currentLine.speakerIndex].name;
      charDropdown.style.color = currentSpeaker.color;
      charDropdown.style.backgroundColor = currentSpeaker.backgroundColor;
      charDropdown.style.fontFamily = this.font;
      charDropdown.style.writingMode = "vertical-lr";
      charDropdown.style.textOrientation = "upright";
      const lineInput = lineDiv.createEl("textarea");
      lineInput.spellcheck = false;
      lineInput.style.overflowX = "scroll";
      lineInput.style.writingMode = "vertical-lr";
      lineInput.style.textOrientation = "upright";
      lineInput.defaultValue = currentLine.line;
      lineInput.style.color = currentSpeaker.color;
      lineInput.style.backgroundColor = currentSpeaker.backgroundColor;
      lineInput.style.fontFamily = this.font;
      lineInput.style.fontSize = fontSize;
      lineInput.style.height = "100%";
      lineInput.onchange = async () => {
        this.pages[this.currentPageIndex].lines[currentIndex].line = lineInput.value;
        await this.Save(snv);
      };
    }
    const addButton = existingLinesDiv.createEl("button", { text: "+" });
    addButton.style.height = "100%";
    addButton.onclick = async () => {
      this.pages[this.currentPageIndex].lines.push(new DialogueLine(0, ""));
      await this.Save(snv);
      await this.LoadDialogueLines(snv, linesDiv);
    };
  }
};
var Page = class {
  constructor() {
    this.mediaFileID = -1;
    this.lines = [];
    this.mediaSizePercentage = 50;
  }
};
var DialogueLine = class {
  constructor(speakerIndex, line) {
    this.speakerIndex = speakerIndex;
    this.line = line;
  }
};
var Character = class {
  constructor(name, color, backgroundColor) {
    this.name = name;
    this.color = color;
    this.backgroundColor = backgroundColor;
  }
};

// classes/playlist.ts
var Playlist = class extends CFEFile {
  static getNextVideoIDInOrder(playlist) {
    let nextVideoIndex = playlist.currentVideoIndex + 1;
    if (nextVideoIndex >= playlist.videoIDs.length) {
      nextVideoIndex = 0;
    }
    return nextVideoIndex;
  }
  static getNextVideoIDShuffled(playlist) {
    let nextVideoIndex = Math.random() * playlist.videoIDs.length;
    nextVideoIndex = Math.floor(nextVideoIndex);
    return nextVideoIndex;
  }
  static async loadNextVideo(sourceAndVault, playlist, videoElement) {
    if (playlist.videoOrder === "shuffled") {
      playlist.currentVideoIndex = Playlist.getNextVideoIDShuffled(playlist);
    } else {
      playlist.currentVideoIndex = Playlist.getNextVideoIDInOrder(playlist);
    }
    const nextVideo = await CFEFileHandler.LoadFile(sourceAndVault, playlist.videoIDs[playlist.currentVideoIndex]);
    videoElement.src = await nextVideo.getSrc(sourceAndVault);
  }
  static async CreateNewFileForLayer(data) {
    const newPlaylistFile = await super.CreateNewFileForLayer(data);
    newPlaylistFile.videoIDs = [];
    return newPlaylistFile;
  }
  async Display(snv, container) {
    await super.Display(snv, container);
    this.currentVideoIndex = 0;
    const videoDisplayContainer = container.createDiv("cfe-display-video");
    const videoElement = videoDisplayContainer.createEl("video");
    const buttonsContainer = container.createDiv("hbox");
    const hideButton = buttonsContainer.createEl("button", { text: "hide video" });
    hideButton.onclick = () => {
      if (hideButton.textContent === "hide video") {
        hideButton.textContent = "show video";
        videoElement.style.display = "none";
      } else {
        hideButton.textContent = "hide video";
        videoElement.style.display = "flex";
      }
    };
    const shuffleButton = buttonsContainer.createEl("button", { text: "shuffle" });
    this.videoOrder = "in order";
    shuffleButton.onclick = () => {
      if (shuffleButton.textContent === "shuffle") {
        shuffleButton.textContent = "go in order";
        this.videoOrder = "shuffled";
      } else {
        shuffleButton.textContent = "shuffle";
        this.videoOrder = "in order";
      }
    };
    const nextButton = buttonsContainer.createEl("button", { text: "next video" });
    nextButton.onclick = async () => {
      await Playlist.loadNextVideo(snv, this, videoElement);
    };
    try {
      const firstVideo = await CFEFileHandler.LoadFile(snv, this.videoIDs[this.currentVideoIndex]);
      videoElement.src = await firstVideo.getSrc(snv);
      videoElement.autoplay = true;
      videoElement.controls = true;
      videoElement.ontimeupdate = async () => {
        if (videoElement.ended) {
          await Playlist.loadNextVideo(snv, this, videoElement);
        }
      };
    } finally {
      container.createEl("p", { text: "Change files" });
      let count = 0;
      const mediaIDInputDiv = container.createDiv("vbox");
      const newFileButton = container.createEl("button", { text: "Add File" });
      for (let i = 0; i < this.videoIDs.length; i++) {
        const currentIndex = count;
        count++;
        const mediaIDDiv = mediaIDInputDiv.createDiv("hbox");
        const idInput = mediaIDDiv.createEl("input", { type: "text", value: "" + this.videoIDs[currentIndex] });
        const deleteButton = mediaIDDiv.createEl("button", { text: "delete" });
        deleteButton.onclick = () => {
          mediaIDDiv.remove();
          this.videoIDs.splice(currentIndex, 1);
          this.Display(snv, container);
        };
        idInput.onchange = () => {
          this.videoIDs[currentIndex] = parseInt(idInput.value);
          this.Save(snv);
        };
      }
      newFileButton.onclick = () => {
        const currentIndex = count;
        count++;
        const mediaIDDiv = mediaIDInputDiv.createDiv("hbox");
        const idInput = mediaIDDiv.createEl("input", { type: "text" });
        const deleteButton = mediaIDDiv.createEl("button", { text: "delete" });
        deleteButton.onclick = () => {
          mediaIDDiv.remove();
          this.videoIDs.splice(currentIndex, 1);
          this.Display(snv, container);
        };
        idInput.onchange = () => {
          this.videoIDs[currentIndex] = parseInt(idInput.value);
          this.Save(snv);
        };
      };
    }
  }
};

// classes/variant-media-file.ts
var VariantMediaFile = class extends RealFile {
  constructor() {
    super(...arguments);
    this.fileType = "Variant Media File";
  }
  async getSrc(snv, index = null) {
    if (index === null) {
      index = Math.floor(Math.random() * this.variantIDs.length);
    }
    const containedMedia = await CFEFileHandler.LoadFile(snv, this.variantIDs[index]);
    return await containedMedia.getSrc(snv);
  }
  static async CreateNewFileForLayer(data) {
    const newMediaFile = await super.CreateNewFileForLayer(data);
    newMediaFile.variantIDs = [];
    return newMediaFile;
  }
  async Display(snv, container) {
    await super.Display(snv, container);
    const imageDisplayContainer = container.createDiv("vbox");
    imageDisplayContainer.createEl("p", { text: "Change files" });
    const mediaIDInputDiv = imageDisplayContainer.createDiv("vbox");
    const newFileButton = imageDisplayContainer.createEl("button", { text: "Add File" });
    for (let i = 0; i < this.variantIDs.length; i++) {
      const currentIndex = i;
      const mediaIDDiv = mediaIDInputDiv.createDiv("hbox");
      const idInput = mediaIDDiv.createEl("input", { type: "text", value: "" + this.variantIDs[currentIndex] });
      const deleteButton = mediaIDDiv.createEl("button", { text: "delete" });
      deleteButton.className = "cfe-remove-button";
      deleteButton.onclick = async () => {
        mediaIDDiv.remove();
        this.variantIDs.splice(currentIndex, 1);
        await this.Save(snv);
        await this.Display(snv, container);
      };
      idInput.onchange = async () => {
        this.variantIDs[currentIndex] = parseInt(idInput.value);
        await this.Save(snv);
        await this.Display(snv, container);
      };
    }
    newFileButton.onclick = async () => {
      this.variantIDs.push(-1);
      await this.Save(snv);
      await this.Display(snv, container);
    };
    const mediaDiv = imageDisplayContainer.createDiv("vbox");
    await this.DisplayMediaOnly(mediaDiv, snv);
  }
  async DisplayMediaOnly(mediaDiv, snv, index = -1) {
    if (index === -1) {
      index = Math.floor(Math.random() * this.variantIDs.length);
    }
    const containedMedia = await CFEFileHandler.LoadFile(snv, this.variantIDs[index]);
    await containedMedia.DisplayMediaOnly(mediaDiv, snv);
  }
};

// classes/source-folder-shortcut.ts
var SourceFolderShortcut = class extends CFEFile {
  /**
   * @override Folder layer:
   * 
   * initializes the contained file ids array for the folder object
   */
  static async CreateNewFileForLayer(data) {
    const unfinishedFolder = await super.CreateNewFileForLayer(data);
    unfinishedFolder.pathToOtherSource = "";
    return unfinishedFolder;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    const inputDiv = mainDiv.createDiv("vbox");
    inputDiv.createEl("p", { text: "Path to Other Source Folder" });
    const pathInput = inputDiv.createEl("input", { type: "text" });
    const goButton = inputDiv.createEl("button", { text: "Go" });
    pathInput.onchange = async () => {
      this.pathToOtherSource = pathInput.value;
      await this.Save(snv);
    };
    goButton.onclick = async () => {
      const otherSource = await SourceFolder.CreateOrLoadSourceFolder(this.pathToOtherSource, snv.vault);
      otherSource.Display(mainDiv, snv.vault);
    };
  }
};

// classes/conlangs/photolang-text.ts
var PhotoLang = class {
  static Display(div, text = "", fontSize = 10, moveSpeeds = null, durations = null, doLoop = false) {
    const line = new PhotoLine(text);
    if (!moveSpeeds) {
      moveSpeeds = [100, 250, 500];
    }
    if (!durations) {
      durations = [0, 500];
    }
    const displayDiv = div.createDiv();
    line.Speak(displayDiv, fontSize, moveSpeeds, durations, doLoop);
    return displayDiv;
  }
  static CreateTextArea(div, existingText = "", fontSize = 17.5) {
    const textArea = div.createEl("textarea", { text: existingText });
    textArea.style.fontSize = fontSize + "px";
    textArea.spellcheck = false;
    return textArea;
  }
  static CreateTextInput(div, existingText = "", fontSize = 17.5) {
    const textInput = div.createEl("input", { type: "text", value: existingText });
    textInput.style.fontSize = fontSize + "px";
    textInput.spellcheck = false;
    return textInput;
  }
};
var PhotoLine = class {
  constructor(textContent = "") {
    this.glyphs = [];
    const textArray = textContent.split("   ").filter((c) => c !== "");
    let doSpace = false;
    for (let i = 0; i < textArray.length; i++) {
      const newGlyph = new PhotoGlyph();
      const glyphText = textArray[i];
      if (glyphText === "|||") {
        newGlyph.hue = 0;
        newGlyph.saturation = 0;
        newGlyph.value = 0;
        newGlyph.opacity = 0;
        newGlyph.moveSpeed = 0;
        newGlyph.duration = 0;
        newGlyph.x = this.glyphs[this.glyphs.length - 1].x;
        newGlyph.y = this.glyphs[this.glyphs.length - 1].y;
        doSpace = true;
      } else {
        let j = 0;
        let skipNext = false;
        switch (glyphText[j]) {
          case ".":
            newGlyph.moveSpeed = 0;
            break;
          case "-":
            newGlyph.moveSpeed = 1;
            break;
          case "=":
            newGlyph.moveSpeed = 2;
            break;
        }
        j++;
        switch (glyphText[j]) {
          case ".":
            newGlyph.duration = 0;
            break;
          case "-":
            newGlyph.duration = 1;
            break;
        }
        j++;
        newGlyph.shape = glyphText[j];
        j++;
        let hue1 = 0;
        switch (glyphText[j]) {
          case "r":
            hue1 = 0;
            break;
          case "o":
            hue1 = 40;
            break;
          case "y":
            hue1 = 60;
            break;
          case "g":
            hue1 = 120;
            break;
          case "c":
            hue1 = 180;
            break;
          case "b":
            hue1 = 240;
            break;
          case "p":
            hue1 = 270;
            break;
          case ".":
            newGlyph.hue = 0;
            newGlyph.saturation = 0;
            skipNext = true;
            break;
        }
        j++;
        if (!skipNext) {
          let hue2 = 0;
          switch (glyphText[j]) {
            case "r":
              hue2 = 0;
              break;
            case "o":
              hue2 = 40;
              break;
            case "y":
              hue2 = 60;
              break;
            case "g":
              hue2 = 120;
              break;
            case "c":
              hue2 = 180;
              break;
            case "b":
              hue2 = 240;
              break;
            case "p":
              hue2 = 270;
              break;
            default:
              newGlyph.hue = hue1;
              skipNext = true;
              break;
          }
          if (!skipNext) {
            if (hue1 === 0 && hue2 === 270 || hue1 === 270 && hue2 === 0) {
              newGlyph.hue = 315;
            } else {
              newGlyph.hue = (hue1 + hue2) / 2;
            }
            j++;
          }
        }
        skipNext = false;
        const saturationText = glyphText[j];
        switch (saturationText) {
          case "0":
            newGlyph.saturation = 0;
            break;
          case "1":
            newGlyph.saturation = 0.25;
            break;
          case "2":
            newGlyph.saturation = 0.5;
            break;
          case "3":
            newGlyph.saturation = 0.75;
            break;
          case "4":
            newGlyph.saturation = 1;
            break;
        }
        j++;
        const valueText = glyphText[j];
        switch (valueText) {
          case "0":
            newGlyph.value = 0;
            break;
          case "1":
            newGlyph.value = 0.1;
            break;
          case "2":
            newGlyph.value = 0.2;
            break;
          case "3":
            newGlyph.value = 0.5;
            break;
          case "4":
            newGlyph.value = 1;
            break;
        }
        j++;
        const opacityText = glyphText[j];
        switch (opacityText) {
          case ".":
            newGlyph.opacity = 0;
            break;
          case "-":
            newGlyph.opacity = 0.5;
            break;
          case "=":
            newGlyph.opacity = 1;
            break;
        }
        j++;
        const locationInfo = glyphText.substring(j);
        if (locationInfo.contains("<")) {
          newGlyph.x = 0;
        } else if (locationInfo.contains(">")) {
          newGlyph.x = 2;
        } else {
          newGlyph.x = 1;
        }
        if (locationInfo.contains("v")) {
          newGlyph.y = 0;
        } else if (locationInfo.contains("^")) {
          newGlyph.y = 2;
        } else {
          newGlyph.y = 1;
        }
        if (doSpace) {
          const emptyGlyph = new PhotoGlyph();
          emptyGlyph.hue = 0;
          emptyGlyph.saturation = 0;
          emptyGlyph.value = 0;
          emptyGlyph.opacity = 0;
          emptyGlyph.moveSpeed = 0;
          emptyGlyph.duration = 0;
          emptyGlyph.x = newGlyph.x;
          emptyGlyph.y = newGlyph.y;
          doSpace = false;
          this.glyphs.push(emptyGlyph);
        }
      }
      this.glyphs.push(newGlyph);
    }
    if (doSpace) {
      const emptyGlyph = new PhotoGlyph();
      emptyGlyph.hue = 0;
      emptyGlyph.saturation = 0;
      emptyGlyph.value = 0;
      emptyGlyph.opacity = 0;
      emptyGlyph.moveSpeed = 0;
      emptyGlyph.duration = 0;
      emptyGlyph.x = this.glyphs[0].x;
      emptyGlyph.y = this.glyphs[0].y;
      doSpace = false;
      this.glyphs.push(emptyGlyph);
    }
  }
  async Speak(div, textSize, moveSpeeds, durations, doLoop = false) {
    div.style.fontSize = textSize + "px";
    div.style.fontFamily = "Photolang";
    div.style.position = "relative";
    div.style.height = textSize * 3.25 + "px";
    div.style.width = textSize * 3.25 + "px";
    const textDiv = div.createDiv();
    textDiv.style.position = "absolute";
    textDiv.style.bottom = textSize + "px";
    textDiv.style.transitionProperty = "bottom, left, color";
    for (let i = 0; i < this.glyphs.length; i++) {
      const photoGlyph = this.glyphs[i];
      textDiv.textContent = photoGlyph.shape;
      textDiv.style.left = photoGlyph.x * textSize + "px";
      textDiv.style.bottom = photoGlyph.y * textSize + "px";
      textDiv.style.color = photoGlyph.color;
      if (doLoop && i === this.glyphs.length - 1) {
        i = -1;
      }
      textDiv.style.transition = moveSpeeds[photoGlyph.moveSpeed] + "ms";
      await sleep(moveSpeeds[photoGlyph.moveSpeed] + durations[photoGlyph.duration]);
    }
    div.remove();
  }
  async DisplayStatic(div, textSize) {
    const lineDiv = div.createDiv("hbox");
    lineDiv.style.gap = "" + textSize * 3.25 + "px)";
    for (let i = 0; i < this.glyphs.length; i++) {
      this.glyphs[i] = Object.assign(new PhotoGlyph(), this.glyphs[i]);
      this.glyphs[i].DisplayStatic(lineDiv.createDiv(), textSize);
    }
  }
};
var PhotoGlyph = class {
  get color() {
    let lightness = (2 - this.saturation) * this.value / 2;
    let newS = this.saturation * this.value / (lightness < 1 ? lightness * 2 : 2 - lightness * 2);
    if (lightness === 0 || lightness === 1) {
      newS = 0;
    }
    lightness *= 100;
    newS *= 100;
    return "hsla(" + this.hue + "," + newS + "%," + lightness + "%," + this.opacity + ")";
  }
  DisplayStatic(div, textSize) {
    const outerDiv = div.createDiv();
    outerDiv.style.position = "relative";
    outerDiv.style.width = textSize * 3.25 + "px";
    outerDiv.style.height = textSize * 3.25 + "px";
    outerDiv.className = "cfe-photoglyph";
    const glyphDiv = outerDiv.createDiv();
    glyphDiv.style.position = "absolute";
    glyphDiv.textContent = this.shape;
    glyphDiv.style.left = this.x * textSize + "px";
    glyphDiv.style.bottom = this.y * textSize + "px";
    glyphDiv.style.color = this.color;
  }
};

// classes/photolang-story.ts
var PhotolangStory = class extends CFEFile {
  constructor() {
    super(...arguments);
    this.fileType = "Photolang Story";
  }
  static async CreateNewFileForLayer(data) {
    const newStoryFile = await super.CreateNewFileForLayer(data);
    newStoryFile.currentPageIndex = 0;
    newStoryFile.pages = [];
    newStoryFile.characters = [];
    return newStoryFile;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    await this.LoadStoryUI(snv, mainDiv.createDiv("vbox"));
  }
  async LoadStoryUI(snv, mainDiv) {
    mainDiv.empty();
    mainDiv.createEl("p", { text: "Go to page number:" });
    const pageSelectDiv = mainDiv.createDiv("hbox");
    const pageNumberInput = pageSelectDiv.createEl("input", { type: "text", value: "" + (this.currentPageIndex + 1) });
    pageSelectDiv.createEl("p", { text: "/" + this.pages.length });
    const goButton = pageSelectDiv.createEl("button", { text: "Go" });
    goButton.onclick = () => {
      this.currentPageIndex = parseInt(pageNumberInput.value) - 1;
      this.LoadCurrentPageEdit(snv, mainDiv);
    };
    await this.LoadCharacterEditorUI(snv, mainDiv);
  }
  async LoadCharacterEditorUI(snv, div) {
    const charEditorDiv = div.createDiv("vbox");
    for (let i = 0; i < this.characters.length; i++) {
      const currentIndex = i;
      const charDiv = charEditorDiv.createDiv("vbox");
      charDiv.createEl("p", { text: "Name: " });
      const nameInput = charDiv.createEl("input", { type: "text", value: this.characters[i].name });
      nameInput.onchange = async () => {
        this.characters[currentIndex].name = nameInput.value;
        await this.Save(snv);
        await this.LoadStoryUI(snv, div);
      };
      const photoName = new PhotoLine(this.characters[i].name);
      photoName.Speak(charDiv.createDiv(), 50, [100, 250, 500], [0, 500], true);
    }
    const addCharButton = charEditorDiv.createEl("button", { text: "Add Character" });
    addCharButton.onclick = async () => {
      this.characters.push(new Character2());
      await this.Save(snv);
      charEditorDiv.remove();
      await this.LoadCharacterEditorUI(snv, div);
    };
  }
  LoadPageSelector(snv, mainDiv) {
    const buttonsDiv = mainDiv.createDiv("hbox");
    const backButton = buttonsDiv.createEl("button", { text: "-" });
    const pageNumberInput = buttonsDiv.createEl("input", { type: "text", value: "" + (this.currentPageIndex + 1) });
    buttonsDiv.createEl("p", { text: "/" + this.pages.length });
    const nextButton = buttonsDiv.createEl("button", { text: "+" });
    const deleteButton = buttonsDiv.createEl("button", { text: "Delete Page" });
    deleteButton.className = "cfe-remove-button";
    const addButton = buttonsDiv.createEl("button", { text: "Add Page" });
    const editModeButton = buttonsDiv.createEl("button", { text: "Edit Mode" });
    const viewModeButton = buttonsDiv.createEl("button", { text: "View Mode" });
    const homeButton = buttonsDiv.createEl("button", { text: "Return to Story" });
    homeButton.onclick = async () => {
      await this.LoadStoryUI(snv, mainDiv);
    };
    editModeButton.onclick = async () => {
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
    viewModeButton.onclick = async () => {
      await this.LoadCurrentPageDisplayOnly(snv, mainDiv);
    };
    backButton.onclick = async () => {
      if (this.currentPageIndex > 0) {
        this.currentPageIndex--;
        await this.LoadCurrentPageEdit(snv, mainDiv);
      }
    };
    nextButton.onclick = async () => {
      if (this.currentPageIndex < this.pages.length) {
        this.currentPageIndex++;
        await this.LoadCurrentPageEdit(snv, mainDiv);
      }
    };
    pageNumberInput.onchange = async () => {
      this.currentPageIndex = parseInt(pageNumberInput.value) - 1;
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
    deleteButton.onclick = async () => {
      this.pages.splice(this.currentPageIndex, 1);
      await this.Save(snv);
      if (this.currentPageIndex !== 0) {
        this.currentPageIndex--;
      }
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
    addButton.onclick = async () => {
      const defaultPage = new Page2();
      const thisPageFileID = this.pages[this.currentPageIndex].mediaFileID;
      if (thisPageFileID !== -1 && thisPageFileID < snv.sourceFolder.fileCount) {
        defaultPage.mediaFileID = thisPageFileID;
      }
      this.pages.splice(this.currentPageIndex + 1, 0, defaultPage);
      await this.Save(snv);
      this.currentPageIndex++;
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
  }
  async LoadCurrentPageEdit(snv, mainDiv) {
    mainDiv.empty();
    this.LoadPageSelector(snv, mainDiv);
    mainDiv.createEl("p", { text: "Media File ID:" });
    const mediaFileIDInput = mainDiv.createEl("input", { type: "text" });
    const panelDiv = mainDiv.createDiv("hbox");
    const outerMediaDiv = panelDiv.createDiv("vbox");
    const linesDiv = panelDiv.createDiv("vbox");
    const mediaWidthInput = outerMediaDiv.createEl("input", { type: "text" });
    mediaWidthInput.onchange = async () => {
      outerMediaDiv.style.width = mediaWidthInput.value + "%";
      linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
      this.pages[this.currentPageIndex].mediaSizePercentage = parseInt(mediaWidthInput.value);
      await this.Save(snv);
    };
    outerMediaDiv.style.width = "50%";
    const mediaDiv = outerMediaDiv.createDiv("vbox");
    mediaDiv.style.objectFit = "contain";
    linesDiv.style.width = "50%";
    linesDiv.style.maxHeight = "80vh";
    linesDiv.style.position = "sticky";
    linesDiv.style.top = "0%";
    if (this.currentPageIndex < this.pages.length) {
      const currentPage = this.pages[this.currentPageIndex];
      const mediaFileID = currentPage.mediaFileID;
      mediaFileIDInput.value = "" + currentPage.mediaFileID;
      if (mediaFileID > 0) {
        const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
        await mediaFile.DisplayMediaOnly(mediaDiv, snv);
      }
      if (this.pages[this.currentPageIndex].mediaSizePercentage) {
        mediaWidthInput.value = "" + this.pages[this.currentPageIndex].mediaSizePercentage;
        outerMediaDiv.style.width = mediaWidthInput.value + "%";
        linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
      } else {
        mediaWidthInput.value = "50";
        this.pages[this.currentPageIndex].mediaSizePercentage = 50;
        await this.Save(snv);
      }
    } else {
      const defaultPage = new Page2();
      const lastPage = this.currentPageIndex - 1;
      if (lastPage >= 0 && this.currentPageIndex !== 0) {
        const lastPageFileID = this.pages[lastPage].mediaFileID;
        const lastPageSize = this.pages[lastPage].mediaSizePercentage;
        defaultPage.mediaSizePercentage = lastPageSize;
        mediaWidthInput.value = "" + lastPageSize;
        outerMediaDiv.style.width = mediaWidthInput.value + "%";
        linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
        if (lastPageFileID !== -1 && lastPageFileID < snv.sourceFolder.fileCount) {
          const mediaFileID = lastPageFileID + 1;
          defaultPage.mediaFileID = mediaFileID;
          mediaFileIDInput.value = "" + mediaFileID;
          if (mediaFileID > 0) {
            const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
            await mediaFile.DisplayMediaOnly(mediaDiv, snv);
          }
        }
      }
      this.pages.push(defaultPage);
      await this.Save(snv);
    }
    await this.LoadDialogueLinesEdit(snv, linesDiv);
    mediaFileIDInput.onchange = async () => {
      const currentPage = this.pages[this.currentPageIndex];
      currentPage.mediaFileID = parseInt(mediaFileIDInput.value);
      await this.Save(snv);
      const mediaFile = await CFEFileHandler.LoadFile(snv, currentPage.mediaFileID);
      await mediaFile.DisplayMediaOnly(mediaDiv, snv);
    };
  }
  async LoadCurrentPageDisplayOnly(snv, mainDiv) {
    mainDiv.empty();
    this.LoadPageSelector(snv, mainDiv);
    const panelDiv = mainDiv.createDiv("hbox");
    const outerMediaDiv = panelDiv.createDiv("vbox");
    const linesDiv = panelDiv.createDiv("vbox");
    outerMediaDiv.style.width = "50%";
    const mediaDiv = outerMediaDiv.createDiv("vbox");
    mediaDiv.style.objectFit = "contain";
    linesDiv.style.width = "50%";
    linesDiv.style.maxHeight = "80vh";
    linesDiv.style.position = "sticky";
    linesDiv.style.top = "0%";
    const currentPage = this.pages[this.currentPageIndex];
    const mediaFileID = currentPage.mediaFileID;
    if (mediaFileID > 0) {
      const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
      await mediaFile.DisplayMediaOnly(mediaDiv, snv);
    }
    if (this.pages[this.currentPageIndex].mediaSizePercentage) {
      const width = this.pages[this.currentPageIndex].mediaSizePercentage;
      outerMediaDiv.style.width = width + "%";
      linesDiv.style.width = 100 - width + "%";
    }
    await this.LoadDialogueLinesDisplayOnly(linesDiv);
  }
  async LoadDialogueLinesEdit(snv, linesDiv) {
    linesDiv.empty();
    const speakDiv = linesDiv.createDiv();
    const existingLinesDiv = linesDiv.createDiv("vbox");
    existingLinesDiv.style.overflowY = "scroll";
    for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
      const currentIndex = i;
      const currentLine = this.pages[this.currentPageIndex].lines[i];
      const lineDiv = existingLinesDiv.createDiv("hbox");
      lineDiv.style.width = "100%";
      const deleteButton = lineDiv.createEl("button", { text: "-" });
      deleteButton.className = "cfe-remove-button";
      deleteButton.onclick = async () => {
        this.pages[this.currentPageIndex].lines.splice(currentIndex, 1);
        await this.Save(snv);
        await this.LoadDialogueLinesEdit(snv, linesDiv);
      };
      lineDiv.createEl("p", { text: "" + currentIndex });
      const playButton = lineDiv.createEl("button", { text: "\u25B7" });
      const charDropdownButton = lineDiv.createDiv();
      const charDropdownDiv = charDropdownButton.createDiv();
      charDropdownDiv.style.position = "relative";
      charDropdownButton.onclick = () => {
        charDropdownDiv.empty();
        const selectDiv = charDropdownDiv.createDiv("hbox");
        selectDiv.style.position = "absolute";
        selectDiv.style.top = "0%";
        selectDiv.style.left = "0%";
        for (let i2 = 0; i2 < this.characters.length; i2++) {
          const currentCharIndex = i2;
          const currentChar = this.characters[currentCharIndex];
          const currentOption = selectDiv.createEl("div");
          const photoName2 = new PhotoLine(currentChar.name);
          photoName2.Speak(currentOption, 10, [100, 250, 500], [0, 500], true);
          currentOption.style.zIndex = "2";
          currentOption.onclick = async () => {
            this.pages[this.currentPageIndex].lines[currentIndex].speakerIndex = currentCharIndex;
            await this.Save(snv);
            linesDiv.empty();
            this.LoadDialogueLinesEdit(snv, linesDiv);
          };
        }
      };
      const photoName = new PhotoLine(this.characters[currentLine.speakerIndex].name);
      photoName.Speak(charDropdownDiv, 10, [100, 250, 500], [0, 500], true);
      const lineInput = lineDiv.createEl("input", { type: "text", value: currentLine.content });
      lineInput.style.width = "100%";
      lineInput.onchange = async () => {
        currentLine.content = lineInput.value;
        await this.Save(snv);
      };
      playButton.onclick = () => {
        const popup = speakDiv.createDiv();
        popup.style.position = "absolute";
        popup.style.top = "0px";
        popup.style.left = "0px";
        const photoline = new PhotoLine(lineInput.value);
        photoline.Speak(popup, 200, [100, 250, 500], [0, 500], false);
      };
    }
    const addButton = existingLinesDiv.createEl("button", { text: "+" });
    addButton.style.width = "10px";
    addButton.onclick = async () => {
      this.pages[this.currentPageIndex].lines.push(new DialogueLine2(0));
      await this.Save(snv);
      await this.LoadDialogueLinesEdit(snv, linesDiv);
    };
  }
  async LoadDialogueLinesDisplayOnly(linesDiv) {
    linesDiv.empty();
    const speakDiv = linesDiv.createDiv();
    const existingLinesDiv = linesDiv.createDiv("vbox");
    existingLinesDiv.style.overflowY = "scroll";
    for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
      const currentLine = this.pages[this.currentPageIndex].lines[i];
      const playButton = existingLinesDiv.createEl("button", { text: "\u25B7" });
      const nameDiv = existingLinesDiv.createDiv("hbox");
      const lineDiv = existingLinesDiv.createDiv("hbox");
      lineDiv.style.width = "100%";
      const photoName = new PhotoLine(this.characters[currentLine.speakerIndex].name);
      photoName.Speak(nameDiv, 10, [100, 250, 500], [0, 500], true);
      const photoLine = new PhotoLine(currentLine.content);
      photoLine.DisplayStatic(lineDiv, 10);
      playButton.onclick = () => {
        const popup = speakDiv.createDiv();
        popup.style.position = "absolute";
        popup.style.top = "0px";
        popup.style.left = "0px";
        photoLine.Speak(popup, 200, [100, 250, 500], [0, 500], false);
      };
    }
    for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
      const currentLine = this.pages[this.currentPageIndex].lines[i];
      const nameDiv = speakDiv.createDiv();
      nameDiv.style.position = "absolute";
      nameDiv.style.top = "0px";
      nameDiv.style.left = "0px";
      const photoName = new PhotoLine(this.characters[currentLine.speakerIndex].name);
      await photoName.Speak(nameDiv, 100, [100, 250, 500], [0, 500], false);
      const popup = speakDiv.createDiv();
      popup.style.position = "absolute";
      popup.style.top = "0px";
      popup.style.left = "0px";
      const photoLine = new PhotoLine(currentLine.content);
      await photoLine.Speak(popup, 200, [100, 250, 500], [0, 500], false);
    }
  }
};
var Page2 = class {
  constructor() {
    this.mediaFileID = -1;
    this.lines = [];
    this.mediaSizePercentage = 50;
  }
};
var DialogueLine2 = class {
  constructor(speakerIndex) {
    this.speakerIndex = speakerIndex;
    this.content = "";
  }
};
var Character2 = class {
  constructor(name = "") {
    this.name = name;
  }
};

// classes/conlangs/hwayu-text.ts
var Hwayu = class {
  static Display(div, text = "", fontSize = 20, isVertical = true) {
    const textElement = div.createEl("p", { text });
    textElement.style.fontFamily = isVertical ? "HwayuReal" : "HwayuHorizontal";
    textElement.style.fontSize = fontSize + "px";
    if (isVertical) {
      textElement.style.writingMode = "vertical-lr";
      textElement.style.textOrientation = "upright";
    }
    return textElement;
  }
  static CreateTextArea(div, existingText = "", fontSize = 20, isVertical = true) {
    const textArea = div.createEl("textarea", { text: existingText });
    textArea.style.fontFamily = isVertical ? "HwayuReal" : "HwayuHorizontal";
    textArea.style.fontSize = fontSize + "px";
    if (isVertical) {
      textArea.style.writingMode = "vertical-lr";
      textArea.style.textOrientation = "upright";
    }
    textArea.spellcheck = false;
    return textArea;
  }
  static CreateTextInput(div, existingText = "", fontSize = 20, isVertical = true) {
    const textInput = div.createEl("input", { type: "text", value: existingText });
    textInput.style.fontFamily = isVertical ? "HwayuReal" : "HwayuHorizontal";
    textInput.style.fontSize = fontSize + "px";
    if (isVertical) {
      textInput.style.writingMode = "vertical-lr";
      textInput.style.textOrientation = "upright";
    }
    textInput.spellcheck = false;
    return textInput;
  }
};

// classes/conlang-dictionary.ts
var ConlangDictionary = class extends CFEFile {
  static async CreateNewFileForLayer(data) {
    const unfinishedDictionary = await super.CreateNewFileForLayer(data);
    unfinishedDictionary.language = "Hwayu";
    unfinishedDictionary.words = [];
    unfinishedDictionary.searchTerm = "";
    unfinishedDictionary.searchInConlang = false;
    return unfinishedDictionary;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    const languageDropdown = mainDiv.createEl("select");
    languageDropdown.createEl("option", { text: "Hwayu", value: "Hwayu" });
    languageDropdown.createEl("option", { text: "Photolang", value: "Photolang" });
    languageDropdown.value = this.language;
    const addWordDiv = mainDiv.createDiv("vbox");
    await this.CreateNewWordEditor(snv, mainDiv, addWordDiv);
    languageDropdown.onchange = async () => {
      this.language = languageDropdown.value;
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    await this.DisplayList(snv, mainDiv);
  }
  async DisplayWord(snv, mainDiv, div, index) {
    div.empty();
    const modeButton = div.createEl("button", { text: "Edit" });
    modeButton.style.top = "0";
    modeButton.style.right = "0";
    modeButton.onclick = async () => {
      await this.EditWord(snv, mainDiv, div, index);
    };
    const wordDiv = div.createDiv("hbox");
    wordDiv.style.gap = "1%";
    wordDiv.style.fontSize = "25px";
    const conlangWord = this.words[index][0];
    const definition = this.words[index][1];
    const conlangWordDiv = this.DisplayConlangText(wordDiv, conlangWord);
    conlangWordDiv.classList.add("cfe-pointer-hover");
    wordDiv.createEl("p", { text: ":" });
    wordDiv.createEl("p", { text: definition });
    conlangWordDiv.onclick = async () => {
      try {
        await navigator.clipboard.writeText(conlangWord);
      } catch (err) {
        console.error("Failed to copy text: ", err);
      }
    };
  }
  async EditWord(snv, mainDiv, div, index) {
    div.empty();
    const buttonsDiv = div.createDiv("hbox");
    const modeButton = buttonsDiv.createEl("button", { text: "View" });
    modeButton.onclick = async () => {
      await this.DisplayWord(snv, mainDiv, div, index);
    };
    const deleteButton = buttonsDiv.createEl("button", { text: "Delete" });
    deleteButton.classList = "cfe-remove-button";
    deleteButton.onclick = async () => {
      this.words.splice(index, 1);
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    const wordDiv = div.createDiv("vbox");
    wordDiv.style.fontSize = "25px";
    wordDiv.createEl("p", { text: "Word in " + this.language });
    const conlangWord = this.words[index][0];
    const definition = this.words[index][1];
    const newWordInput = this.DisplayConlangEditor(wordDiv, conlangWord);
    wordDiv.createEl("p", { text: "Definition" });
    const definitionInput = wordDiv.createEl("input", { type: "text", value: definition });
    definitionInput.style.fontSize = "25px";
    const onSubmit = async () => {
      this.words[index] = [newWordInput.value, definitionInput.value];
      this.ReSort(index);
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    div.onkeydown = async (event) => {
      if (event.key === "Enter") {
        await onSubmit();
      }
    };
  }
  CreateNewWordEditor(snv, mainDiv, div) {
    div.createEl("p", { text: "Add New Word:" });
    div.createEl("p", { text: "Word in " + this.language });
    const newWordInput = this.DisplayConlangEditor(div);
    div.createEl("p", { text: "Definition" });
    const definitionInput = div.createEl("input", { type: "text", value: "" });
    const submitButton = div.createEl("button", { text: "submit" });
    const onSubmit = async () => {
      this.words.push([newWordInput.value, definitionInput.value]);
      this.ReSort(this.words.length - 1);
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    submitButton.onclick = onSubmit;
    div.onkeydown = async (event) => {
      if (event.key === "Enter") {
        await onSubmit();
      }
    };
  }
  DisplayConlangEditor(div, existingWord = "") {
    switch (this.language) {
      case "Hwayu":
      default:
        return Hwayu.CreateTextInput(div, existingWord, 25, false);
      case "Photolang":
        return PhotoLang.CreateTextInput(div, existingWord, 25);
    }
  }
  DisplayConlangText(div, existingWord = "") {
    switch (this.language) {
      case "Hwayu":
      default:
        return Hwayu.Display(div, existingWord, 25, false);
      case "Photolang":
        return PhotoLang.Display(div, existingWord, 25, null, null, true);
    }
  }
  async DisplayList(snv, div) {
    div.createEl("p", { text: "Search in " + this.language + "?" });
    const checkbox = div.createEl("input", { type: "checkbox" });
    checkbox.checked = this.searchInConlang;
    div.createEl("p", { text: "Search term" });
    const conlangSearch = this.DisplayConlangEditor(div, this.searchTerm);
    const englishSearch = div.createEl("input", { type: "text", value: this.searchTerm });
    let prevElement = checkbox.checked ? englishSearch : conlangSearch;
    let currentElement = checkbox.checked ? conlangSearch : englishSearch;
    prevElement.style.width = "100%";
    currentElement.style.width = "100%";
    this.searchTerm = prevElement.value;
    prevElement.style.display = "none";
    currentElement.value = this.searchTerm;
    currentElement.style.display = "";
    const resultsDiv = div.createDiv("cfe-dictionary-grid");
    const refreshResults = () => {
      this.searchTerm = currentElement.value;
      this.searchInConlang = checkbox.checked;
      resultsDiv.empty();
      for (let i = 0; i < this.words.length; i++) {
        if (this.words[i][checkbox.checked ? 0 : 1].contains(currentElement.value)) {
          const wordDiv = resultsDiv.createDiv("cfe-dictionary-word");
          this.DisplayWord(snv, div, wordDiv, i);
        }
      }
    };
    refreshResults();
    conlangSearch.oninput = refreshResults;
    englishSearch.oninput = refreshResults;
    checkbox.onchange = () => {
      resultsDiv.empty();
      prevElement = checkbox.checked ? englishSearch : conlangSearch;
      currentElement = checkbox.checked ? conlangSearch : englishSearch;
      this.searchTerm = prevElement.value;
      prevElement.style.display = "none";
      currentElement.value = this.searchTerm;
      currentElement.style.display = "";
      refreshResults();
    };
  }
  ReSort(indexOfChangedWord) {
    const changedWord = this.words.splice(indexOfChangedWord, 1)[0];
    let i = 0;
    let left = 0;
    let right = this.words.length - 1;
    while (left <= right) {
      const mid = Math.floor((left + right) / 2);
      if (this.words[mid][0] < changedWord[0]) {
        left = mid + 1;
        i = left;
      } else {
        right = mid - 1;
        i = mid;
      }
    }
    this.words.splice(i, 0, changedWord);
  }
};

// classes/cfe-file-handler.ts
var CFEFileHandler = class {
  static async CreateNew(data) {
    let newFile;
    switch (data.fileType) {
      case "Folder":
      default:
        newFile = await Folder.CreateNewFileForLayer(data);
        break;
      case "Single Media File":
        newFile = await SingleMediaFile.CreateNewFileForLayer(data);
        break;
      case "Variant Media File":
        newFile = await VariantMediaFile.CreateNewFileForLayer(data);
        break;
      case "Playlist":
        newFile = await Playlist.CreateNewFileForLayer(data);
        break;
      case "Hwayu Story":
        newFile = await HwayuStory.CreateNewFileForLayer(data);
        break;
      case "Photolang Story":
        newFile = await PhotolangStory.CreateNewFileForLayer(data);
        break;
      case "Source Folder Shortcut":
        newFile = await SourceFolderShortcut.CreateNewFileForLayer(data);
        break;
      case "Conlang Dictionary":
        newFile = await ConlangDictionary.CreateNewFileForLayer(data);
        break;
    }
    await newFile.Save(data.snv);
    return newFile;
  }
  static async LoadFile(snv, fileID) {
    const sourceFolder = snv.sourceFolder;
    const vault = snv.vault;
    const tFile = vault.getFileByPath(sourceFolder.vaultPath + "/" + fileID + ".json");
    if (tFile === null) {
      new import_obsidian3.Notice("File could not be found at the path: " + sourceFolder.vaultPath + "/" + fileID + ".json");
      throw Error("File could not be found at the path: " + sourceFolder.vaultPath + "/" + fileID + ".json");
    }
    const jsonData = await vault.cachedRead(tFile);
    const plainObject = JSON.parse(jsonData);
    switch (plainObject.fileType) {
      case "Folder":
      default:
        return Object.assign(new Folder(), plainObject);
      case "Single Media File":
        return Object.assign(new SingleMediaFile(), plainObject);
      case "Variant Media File":
        return Object.assign(new VariantMediaFile(), plainObject);
      case "Playlist":
        return Object.assign(new Playlist(), plainObject);
      case "Hwayu Story":
        return Object.assign(new HwayuStory(), plainObject);
      case "Photolang Story":
        return Object.assign(new PhotolangStory(), plainObject);
      case "Source Folder Shortcut":
        return Object.assign(new SourceFolderShortcut(), plainObject);
      case "Conlang Dictionary":
        return Object.assign(new ConlangDictionary(), plainObject);
    }
  }
};
/**
 * All of the known file formats
 */
CFEFileHandler.KnownFileTypes = [
  "Folder",
  "Single Media File",
  "Variant Media File",
  "Playlist",
  "Hwayu Story",
  "Photolang Story",
  "Source Folder Shortcut",
  "Conlang Dictionary"
];

// classes/snv.ts
var SourceAndVault = class {
  constructor(sourceFolder, vault) {
    this.sourceFolder = sourceFolder;
    this.vault = vault;
  }
};

// classes/source-folder.ts
var SourceFolder = class {
  constructor() {
    this.vaultPath = "";
    this.fileCount = 0;
  }
  async Display(container, vault) {
    const snv = new SourceAndVault(this, vault);
    let rootFolder;
    try {
      rootFolder = await CFEFileHandler.LoadFile(snv, 0);
    } catch (e) {
      const newRootFolderData = new FileCreationData(snv, "Folder", 0);
      rootFolder = await CFEFileHandler.CreateNew(newRootFolderData);
    }
    await SourceFolder.Save(snv);
    await rootFolder.Save(snv);
    await rootFolder.Display(snv, container);
  }
  static async CreateOrLoadSourceFolder(vaultPath, vault) {
    vaultPath = vaultPath.endsWith("/source.json") ? vaultPath.slice(0, -12) : vaultPath;
    const exists = vault.getFileByPath(vaultPath + "/source.json") !== null;
    let newSourceFolder;
    if (exists) {
      newSourceFolder = await this.LoadExistingSource(vaultPath, vault);
    } else {
      newSourceFolder = await this.CreateNewSourceFolder(vaultPath, vault);
    }
    return newSourceFolder;
  }
  static async CreateNewSourceFolder(vaultPath, vault) {
    const newSourceFolder = new SourceFolder();
    newSourceFolder.vaultPath = vaultPath;
    newSourceFolder.fileCount = 0;
    try {
      await vault.createFolder(vaultPath);
    } finally {
      const sourcePath = (0, import_obsidian4.normalizePath)(vaultPath + "/source.json");
      await vault.adapter.write(sourcePath, "0");
    }
    return newSourceFolder;
  }
  static async LoadExistingSource(vaultPath, vault) {
    const sourceTFile = vault.getFileByPath(vaultPath + "/source.json");
    if (sourceTFile === null) {
      new import_obsidian4.Notice("Source File could not be found at the path: " + vaultPath + "/source.json");
      throw Error("Source File could not be found at the path: " + vaultPath + "/source.json");
    }
    const jsonData = await vault.cachedRead(sourceTFile);
    const plainObject = await JSON.parse(jsonData);
    const newSourceFolder = Object.assign(new SourceFolder(), plainObject);
    newSourceFolder.vaultPath = vaultPath;
    await SourceFolder.Save(new SourceAndVault(newSourceFolder, vault));
    return newSourceFolder;
  }
  /**
   * Saves the new file count
   */
  static async Save(sourceAndVault) {
    const sourceFolder = sourceAndVault.sourceFolder;
    const vault = sourceAndVault.vault;
    const tFile = vault.getFileByPath(sourceFolder.vaultPath + "/source.json");
    if (tFile === null) {
      new import_obsidian4.Notice("Source File could not be found at the path: " + sourceFolder.vaultPath + "/source.json");
      throw Error("Source File could not be found at the path: " + sourceFolder.vaultPath + "/source.json");
    }
    const jsonData = JSON.stringify(sourceFolder);
    await vault.modify(tFile, jsonData);
  }
};

// classes/custom-explorer-view.ts
var VIEW_TYPE_CUSTOM_EXPLORER = "custom-explorer-view";
var CustomExplorerView = class extends import_obsidian5.ItemView {
  constructor(leaf, path) {
    super(leaf);
    this.defaultPath = path;
  }
  getViewType() {
    return VIEW_TYPE_CUSTOM_EXPLORER;
  }
  getDisplayText() {
    return "Example view";
  }
  async onOpen() {
    const wrapper = this.containerEl.children[1];
    wrapper.empty();
    const mainContainer = wrapper.createDiv("cfe-main-display");
    const homePage = mainContainer.createDiv("cfe-home-page");
    homePage.createEl("h4", { text: "Path to Source:" });
    const existingSourcePathInput = homePage.createEl("input", { type: "text", value: this.defaultPath });
    existingSourcePathInput.style.width = "100%";
    const submitButton = homePage.createEl("button", { text: "submit" });
    const vault = this.app.vault;
    submitButton.onclick = async () => {
      const path = existingSourcePathInput.value;
      const sf = await SourceFolder.CreateOrLoadSourceFolder(path, vault);
      await sf.Display(mainContainer, vault);
    };
    homePage.onkeydown = async (keyPressEvent) => {
      if (keyPressEvent.key === "Enter") {
        const path = existingSourcePathInput.value;
        const sf = await SourceFolder.CreateOrLoadSourceFolder(path, vault);
        await sf.Display(mainContainer, vault);
      }
    };
  }
  async onClose() {
  }
};

// main.ts
var import_obsidian6 = require("obsidian");
var DEFAULT_SETTINGS = {
  defaultPath: "source"
};
var CFE = class extends import_obsidian6.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_CUSTOM_EXPLORER,
      (leaf) => new CustomExplorerView(leaf, this.settings.defaultPath)
    );
    this.addRibbonIcon("folder", "Activate view", () => {
      this.activateView(VIEW_TYPE_CUSTOM_EXPLORER);
    });
    this.addCommand({
      id: "open-cfe-view",
      name: "Open Custom File Explorer View",
      callback: () => {
        this.activateView(VIEW_TYPE_CUSTOM_EXPLORER);
      }
    });
    this.addCommand({
      id: "sample-editor-command",
      name: "Sample editor command",
      editorCallback: (editor, view) => {
        console.log(editor.getSelection());
        editor.replaceSelection("Sample Editor Command");
      }
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async activateView(view_type) {
    const { workspace } = this.app;
    let leaf = null;
    leaf = workspace.getLeaf("tab");
    if (leaf === null) {
      new import_obsidian6.Notice("Failed to create view: workspace leaf was null");
      return;
    }
    await leaf.setViewState({ type: view_type, active: true });
    workspace.revealLeaf(leaf);
  }
};
var SampleSettingTab = class extends import_obsidian6.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian6.Setting(containerEl).setName("Default Source Path").setDesc("The vault path to automatically fill in for the source path").addText((text) => text.setPlaceholder("Default Source Path").setValue(this.plugin.settings.defaultPath).onChange(async (value) => {
      this.plugin.settings.defaultPath = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjbGFzc2VzL2N1c3RvbS1leHBsb3Jlci12aWV3LnRzIiwgImNsYXNzZXMvc291cmNlLWZvbGRlci50cyIsICJjbGFzc2VzL2NmZS1maWxlLWhhbmRsZXIudHMiLCAiY2xhc3Nlcy9jZmUtZmlsZS50cyIsICJjbGFzc2VzL2ZpbGUtY3JlYXRpb24tZGF0YS50cyIsICJjbGFzc2VzL3NpbmdsZS1tZWRpYS1maWxlLnRzIiwgImNsYXNzZXMvcmVhbC1maWxlLnRzIiwgImNsYXNzZXMvZm9sZGVyLnRzIiwgImNsYXNzZXMvaHdheXUtc3RvcnkudHMiLCAiY2xhc3Nlcy9wbGF5bGlzdC50cyIsICJjbGFzc2VzL3ZhcmlhbnQtbWVkaWEtZmlsZS50cyIsICJjbGFzc2VzL3NvdXJjZS1mb2xkZXItc2hvcnRjdXQudHMiLCAiY2xhc3Nlcy9jb25sYW5ncy9waG90b2xhbmctdGV4dC50cyIsICJjbGFzc2VzL3Bob3RvbGFuZy1zdG9yeS50cyIsICJjbGFzc2VzL2NvbmxhbmdzL2h3YXl1LXRleHQudHMiLCAiY2xhc3Nlcy9jb25sYW5nLWRpY3Rpb25hcnkudHMiLCAiY2xhc3Nlcy9zbnYudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEN1c3RvbUV4cGxvcmVyVmlldywgVklFV19UWVBFX0NVU1RPTV9FWFBMT1JFUiB9IGZyb20gJ2NsYXNzZXMvY3VzdG9tLWV4cGxvcmVyLXZpZXcnO1xuaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxuXG5pbnRlcmZhY2UgQ0ZFQ2V0dGluZ3Mge1xuXHRkZWZhdWx0UGF0aDogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDRkVDZXR0aW5ncyA9IHtcblx0ZGVmYXVsdFBhdGg6ICdzb3VyY2UnXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENGRSBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBDRkVDZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX0NVU1RPTV9FWFBMT1JFUixcblx0XHRcdChsZWFmKSA9PiBuZXcgQ3VzdG9tRXhwbG9yZXJWaWV3KGxlYWYsIHRoaXMuc2V0dGluZ3MuZGVmYXVsdFBhdGgpXG5cdFx0KTtcblxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbignZm9sZGVyJywgJ0FjdGl2YXRlIHZpZXcnLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFjdGl2YXRlVmlldyhWSUVXX1RZUEVfQ1VTVE9NX0VYUExPUkVSKTtcblx0XHR9KTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tY2ZlLXZpZXcnLFxuXHRcdFx0bmFtZTogJ09wZW4gQ3VzdG9tIEZpbGUgRXhwbG9yZXIgVmlldycsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmFjdGl2YXRlVmlldyhWSUVXX1RZUEVfQ1VTVE9NX0VYUExPUkVSKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBUaGlzIGFkZHMgYW4gZWRpdG9yIGNvbW1hbmQgdGhhdCBjYW4gcGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvbiB0aGUgY3VycmVudCBlZGl0b3IgaW5zdGFuY2Vcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzYW1wbGUtZWRpdG9yLWNvbW1hbmQnLFxuXHRcdFx0bmFtZTogJ1NhbXBsZSBlZGl0b3IgY29tbWFuZCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coZWRpdG9yLmdldFNlbGVjdGlvbigpKTtcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJ1NhbXBsZSBFZGl0b3IgQ29tbWFuZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNhbXBsZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXG5cdFx0Ly8gVXNpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB3aGVuIHRoaXMgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcblx0XHR9KTtcblxuXHRcdC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIGFjdGl2YXRlVmlldyh2aWV3X3R5cGU6IHN0cmluZykge1xuXHRcdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcblxuXHRcdGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XG5cblx0XHRsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuXHRcdGlmIChsZWFmID09PSBudWxsKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNyZWF0ZSB2aWV3OiB3b3Jrc3BhY2UgbGVhZiB3YXMgbnVsbFwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiB2aWV3X3R5cGUsIGFjdGl2ZTogdHJ1ZSB9KTtcblxuXHRcdC8vIFwiUmV2ZWFsXCIgdGhlIGxlYWYgaW4gY2FzZSBpdCBpcyBpbiBhIGNvbGxhcHNlZCBzaWRlYmFyXG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IENGRTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDRkUpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgU291cmNlIFBhdGgnKVxuXHRcdFx0LnNldERlc2MoJ1RoZSB2YXVsdCBwYXRoIHRvIGF1dG9tYXRpY2FsbHkgZmlsbCBpbiBmb3IgdGhlIHNvdXJjZSBwYXRoJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0RlZmF1bHQgU291cmNlIFBhdGgnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFBhdGgpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0UGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNvdXJjZUZvbGRlciB9IGZyb20gJy4vc291cmNlLWZvbGRlcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfQ1VTVE9NX0VYUExPUkVSID0gJ2N1c3RvbS1leHBsb3Jlci12aWV3JztcblxuZXhwb3J0IGNsYXNzIEN1c3RvbUV4cGxvcmVyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcblx0ZGVmYXVsdFBhdGg6IHN0cmluZztcblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGF0aDogc3RyaW5nKSB7XG5cdFx0c3VwZXIobGVhZik7XG5cdFx0dGhpcy5kZWZhdWx0UGF0aCA9IHBhdGg7XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpIHtcblx0XHRyZXR1cm4gVklFV19UWVBFX0NVU1RPTV9FWFBMT1JFUjtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCkge1xuXHRcdHJldHVybiAnRXhhbXBsZSB2aWV3Jztcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB3cmFwcGVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcblx0XHR3cmFwcGVyLmVtcHR5KCk7XG5cdFx0Y29uc3QgbWFpbkNvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRGl2KCdjZmUtbWFpbi1kaXNwbGF5Jyk7XG5cdFx0Y29uc3QgaG9tZVBhZ2UgPSBtYWluQ29udGFpbmVyLmNyZWF0ZURpdignY2ZlLWhvbWUtcGFnZScpO1xuXHRcdGhvbWVQYWdlLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1BhdGggdG8gU291cmNlOicgfSApO1xuXHRcdGNvbnN0IGV4aXN0aW5nU291cmNlUGF0aElucHV0ID0gaG9tZVBhZ2UuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiB0aGlzLmRlZmF1bHRQYXRoIH0gKTtcblx0XHRleGlzdGluZ1NvdXJjZVBhdGhJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBob21lUGFnZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnc3VibWl0JyB9ICk7XG5cdFx0Y29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcblx0XHRzdWJtaXRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHBhdGggPSBleGlzdGluZ1NvdXJjZVBhdGhJbnB1dC52YWx1ZTtcblx0XHRcdGNvbnN0IHNmID0gPFNvdXJjZUZvbGRlcj4gYXdhaXQgU291cmNlRm9sZGVyLkNyZWF0ZU9yTG9hZFNvdXJjZUZvbGRlcihwYXRoLCB2YXVsdCk7XG5cdFx0XHRhd2FpdCBzZi5EaXNwbGF5KG1haW5Db250YWluZXIsIHZhdWx0KTtcblx0XHR9XG5cdFx0aG9tZVBhZ2Uub25rZXlkb3duID0gYXN5bmMgKGtleVByZXNzRXZlbnQpID0+IHtcblx0XHRcdGlmIChrZXlQcmVzc0V2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gZXhpc3RpbmdTb3VyY2VQYXRoSW5wdXQudmFsdWU7XG5cdFx0XHRcdGNvbnN0IHNmID0gYXdhaXQgU291cmNlRm9sZGVyLkNyZWF0ZU9yTG9hZFNvdXJjZUZvbGRlcihwYXRoLCB2YXVsdCk7XG5cdFx0XHRcdGF3YWl0IHNmLkRpc3BsYXkobWFpbkNvbnRhaW5lciwgdmF1bHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIG9uQ2xvc2UoKSB7XG5cdFx0Ly8gTm90aGluZyB0byBjbGVhbiB1cC5cblx0fVxufVxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIE5vdGljZSwgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xuaW1wb3J0IHsgRmlsZUNyZWF0aW9uRGF0YSB9IGZyb20gXCIuL2ZpbGUtY3JlYXRpb24tZGF0YVwiO1xuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcblxuZXhwb3J0IGNsYXNzIFNvdXJjZUZvbGRlciB7XG5cdHZhdWx0UGF0aDogc3RyaW5nO1xuXHRmaWxlQ291bnQ6IG51bWJlcjtcblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMudmF1bHRQYXRoID0gJyc7XG5cdFx0dGhpcy5maWxlQ291bnQgPSAwO1xuXHR9XG5cblx0YXN5bmMgRGlzcGxheShjb250YWluZXI6IEhUTUxEaXZFbGVtZW50LCB2YXVsdDogVmF1bHQpIHtcblx0XHRjb25zdCBzbnYgPSBuZXcgU291cmNlQW5kVmF1bHQodGhpcywgdmF1bHQpO1xuXHRcdGxldCByb290Rm9sZGVyO1xuXHRcdHRyeSB7XG5cdFx0XHRyb290Rm9sZGVyID0gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCAwKTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zdCBuZXdSb290Rm9sZGVyRGF0YSA9IG5ldyBGaWxlQ3JlYXRpb25EYXRhKHNudiwgJ0ZvbGRlcicsIDApO1xuXHRcdFx0cm9vdEZvbGRlciA9IGF3YWl0IENGRUZpbGVIYW5kbGVyLkNyZWF0ZU5ldyhuZXdSb290Rm9sZGVyRGF0YSk7XG5cdFx0fVxuXHRcdGF3YWl0IFNvdXJjZUZvbGRlci5TYXZlKHNudik7XG5cdFx0YXdhaXQgcm9vdEZvbGRlci5TYXZlKHNudik7XG5cdFx0YXdhaXQgcm9vdEZvbGRlci5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcblx0fVxuXG5cdHN0YXRpYyBhc3luYyBDcmVhdGVPckxvYWRTb3VyY2VGb2xkZXIodmF1bHRQYXRoOiBzdHJpbmcsIHZhdWx0OiBWYXVsdCk6IFByb21pc2U8U291cmNlRm9sZGVyPiB7XG5cdFx0dmF1bHRQYXRoID0gdmF1bHRQYXRoLmVuZHNXaXRoKCcvc291cmNlLmpzb24nKSA/IHZhdWx0UGF0aC5zbGljZSgwLCAtMTIpIDogdmF1bHRQYXRoO1xuXHRcdGNvbnN0IGV4aXN0cyA9IHZhdWx0LmdldEZpbGVCeVBhdGgodmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpICE9PSBudWxsO1xuXHRcdGxldCBuZXdTb3VyY2VGb2xkZXI6IFNvdXJjZUZvbGRlcjtcblx0XHRpZiAoZXhpc3RzKSB7XG5cdFx0XHRuZXdTb3VyY2VGb2xkZXIgPSBhd2FpdCB0aGlzLkxvYWRFeGlzdGluZ1NvdXJjZSh2YXVsdFBhdGgsIHZhdWx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV3U291cmNlRm9sZGVyID0gYXdhaXQgdGhpcy5DcmVhdGVOZXdTb3VyY2VGb2xkZXIodmF1bHRQYXRoLCB2YXVsdCk7XG5cdFx0fVxuXHRcdHJldHVybiBuZXdTb3VyY2VGb2xkZXI7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBhc3luYyBDcmVhdGVOZXdTb3VyY2VGb2xkZXIodmF1bHRQYXRoOiBzdHJpbmcsIHZhdWx0OiBWYXVsdCk6IFByb21pc2U8U291cmNlRm9sZGVyPiB7XG5cdFx0Y29uc3QgbmV3U291cmNlRm9sZGVyID0gbmV3IFNvdXJjZUZvbGRlcigpO1xuXHRcdG5ld1NvdXJjZUZvbGRlci52YXVsdFBhdGggPSB2YXVsdFBhdGg7XG5cdFx0bmV3U291cmNlRm9sZGVyLmZpbGVDb3VudCA9IDA7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdFBhdGgpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRjb25zdCBzb3VyY2VQYXRoID0gbm9ybWFsaXplUGF0aCh2YXVsdFBhdGggKyAnL3NvdXJjZS5qc29uJyk7XG5cdFx0XHRhd2FpdCB2YXVsdC5hZGFwdGVyLndyaXRlKHNvdXJjZVBhdGgsICcwJyk7XG5cdFx0fVxuXHRcdHJldHVybiBuZXdTb3VyY2VGb2xkZXI7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBhc3luYyBMb2FkRXhpc3RpbmdTb3VyY2UodmF1bHRQYXRoOiBzdHJpbmcsIHZhdWx0OiBWYXVsdCk6IFByb21pc2U8U291cmNlRm9sZGVyPiB7XG5cdFx0Y29uc3Qgc291cmNlVEZpbGUgPSB2YXVsdC5nZXRGaWxlQnlQYXRoKHZhdWx0UGF0aCArICcvc291cmNlLmpzb24nKTtcblx0XHRpZiAoc291cmNlVEZpbGUgPT09IG51bGwpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJTb3VyY2UgRmlsZSBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIHBhdGg6IFwiICsgdmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpO1xuXHRcdFx0dGhyb3cgRXJyb3IoXCJTb3VyY2UgRmlsZSBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIHBhdGg6IFwiICsgdmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpO1xuXHRcdH1cblx0XHRjb25zdCBqc29uRGF0YSA9IGF3YWl0IHZhdWx0LmNhY2hlZFJlYWQoc291cmNlVEZpbGUpO1xuXG5cdFx0Y29uc3QgcGxhaW5PYmplY3QgPSBhd2FpdCBKU09OLnBhcnNlKGpzb25EYXRhKTtcblx0XHRjb25zdCBuZXdTb3VyY2VGb2xkZXIgPSBPYmplY3QuYXNzaWduKG5ldyBTb3VyY2VGb2xkZXIoKSwgcGxhaW5PYmplY3QpO1xuXHRcdG5ld1NvdXJjZUZvbGRlci52YXVsdFBhdGggPSB2YXVsdFBhdGg7XG5cdFx0YXdhaXQgU291cmNlRm9sZGVyLlNhdmUobmV3IFNvdXJjZUFuZFZhdWx0KG5ld1NvdXJjZUZvbGRlciwgdmF1bHQpKTtcblx0XHRyZXR1cm4gbmV3U291cmNlRm9sZGVyO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNhdmVzIHRoZSBuZXcgZmlsZSBjb3VudFxuXHQgKi9cblx0c3RhdGljIGFzeW5jIFNhdmUoc291cmNlQW5kVmF1bHQ6IFNvdXJjZUFuZFZhdWx0KSB7XG5cdFx0Y29uc3Qgc291cmNlRm9sZGVyID0gc291cmNlQW5kVmF1bHQuc291cmNlRm9sZGVyO1xuXHRcdGNvbnN0IHZhdWx0ID0gc291cmNlQW5kVmF1bHQudmF1bHQ7XG5cblx0XHQvLyBGaW5kIHRoZSBmaWxlIGFuZCBjaGVjayB0aGF0IGl0IGlzbid0IG51bGxcblx0XHRjb25zdCB0RmlsZSA9IHZhdWx0LmdldEZpbGVCeVBhdGgoc291cmNlRm9sZGVyLnZhdWx0UGF0aCArICcvc291cmNlLmpzb24nKTtcblx0XHRpZiAodEZpbGUgPT09IG51bGwpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJTb3VyY2UgRmlsZSBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIHBhdGg6IFwiICsgc291cmNlRm9sZGVyLnZhdWx0UGF0aCArICcvc291cmNlLmpzb24nKTtcblx0XHRcdHRocm93IEVycm9yKFwiU291cmNlIEZpbGUgY291bGQgbm90IGJlIGZvdW5kIGF0IHRoZSBwYXRoOiBcIiArIHNvdXJjZUZvbGRlci52YXVsdFBhdGggKyAnL3NvdXJjZS5qc29uJyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShzb3VyY2VGb2xkZXIpO1xuXHRcdGF3YWl0IHZhdWx0Lm1vZGlmeSh0RmlsZSwganNvbkRhdGEpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IENGRUZpbGUgfSBmcm9tIFwiLi9jZmUtZmlsZVwiO1xyXG5pbXBvcnQgeyBGaWxlQ3JlYXRpb25EYXRhIH0gZnJvbSBcIi4vZmlsZS1jcmVhdGlvbi1kYXRhXCI7XHJcbmltcG9ydCB7IEZvbGRlciB9IGZyb20gXCIuL2ZvbGRlclwiO1xyXG5pbXBvcnQgeyBId2F5dVN0b3J5IH0gZnJvbSBcIi4vaHdheXUtc3RvcnlcIjtcclxuaW1wb3J0IHsgUGxheWxpc3QgfSBmcm9tIFwiLi9wbGF5bGlzdFwiO1xyXG5pbXBvcnQgeyBTaW5nbGVNZWRpYUZpbGUgfSBmcm9tIFwiLi9zaW5nbGUtbWVkaWEtZmlsZVwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5pbXBvcnQgeyBWYXJpYW50TWVkaWFGaWxlIH0gZnJvbSBcIi4vdmFyaWFudC1tZWRpYS1maWxlXCI7XHJcbmltcG9ydCB7IFNvdXJjZUZvbGRlclNob3J0Y3V0IH0gZnJvbSBcIi4vc291cmNlLWZvbGRlci1zaG9ydGN1dFwiO1xyXG5pbXBvcnQgeyBQaG90b2xhbmdTdG9yeSB9IGZyb20gXCIuL3Bob3RvbGFuZy1zdG9yeVwiO1xyXG5pbXBvcnQgeyBDb25sYW5nRGljdGlvbmFyeSB9IGZyb20gXCIuL2NvbmxhbmctZGljdGlvbmFyeVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENGRUZpbGVIYW5kbGVyIHtcclxuXHJcblx0LyoqXHJcblx0ICogQWxsIG9mIHRoZSBrbm93biBmaWxlIGZvcm1hdHNcclxuXHQgKi9cclxuXHRzdGF0aWMgS25vd25GaWxlVHlwZXM6IHN0cmluZ1tdID0gW1xyXG5cdFx0J0ZvbGRlcicsXHJcblx0XHQnU2luZ2xlIE1lZGlhIEZpbGUnLFxyXG5cdFx0J1ZhcmlhbnQgTWVkaWEgRmlsZScsXHJcblx0XHQnUGxheWxpc3QnLFxyXG5cdFx0J0h3YXl1IFN0b3J5JyxcclxuXHRcdCdQaG90b2xhbmcgU3RvcnknLFxyXG5cdFx0J1NvdXJjZSBGb2xkZXIgU2hvcnRjdXQnLFxyXG5cdFx0J0NvbmxhbmcgRGljdGlvbmFyeSdcclxuXHRdXHJcblxyXG5cdHN0YXRpYyBhc3luYyBDcmVhdGVOZXcoZGF0YTogRmlsZUNyZWF0aW9uRGF0YSk6IFByb21pc2U8Q0ZFRmlsZT4ge1xyXG5cdFx0bGV0IG5ld0ZpbGU6IENGRUZpbGU7XHJcblx0XHRzd2l0Y2goZGF0YS5maWxlVHlwZSkge1xyXG5cdFx0XHRjYXNlICdGb2xkZXInOlxyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCBGb2xkZXIuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdTaW5nbGUgTWVkaWEgRmlsZSc6XHJcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IFNpbmdsZU1lZGlhRmlsZS5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ1ZhcmlhbnQgTWVkaWEgRmlsZSc6XHJcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IFZhcmlhbnRNZWRpYUZpbGUuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdQbGF5bGlzdCc6XHJcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IFBsYXlsaXN0LkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnSHdheXUgU3RvcnknOlxyXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCBId2F5dVN0b3J5LkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnUGhvdG9sYW5nIFN0b3J5JzpcclxuXHRcdFx0XHRuZXdGaWxlID0gYXdhaXQgUGhvdG9sYW5nU3RvcnkuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdTb3VyY2UgRm9sZGVyIFNob3J0Y3V0JzpcclxuXHRcdFx0XHRuZXdGaWxlID0gYXdhaXQgU291cmNlRm9sZGVyU2hvcnRjdXQuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdDb25sYW5nIERpY3Rpb25hcnknOlxyXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCBDb25sYW5nRGljdGlvbmFyeS5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRhd2FpdCBuZXdGaWxlLlNhdmUoZGF0YS5zbnYpO1xyXG5cdFx0cmV0dXJuIG5ld0ZpbGU7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgYXN5bmMgTG9hZEZpbGUoc252OiBTb3VyY2VBbmRWYXVsdCwgZmlsZUlEOiBudW1iZXIpOiBQcm9taXNlPENGRUZpbGU+IHtcclxuXHRcdGNvbnN0IHNvdXJjZUZvbGRlciA9IHNudi5zb3VyY2VGb2xkZXI7XHJcblx0XHRjb25zdCB2YXVsdCA9IHNudi52YXVsdDtcclxuXHJcblx0XHRjb25zdCB0RmlsZSA9IHZhdWx0LmdldEZpbGVCeVBhdGgoc291cmNlRm9sZGVyLnZhdWx0UGF0aCArICcvJyArIGZpbGVJRCArICcuanNvbicpO1xyXG5cdFx0aWYgKHRGaWxlID09PSBudWxsKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJGaWxlIGNvdWxkIG5vdCBiZSBmb3VuZCBhdCB0aGUgcGF0aDogXCIgKyBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy8nICsgZmlsZUlEICsgJy5qc29uJyk7XHJcblx0XHRcdHRocm93IEVycm9yKFwiRmlsZSBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIHBhdGg6IFwiICsgc291cmNlRm9sZGVyLnZhdWx0UGF0aCArICcvJyArIGZpbGVJRCArICcuanNvbicpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QganNvbkRhdGEgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKHRGaWxlKTtcclxuXHRcdGNvbnN0IHBsYWluT2JqZWN0ID0gSlNPTi5wYXJzZShqc29uRGF0YSk7XHJcblx0XHRzd2l0Y2gocGxhaW5PYmplY3QuZmlsZVR5cGUpIHtcclxuXHRcdFx0Y2FzZSAnRm9sZGVyJzpcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgRm9sZGVyKCksIHBsYWluT2JqZWN0KTtcclxuXHRcdFx0Y2FzZSAnU2luZ2xlIE1lZGlhIEZpbGUnOlxyXG5cdFx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTaW5nbGVNZWRpYUZpbGUoKSwgcGxhaW5PYmplY3QpO1xyXG5cdFx0XHRjYXNlICdWYXJpYW50IE1lZGlhIEZpbGUnOlxyXG5cdFx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBWYXJpYW50TWVkaWFGaWxlKCksIHBsYWluT2JqZWN0KTtcclxuXHRcdFx0Y2FzZSAnUGxheWxpc3QnOlxyXG5cdFx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBQbGF5bGlzdCgpLCBwbGFpbk9iamVjdCk7XHJcblx0XHRcdGNhc2UgJ0h3YXl1IFN0b3J5JzpcclxuXHRcdFx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgSHdheXVTdG9yeSgpLCBwbGFpbk9iamVjdCk7XHJcblx0XHRcdGNhc2UgJ1Bob3RvbGFuZyBTdG9yeSc6XHJcblx0XHRcdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IFBob3RvbGFuZ1N0b3J5KCksIHBsYWluT2JqZWN0KTtcclxuXHRcdFx0Y2FzZSAnU291cmNlIEZvbGRlciBTaG9ydGN1dCc6XHJcblx0XHRcdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IFNvdXJjZUZvbGRlclNob3J0Y3V0KCksIHBsYWluT2JqZWN0KTtcclxuXHRcdFx0Y2FzZSAnQ29ubGFuZyBEaWN0aW9uYXJ5JzpcclxuXHRcdFx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgQ29ubGFuZ0RpY3Rpb25hcnkoKSwgcGxhaW5PYmplY3QpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5pbXBvcnQgeyBGaWxlQ3JlYXRpb25EYXRhIH0gZnJvbSBcIi4vZmlsZS1jcmVhdGlvbi1kYXRhXCI7XHJcbmltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBTb3VyY2VGb2xkZXIgfSBmcm9tIFwiLi9zb3VyY2UtZm9sZGVyXCI7XHJcbmltcG9ydCB7IEZvbGRlciB9IGZyb20gXCIuL2ZvbGRlclwiO1xyXG5cclxuLy8jcmVnaW9uIEZvcm1hdHRlZCBGaWxlIEhhbmRsZXJcclxuLy8jZW5kcmVnaW9uXHJcblxyXG4vLyNyZWdpb24gRmlsZSBUeXBlc1xyXG4vKipcclxuICogQW4gaW50ZXJwcmV0YXRpb24gb2YganNvbiBmaWxlcyBhcyBhIFwiZmlsZVwiIG9mIGEgc3BlY2lmaWMgXCJmaWxlIGZvcm1hdFwiXHJcbiAqIHRoYXQgY2FuIGJlIGludGVycHJldGVkIGFuZCBkaXNwbGF5ZWQgYnkgdGhlIHBsdWdpbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDRkVGaWxlIHtcclxuXHQvKipcclxuXHQgKiBBIHVuaXF1ZSAod2l0aGluIHRoZSBcInNvdXJjZVwiIG9mIHRoZSBjdXJyZW50IGV4cGxvcmVyKSBudW1lcmljYWwgaWRlbnRpZmllciBmb3IgdGhlIGZpbGVcclxuXHQgKi9cclxuXHRpZDogbnVtYmVyO1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgdHlwZSBvZiBmaWxlXHJcblx0ICovXHJcblx0ZmlsZVR5cGU6IHN0cmluZztcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIG5hbWUgb2YgdGhlIGZpbGUgd2l0aGluIHRoZSBzb3VyY2VcclxuXHQgKi9cclxuXHRmaWxlTmFtZTogc3RyaW5nO1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgSUQgb2YgdGhlIHBhcmVudCBmb2xkZXJcclxuXHQgKi9cclxuXHRwYXJlbnRGb2xkZXJJRDogbnVtYmVyO1xyXG5cclxuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBGSUxFX05BTUVfSU5QVVRfSU5ERVggPSAwO1xyXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFBBUkVOVF9GT0xERVJfSURfSU5QVVRfSU5ERVggPSAxO1xyXG5cclxuXHQvKipcclxuXHQgKiBTSE9VTEQgTk9UIEJFIENBTExFRCBPVVRTSURFIE9GIENGRUZpbGVIYW5kbGVyLlxyXG5cdCAqIFxyXG5cdCAqIFVzZSBDRkVGaWxlSGFuZGxlci5DcmVhdGVOZXcoKSBpbnN0ZWFkLlxyXG5cdCAqIFxyXG5cdCAqIENISUxEIENMQVNTRVMgU0hPVUxEIE5PVCBXUklURSBUTyBBIEZJTEUuIFRISVMgSVMgRE9ORSBJTlNJREUgT0YgQ0ZFRmlsZUhhbmRsZXJcclxuXHQgKiBcclxuXHQgKiBDRkVGaWxlIGxheWVyOlxyXG5cdCAqIFxyXG5cdCAqIHNldHMgdGhlIHNvdXJjZSwgaWQsIGZpbGUgdHlwZSwgZmlsZSBuYW1lLCBhbmQgcGFyZW50IGZvbGRlciBpZCBvZiB0aGUgZmlsZSBvYmplY3QuXHJcblx0ICovXHJcblx0c3RhdGljIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhOiBGaWxlQ3JlYXRpb25EYXRhKTogUHJvbWlzZTxDRkVGaWxlPiB7XHJcblx0XHRjb25zdCBzb3VyY2VBbmRWYXVsdCA9IGRhdGEuc252O1xyXG5cdFx0Y29uc3Qgc291cmNlRm9sZGVyID0gc291cmNlQW5kVmF1bHQuc291cmNlRm9sZGVyO1xyXG5cclxuXHRcdC8vIFNldCB0aGUgdmFsdWVzIG9mIHRoZSB1bmZpbmlzaGVkIGZpbGVcclxuXHRcdGNvbnN0IHVuZmluaXNoZWRGaWxlID0gbmV3IENGRUZpbGUoKTtcclxuXHRcdHVuZmluaXNoZWRGaWxlLmlkID0gc291cmNlRm9sZGVyLmZpbGVDb3VudDtcclxuXHRcdHVuZmluaXNoZWRGaWxlLmZpbGVUeXBlID0gZGF0YS5maWxlVHlwZTtcclxuXHRcdHVuZmluaXNoZWRGaWxlLmZpbGVOYW1lID0gJyc7XHJcblx0XHR1bmZpbmlzaGVkRmlsZS5wYXJlbnRGb2xkZXJJRCA9IGRhdGEucGFyZW50Rm9sZGVySUQ7XHJcblx0XHRcclxuXHRcdC8vIFVwZGF0ZSB0aGUgZmlsZSBjb3VudFxyXG5cdFx0c291cmNlRm9sZGVyLmZpbGVDb3VudCsrO1xyXG5cdFx0YXdhaXQgU291cmNlRm9sZGVyLlNhdmUoc291cmNlQW5kVmF1bHQpO1xyXG5cclxuXHRcdC8vIEZpbmQgdGhlIHBhcmVudCBmb2xkZXIgYW5kIGFkZCB0aGlzIGZpbGUgdG8gaXRcclxuXHRcdGlmICh1bmZpbmlzaGVkRmlsZS5pZCAhPT0gdW5maW5pc2hlZEZpbGUucGFyZW50Rm9sZGVySUQpIHtcclxuXHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVyID0gPEZvbGRlcj4gKGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNvdXJjZUFuZFZhdWx0LCB1bmZpbmlzaGVkRmlsZS5wYXJlbnRGb2xkZXJJRCkpO1xyXG5cdFx0XHRwYXJlbnRGb2xkZXIuY29udGFpbmVkRmlsZUlEcy5wdXNoKHVuZmluaXNoZWRGaWxlLmlkKTtcclxuXHRcdFx0YXdhaXQgcGFyZW50Rm9sZGVyLlNhdmUoc291cmNlQW5kVmF1bHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJldHVybiB0aGUgdW5maW5pc2hlZCBmaWxlIHNvIHRoZSBuZXh0IGxheWVyIGNhbiBhZGQgdG8gaXRcclxuXHRcdHJldHVybiB1bmZpbmlzaGVkRmlsZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNIT1VMRCBOT1QgQkUgQ0FMTEVEIE9VVFNJREUgT0YgQ0ZFRmlsZUhhbmRsZXIuXHJcblx0ICogXHJcblx0ICogVXNlIENGRUZpbGVIYW5kbGVyLkRpc3BsYXlUaHVtYm5haWwoKSBpbnN0ZWFkLlxyXG5cdCAqIFxyXG5cdCAqIENGRUZpbGUgbGF5ZXI6XHJcblx0ICogXHJcblx0ICogc2V0cyB0aGUgdGh1bWJuYWlsIGNvbnRhaW5lcidzIGNzcyBjbGFzcyB0byAnY2ZlLXRodW1ibmFpbCdcclxuXHQgKiBhbmQgZnVsbHkgZGlzcGxheXMgdGhlIGZpbGUgaWYgdGhlIHRodW1ibmFpbCBpcyBjbGlja2VkLlxyXG5cdCAqL1xyXG5cdGFzeW5jIERpc3BsYXlUaHVtYm5haWwoc291cmNlQW5kVmF1bHQ6IFNvdXJjZUFuZFZhdWx0LCB0aHVtYm5haWxEaXY6IEhUTUxEaXZFbGVtZW50LCBkaXNwbGF5RGl2OiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0dGh1bWJuYWlsRGl2LmNsYXNzTmFtZSA9ICdjZmUtdGh1bWJuYWlsIHZib3gnO1xyXG5cdFx0dGh1bWJuYWlsRGl2Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGF3YWl0IHRoaXMuRGlzcGxheShzb3VyY2VBbmRWYXVsdCwgZGlzcGxheURpdik7XHJcblx0XHR9XHJcblx0XHRjb25zdCBpZFRleHQgPSB0aHVtYm5haWxEaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRpZFRleHQudGV4dENvbnRlbnQgPSAnSUQ6ICcgKyB0aGlzLmlkO1xyXG5cdFx0aWRUZXh0LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XHJcblx0XHRjb25zdCBmaWxlVGV4dCA9IHRodW1ibmFpbERpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdGZpbGVUZXh0LnRleHRDb250ZW50ID0gJ0ZpbGUgVHlwZTogJyArIHRoaXMuZmlsZVR5cGU7XHJcblx0XHRmaWxlVGV4dC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xyXG5cdFx0Y29uc3QgbmFtZVRleHQgPSB0aHVtYm5haWxEaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRuYW1lVGV4dC50ZXh0Q29udGVudCA9ICdGaWxlIE5hbWU6ICcgKyB0aGlzLmZpbGVOYW1lO1xyXG5cdFx0bmFtZVRleHQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogU0hPVUxEIE5PVCBCRSBDQUxMRUQgT1VUU0lERSBPRiBDRkVGaWxlSGFuZGxlci5cclxuXHQgKiBcclxuXHQgKiBVc2UgQ0ZFRmlsZUhhbmRsZXIuRGlzcGxheSgpIGluc3RlYWQuXHJcblx0ICogXHJcblx0ICogQ0ZFRmlsZSBsYXllcjpcclxuXHQgKiBcclxuXHQgKiBlbXB0aWVzIHRoZSBkaXNwbGF5IGNvbnRhaW5lciBwcm92aWRlZC5cclxuXHQgKi9cclxuXHRhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0Y29uc3QgaGVhZGVyQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0Y29uc3QgYmFja0J1dHRvbiA9IGhlYWRlckNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQmFjayB0byBwYXJlbnQgZm9sZGVyJyB9ICk7XHJcblx0XHRoZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdGaWxlIElEOiAnICsgdGhpcy5pZCB9IClcclxuXHRcdGhlYWRlckNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0ZpbGUgTmFtZTogJyB9IClcclxuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGhlYWRlckNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6IHRoaXMuZmlsZU5hbWUgfSApO1xyXG5cdFx0YmFja0J1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBwYXJlbnRGb2xkZXIgPSBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIHRoaXMucGFyZW50Rm9sZGVySUQpO1xyXG5cdFx0XHRpZiAocGFyZW50Rm9sZGVyICE9PSBudWxsKSB7XHJcblx0XHRcdFx0YXdhaXQgcGFyZW50Rm9sZGVyLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRuYW1lSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMuZmlsZU5hbWUgPSBuYW1lSW5wdXQudmFsdWU7XHJcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU0hPVUxEIE5PVCBCRSBDQUxMRUQgT1VUU0lERSBPRiBDRkVGaWxlSGFuZGxlci5cclxuXHQgKiBcclxuXHQgKiAoaXQgaXMgdW5saWtlbHkgdGhpcyBtZXRob2Qgd2lsbCBldmVyIGJlIG92ZXJyaWRlbiBieSBjaGlsZCBjbGFzc2VzLCBidXQgbWFraW5nIHRoaXMgJ2luYWNjZXNzaWJsZScgaXMgZm9yIGNvbnNpc3RlbmN5KVxyXG5cdCAqIFxyXG5cdCAqIFVzZSBDRkVGaWxlSGFuZGxlci5TYXZlRmlsZSgpIGluc3RlYWQuXHJcblx0ICogXHJcblx0ICogRm9ybWF0dGVkIEZpbGUgbGF5ZXI6XHJcblx0ICogXHJcblx0ICogRGVsZXRlcyB0aGlzIGZpbGUgSUQgZnJvbSB0aGUgb3JpZ2luYWwgcGFyZW50IGZvbGRlciwgYWRkcyB0aGlzIGZpbGUgdG8gdGhlIG5ldyBwYXJlbnQgZm9sZGVyLCBhbmQgY2hhbmdlcyB0aGUgcGFyZW50IGZvbGRlciBJRFxyXG5cdCAqL1xyXG5cdGFzeW5jIE1vdmVGaWxlKHNvdXJjZUFuZFZhdWx0OiBTb3VyY2VBbmRWYXVsdCwgbmV3UGFyZW50Rm9sZGVySUQ6IG51bWJlcikge1xyXG5cdFx0Ly8gRGVsZXRlIHRoaXMgZmlsZSBpZCBmcm9tIHRoZSBvcmlnaW5hbCBwYXJlbnQgZm9sZGVyXHJcblx0XHRjb25zdCBvbGRQYXJlbnRGb2xkZXIgPSA8Rm9sZGVyPiAoYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc291cmNlQW5kVmF1bHQsIHRoaXMucGFyZW50Rm9sZGVySUQpKTtcclxuXHRcdGNvbnN0IGluZGV4T2ZGaWxlID0gb2xkUGFyZW50Rm9sZGVyLmNvbnRhaW5lZEZpbGVJRHMuaW5kZXhPZih0aGlzLmlkKTtcclxuXHRcdG9sZFBhcmVudEZvbGRlci5jb250YWluZWRGaWxlSURzLnNwbGljZShpbmRleE9mRmlsZSwgMSk7XHJcblx0XHRvbGRQYXJlbnRGb2xkZXIuU2F2ZShzb3VyY2VBbmRWYXVsdCk7IC8vIHRoaXMgY2FuIGJlIGRvbmUgYXN5bmNocm9ub3VzbHkgd2l0aG91dCBhZmZlY3RpbmcgdGhlIG90aGVyc1xyXG5cclxuXHRcdC8vIEFkZCB0aGlzIGZpbGUgdG8gdGhlIG5ldyBwYXJlbnQgZm9sZGVyXHJcblx0XHRjb25zdCBuZXdQYXJlbnRGb2xkZXIgPSA8Rm9sZGVyPiAoYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc291cmNlQW5kVmF1bHQsIG5ld1BhcmVudEZvbGRlcklEKSk7XHJcblx0XHRuZXdQYXJlbnRGb2xkZXIuY29udGFpbmVkRmlsZUlEcy5wdXNoKHRoaXMuaWQpO1xyXG5cdFx0bmV3UGFyZW50Rm9sZGVyLlNhdmUoc291cmNlQW5kVmF1bHQpOyAvLyB0aGlzIGNhbiBiZSBkb25lIGFzeW5jaHJvbm91c2x5IHdpdGhvdXQgYWZmZWN0aW5nIHRoZSBvdGhlcnNcclxuXHJcblx0XHR0aGlzLnBhcmVudEZvbGRlcklEID0gbmV3UGFyZW50Rm9sZGVySUQ7XHJcblx0XHR0aGlzLlNhdmUoc291cmNlQW5kVmF1bHQpOyAvLyB0aGlzIGNhbiBiZSBkb25lIGFzeW5jaHJvbm91c2x5IHdpdGhvdXQgYWZmZWN0aW5nIHRoZSBvdGhlcnNcclxuXHR9XHJcblxyXG5cdGFzeW5jIFNhdmUoc291cmNlQW5kVmF1bHQ6IFNvdXJjZUFuZFZhdWx0KSB7XHJcblx0XHRjb25zdCBzb3VyY2VGb2xkZXIgPSBzb3VyY2VBbmRWYXVsdC5zb3VyY2VGb2xkZXI7XHJcblx0XHRjb25zdCB2YXVsdCA9IHNvdXJjZUFuZFZhdWx0LnZhdWx0O1xyXG5cdFx0Y29uc3QgZmlsZVBhdGggPSBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy8nICsgdGhpcy5pZCArICcuanNvbic7XHJcblx0XHRjb25zdCBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMpO1xyXG5cdFx0Y29uc3QgdEZpbGUgPSB2YXVsdC5nZXRGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdGlmICh0RmlsZSA9PT0gbnVsbCkge1xyXG5cdFx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRhd2FpdCB2YXVsdC5hZGFwdGVyLndyaXRlKG5vcm1hbGl6ZWRQYXRoLCBqc29uRGF0YSk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGF3YWl0IHZhdWx0Lm1vZGlmeSh0RmlsZSwganNvbkRhdGEpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcblxuZXhwb3J0IGNsYXNzIEZpbGVDcmVhdGlvbkRhdGEge1xuXHRzbnY6IFNvdXJjZUFuZFZhdWx0O1xuXHRmaWxlVHlwZTogc3RyaW5nO1xuXHRwYXJlbnRGb2xkZXJJRDogbnVtYmVyO1xuXHRjb25zdHJ1Y3RvcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBmaWxlVHlwZTogc3RyaW5nLCBwYXJlbnRGb2xkZXJJRDogbnVtYmVyKSB7XG5cdFx0dGhpcy5zbnYgPSBzbnY7XG5cdFx0dGhpcy5maWxlVHlwZSA9IGZpbGVUeXBlO1xuXHRcdHRoaXMucGFyZW50Rm9sZGVySUQgPSBwYXJlbnRGb2xkZXJJRDtcblx0fVxufVxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xuaW1wb3J0IHsgUmVhbEZpbGUgfSBmcm9tIFwiLi9yZWFsLWZpbGVcIjtcbmltcG9ydCB7IEZpbGVDcmVhdGlvbkRhdGEgfSBmcm9tIFwiLi9maWxlLWNyZWF0aW9uLWRhdGFcIjtcblxuZXhwb3J0IGNsYXNzIFNpbmdsZU1lZGlhRmlsZSBleHRlbmRzIFJlYWxGaWxlIHtcblx0ZmlsZVR5cGUgPSAnU2luZ2xlIE1lZGlhIEZpbGUnO1xuXG5cdHByaXZhdGUgZXh0ZW5zaW9uTmFtZTogc3RyaW5nO1xuXHRcblx0Z2V0IG1lZGlhVHlwZSgpOiBzdHJpbmcge1xuXHRcdHN3aXRjaCAodGhpcy5leHRlbnNpb25OYW1lKSB7XG5cdFx0XHRjYXNlICdwbmcnOlxuXHRcdFx0Y2FzZSAnanBnJzpcblx0XHRcdGNhc2UgJ3dlYnAnOlxuXHRcdFx0Y2FzZSAnaGVpYyc6XG5cdFx0XHRjYXNlICdnaWYnOlxuXHRcdFx0XHRyZXR1cm4gJ0ltYWdlJztcblx0XHRcdGNhc2UgJ21wNCc6XG5cdFx0XHRjYXNlICdNUDQnOlxuXHRcdFx0Y2FzZSAnbW92Jzpcblx0XHRcdGNhc2UgJ01PVic6XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm4gJ1ZpZGVvJztcblx0XHR9XG5cdH1cblxuXHRvdmVycmlkZSBhc3luYyBnZXRTcmMoc252OiBTb3VyY2VBbmRWYXVsdCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgbWVkaWFGaWxlID0gYXdhaXQgdGhpcy5nZXRURmlsZShzbnYpO1xuXHRcdGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgc252LnZhdWx0LnJlYWRCaW5hcnkobWVkaWFGaWxlKTtcblx0XHRjb25zdCBibG9iID0gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSk7XG5cdFx0Y29uc3QgbWVkaWFVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdHJldHVybiBtZWRpYVVybDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZ2V0VEZpbGUoc252OiBTb3VyY2VBbmRWYXVsdCk6IFByb21pc2U8VEZpbGU+IHtcblx0XHRjb25zdCBtZWRpYVBhdGggPSBhd2FpdCB0aGlzLmdldFBhdGgoc252KTtcblx0XHRsZXQgbWVkaWFGaWxlID0gc252LnZhdWx0LmdldEZpbGVCeVBhdGgobWVkaWFQYXRoKTtcblx0XHRpZiAobWVkaWFGaWxlID09PSBudWxsKSB7XG5cdFx0XHRtZWRpYUZpbGUgPSBzbnYudmF1bHQuZ2V0RmlsZUJ5UGF0aChtZWRpYVBhdGggKyAnLicgKyB0aGlzLmV4dGVuc2lvbk5hbWUpO1xuXHRcdFx0aWYgKG1lZGlhRmlsZSA9PT0gbnVsbCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignRmlsZSBub3QgZm91bmQgYXQgcGF0aDogJyArIG1lZGlhUGF0aCArICcgb3IgJyArIG1lZGlhUGF0aCArICcuJyArIHRoaXMuZXh0ZW5zaW9uTmFtZSk7XG5cdFx0XHR9XG5cdFx0XHRzbnYudmF1bHQucmVuYW1lKG1lZGlhRmlsZSwgbWVkaWFQYXRoKTtcblx0XHR9XG5cdFx0cmV0dXJuIG1lZGlhRmlsZTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZ2V0UGF0aChzbnY6IFNvdXJjZUFuZFZhdWx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBzb3VyY2VGb2xkZXIgPSBzbnYuc291cmNlRm9sZGVyO1xuXHRcdHJldHVybiBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy8nICsgdGhpcy5pZCArICcgQWN0dWFsIEZpbGUnO1xuXHR9XG5cblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhOiBGaWxlQ3JlYXRpb25EYXRhKTogUHJvbWlzZTxTaW5nbGVNZWRpYUZpbGU+IHtcblx0XHRjb25zdCBuZXdNZWRpYUZpbGUgPSA8U2luZ2xlTWVkaWFGaWxlPiAoYXdhaXQgc3VwZXIuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpKTtcblx0XHRuZXdNZWRpYUZpbGUuZXh0ZW5zaW9uTmFtZSA9ICcnO1xuXHRcdHJldHVybiBuZXdNZWRpYUZpbGU7XG5cdH1cblxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRhd2FpdCBzdXBlci5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcblxuXHRcdGNvbnN0IGltYWdlRGlzcGxheUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHRpbWFnZURpc3BsYXlDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdDaGFuZ2UgZmlsZScgfSApO1xuXHRcdGNvbnN0IG5ld0ZpbGVJbnB1dCA9IGltYWdlRGlzcGxheUNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJyB9ICk7XG5cblx0XHRhd2FpdCB0aGlzLkRpc3BsYXlNZWRpYU9ubHkoaW1hZ2VEaXNwbGF5Q29udGFpbmVyLCBzbnYpO1xuXHRcdFxuXHRcdG5ld0ZpbGVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IG9sZEZpbGUgPSBhd2FpdCB0aGlzLmdldFRGaWxlKHNudik7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgc252LnZhdWx0LmRlbGV0ZShvbGRGaWxlKTtcblx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLlNhdmVOZXdGaWxlKHNudiwgbmV3RmlsZUlucHV0KTtcblx0XHRcdFx0XHR0aGlzLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0Y29uc29sZS5sb2coKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIFNhdmVOZXdGaWxlKHNudjogU291cmNlQW5kVmF1bHQsIGZpbGVJbnB1dDogSFRNTElucHV0RWxlbWVudCkge1xuXHRcdGNvbnN0IGZpbGVBcnJheSA9IGZpbGVJbnB1dC5maWxlcztcblx0XHRpZiAoZmlsZUFycmF5ID09PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBFcnJvcihcIm5vIGZpbGUgd2FzIHNlbGVjdGVkXCIpO1xuXHRcdH1cblx0XHRjb25zdCBtZWRpYUZpbGUgPSBmaWxlQXJyYXlbMF07XG5cdFx0YXdhaXQgdGhpcy5TZXRGaWxlVG8oc252LCBtZWRpYUZpbGUpO1xuXHR9XG5cblx0YXN5bmMgU2V0RmlsZVRvKHNudjogU291cmNlQW5kVmF1bHQsIG1lZGlhRmlsZTogRmlsZSkge1xuXHRcdGNvbnN0IHBhcnRzT2ZQYXRoID0gbWVkaWFGaWxlLm5hbWUuc3BsaXQoJy4nKTtcblx0XHRjb25zdCBleHRlbnNpb24gPSBwYXJ0c09mUGF0aFtwYXJ0c09mUGF0aC5sZW5ndGggLSAxXTtcblx0XHR0aGlzLmZpbGVOYW1lID0gcGFydHNPZlBhdGhbMF07XG5cdFx0dGhpcy5leHRlbnNpb25OYW1lID0gZXh0ZW5zaW9uO1xuXHRcdGNvbnN0IHBhdGggPSBzbnYuc291cmNlRm9sZGVyLnZhdWx0UGF0aCArICcvJyArIHRoaXMuaWQgKyAnIEFjdHVhbCBGaWxlJztcblx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XG5cdFx0YXdhaXQgc252LnZhdWx0LmFkYXB0ZXIud3JpdGVCaW5hcnkobm9ybWFsaXplZFBhdGgsIGF3YWl0IG1lZGlhRmlsZS5hcnJheUJ1ZmZlcigpKTtcblx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0fVxuXG5cdGFzeW5jIERpc3BsYXlNZWRpYU9ubHkobWVkaWFEaXY6IEhUTUxEaXZFbGVtZW50LCBzbnY6IFNvdXJjZUFuZFZhdWx0KSB7XG5cdFx0YXdhaXQgc3VwZXIuRGlzcGxheU1lZGlhT25seShtZWRpYURpdiwgc252KTtcblx0XHRpZiAodGhpcy5tZWRpYVR5cGUgPT09ICdJbWFnZScpIHtcblx0XHRcdGNvbnN0IGltYWdlRWxlbWVudCA9IG1lZGlhRGl2LmNyZWF0ZUVsKCdpbWcnKTtcblx0XHRcdGltYWdlRWxlbWVudC5zcmMgPSBhd2FpdCB0aGlzLmdldFNyYyhzbnYpO1xuXHRcdFx0aW1hZ2VFbGVtZW50LnN0eWxlLm9iamVjdEZpdCA9ICdjb250YWluJztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgdmlkZW9FbGVtZW50ID0gbWVkaWFEaXYuY3JlYXRlRWwoJ3ZpZGVvJyk7XG5cdFx0XHR2aWRlb0VsZW1lbnQuc3JjID0gYXdhaXQgdGhpcy5nZXRTcmMoc252KTtcblx0XHRcdHZpZGVvRWxlbWVudC5jb250cm9scyA9IHRydWU7XG5cdFx0XHR2aWRlb0VsZW1lbnQubG9vcCA9IHRydWU7XG5cdFx0XHR2aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuXHRcdFx0dmlkZW9FbGVtZW50LnN0eWxlLm9iamVjdEZpdCA9ICdjb250YWluJztcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZWFsRmlsZSBleHRlbmRzIENGRUZpbGUge1xyXG5cdGZpbGVUeXBlID0gJ1JlYWwgRmlsZSc7XHJcblxyXG5cdGFic3RyYWN0IGdldFNyYyhzb3VyY2VBbmRWYXVsdDogU291cmNlQW5kVmF1bHQpOiBQcm9taXNlPHN0cmluZz47XHJcblx0YXN5bmMgRGlzcGxheU1lZGlhT25seShtZWRpYURpdjogSFRNTERpdkVsZW1lbnQsIHNudjogU291cmNlQW5kVmF1bHQpIHtcclxuXHRcdG1lZGlhRGl2LmVtcHR5KCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgQ0ZFRmlsZUhhbmRsZXIgfSBmcm9tIFwiLi9jZmUtZmlsZS1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEZpbGVDcmVhdGlvbkRhdGEgfSBmcm9tIFwiLi9maWxlLWNyZWF0aW9uLWRhdGFcIjtcclxuaW1wb3J0IHsgU2luZ2xlTWVkaWFGaWxlIH0gZnJvbSBcIi4vc2luZ2xlLW1lZGlhLWZpbGVcIjtcclxuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcclxuXHJcbi8qKlxyXG4gKiBBIGNoaWxkIGNsYXNzIG9mIHRoZSBDRkVGaWxlIGNsYXNzLiBSZXByZXNlbnRzIGEgZm9sZGVyIHdpdGhpbiB0aGUgU291cmNlRm9sZGVyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZvbGRlciBleHRlbmRzIENGRUZpbGUge1xyXG5cdC8qKlxyXG5cdCAqIFRoZSBJRHMgb2YgZmlsZXMgY29udGFpbmVkIGluIHRoaXMgZm9sZGVyXHJcblx0ICovXHJcblx0Y29udGFpbmVkRmlsZUlEczogbnVtYmVyW107XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBvdmVycmlkZSBGb2xkZXIgbGF5ZXI6XHJcblx0ICogXHJcblx0ICogaW5pdGlhbGl6ZXMgdGhlIGNvbnRhaW5lZCBmaWxlIGlkcyBhcnJheSBmb3IgdGhlIGZvbGRlciBvYmplY3RcclxuXHQgKi9cclxuXHRzdGF0aWMgb3ZlcnJpZGUgYXN5bmMgQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGE6IEZpbGVDcmVhdGlvbkRhdGEpOiBQcm9taXNlPEZvbGRlcj4ge1xyXG5cdFx0Y29uc3QgdW5maW5pc2hlZEZvbGRlciA9IDxGb2xkZXI+IChhd2FpdCBzdXBlci5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YSkpO1xyXG5cdFx0dW5maW5pc2hlZEZvbGRlci5jb250YWluZWRGaWxlSURzID0gW107XHJcblx0XHRyZXR1cm4gdW5maW5pc2hlZEZvbGRlcjtcclxuXHR9XHJcblxyXG5cdG92ZXJyaWRlIGFzeW5jIERpc3BsYXkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGF3YWl0IHN1cGVyLkRpc3BsYXkoc252LCBtYWluRGl2KTtcclxuXHRcdGNvbnN0IGNyZWF0ZUJ1dHRvbnNEaXYgPSBtYWluRGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0Y29uc3QgbmV3RmlsZUJ1dHRvbiA9IGNyZWF0ZUJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NyZWF0ZSBOZXcgRmlsZScgfSApO1xyXG5cdFx0bmV3RmlsZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLkxvYWRDcmVhdGVGaWxlVUkoc252LCBtYWluRGl2KTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IG1lZGlhRmlsZXNCdXR0b24gPSBjcmVhdGVCdXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdVcGxvYWQgTXVsdGlwbGUgSW1hZ2VzIC8gVmlkZW9zJyB9ICk7XHJcblx0XHRtZWRpYUZpbGVzQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMuTG9hZEZpbGVTZWxlY3Rpb25VSShzbnYsIG1haW5EaXYpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgZm9sZGVyRGlzcGxheUNvbnRhaW5lciA9IG1haW5EaXYuY3JlYXRlRGl2KCdjZmUtZ3JpZCcpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbnRhaW5lZEZpbGVJRHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgY29udGFpbmVkRmlsZSA9IGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgdGhpcy5jb250YWluZWRGaWxlSURzW2ldKTtcclxuXHRcdFx0aWYgKGNvbnRhaW5lZEZpbGUgIT09IG51bGwpIHtcclxuXHRcdFx0XHRhd2FpdCBjb250YWluZWRGaWxlLkRpc3BsYXlUaHVtYm5haWwoc252LCBmb2xkZXJEaXNwbGF5Q29udGFpbmVyLmNyZWF0ZURpdigpLCBtYWluRGl2KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwcml2YXRlIExvYWRDcmVhdGVGaWxlVUkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGRhdGEgPSBuZXcgRmlsZUNyZWF0aW9uRGF0YShzbnYsICdGb2xkZXInLCAwKTtcclxuXHRcdGNvbnN0IHBvcFVwQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoJ3Zib3ggY2ZlLXBvcHVwJyk7XHJcblx0XHRwb3BVcENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0Nob29zZSBhIEZpbGUgVHlwZSB0byBjcmVhdGU6ICcgfSApO1xyXG5cdFx0Y29uc3QgZmlsZVR5cGVEcm9wZG93biA9IHBvcFVwQ29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuXHRcdHBvcFVwQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnUGFyZW50IEZvbGRlciBJRDogJyB9ICk7XHJcblx0XHRjb25zdCBwYXJlbnRGb2xkZXJJRElucHV0ID0gcG9wVXBDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArIHRoaXMuaWQgfSApO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBDRkVGaWxlSGFuZGxlci5Lbm93bkZpbGVUeXBlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBvcHRpb24gPSBmaWxlVHlwZURyb3Bkb3duLmNyZWF0ZUVsKCdvcHRpb24nKTtcclxuXHRcdFx0b3B0aW9uLnZhbHVlID0gQ0ZFRmlsZUhhbmRsZXIuS25vd25GaWxlVHlwZXNbaV07XHJcblx0XHRcdG9wdGlvbi50ZXh0ID0gQ0ZFRmlsZUhhbmRsZXIuS25vd25GaWxlVHlwZXNbaV07XHJcblx0XHRcdGZpbGVUeXBlRHJvcGRvd24ub3B0aW9ucy5hZGQob3B0aW9uKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGV4aXRCdXR0b24gPSBwb3BVcENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnWCcsIGNsczogJ2NmZS1leGl0LWJ1dHRvbicgfSApO1xyXG5cdFx0ZXhpdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHRwb3BVcENvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHBvcFVwQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDcmVhdGUnIH0gKTtcclxuXHRcdHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRkYXRhLmZpbGVUeXBlID0gZmlsZVR5cGVEcm9wZG93bi52YWx1ZTtcclxuXHRcdFx0ZGF0YS5wYXJlbnRGb2xkZXJJRCA9IHBhcnNlSW50KHBhcmVudEZvbGRlcklESW5wdXQudmFsdWUpO1xyXG5cdFx0XHRhd2FpdCBDRkVGaWxlSGFuZGxlci5DcmVhdGVOZXcoZGF0YSk7XHJcblx0XHRcdGV4aXRCdXR0b24uY2xpY2soKTtcclxuXHRcdFx0Y29uc3QgcmVzZXR0ZWRGb2xkZXIgPSBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIHRoaXMuaWQpO1xyXG5cdFx0XHRhd2FpdCByZXNldHRlZEZvbGRlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIExvYWRGaWxlU2VsZWN0aW9uVUkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IHBvcFVwQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoJ3Zib3ggY2ZlLXBvcHVwJyk7XHJcblx0XHRwb3BVcENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0Nob29zZSB5b3VyIGZpbGVzJyB9ICk7XHJcblx0XHRjb25zdCBmaWxlSW5wdXQgPSBwb3BVcENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJyB9ICk7XHJcblx0XHRmaWxlSW5wdXQubXVsdGlwbGUgPSB0cnVlO1xyXG5cdFx0cG9wVXBDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdQYXJlbnQgRm9sZGVyIElEOiAnIH0gKTtcclxuXHRcdGNvbnN0IHBhcmVudEZvbGRlcklESW5wdXQgPSBwb3BVcENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcnICsgdGhpcy5pZCB9ICk7XHJcblx0XHRjb25zdCBleGl0QnV0dG9uID0gcG9wVXBDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1gnLCBjbHM6ICdjZmUtZXhpdC1idXR0b24nIH0gKTtcclxuXHRcdGV4aXRCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0cG9wVXBDb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBwb3BVcENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ3JlYXRlJyB9ICk7XHJcblx0XHRzdWJtaXRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgZmlsZUFycmF5ID0gZmlsZUlucHV0LmZpbGVzO1xyXG5cdFx0XHRjb25zdCBwYXJlbnRGb2xkZXJJRCA9IHBhcnNlSW50KHBhcmVudEZvbGRlcklESW5wdXQudmFsdWUpO1xyXG5cdFx0XHRpZiAoZmlsZUFycmF5ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBuZXcgRmlsZUNyZWF0aW9uRGF0YShzbnYsICdTaW5nbGUgTWVkaWEgRmlsZScsIHBhcmVudEZvbGRlcklEKTtcclxuXHRcdFx0XHRcdGNvbnN0IGNmZUZpbGUgPSBhd2FpdCBDRkVGaWxlSGFuZGxlci5DcmVhdGVOZXcoZGF0YSk7XHJcblx0XHRcdFx0XHRjb25zdCBtZWRpYUZpbGUgPSBPYmplY3QuYXNzaWduKG5ldyBTaW5nbGVNZWRpYUZpbGUoKSwgY2ZlRmlsZSk7XHJcblx0XHRcdFx0XHRhd2FpdCBtZWRpYUZpbGUuU2V0RmlsZVRvKHNudiwgZmlsZUFycmF5W2ldKTtcclxuXHRcdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5TYXZlKHNudik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGV4aXRCdXR0b24uY2xpY2soKTtcclxuXHRcdFx0XHRjb25zdCByZXNldHRlZEZvbGRlciA9IGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgdGhpcy5pZCk7XHJcblx0XHRcdFx0YXdhaXQgcmVzZXR0ZWRGb2xkZXIuRGlzcGxheShzbnYsIG1haW5EaXYpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcbmltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xuaW1wb3J0IHsgRmlsZUNyZWF0aW9uRGF0YSB9IGZyb20gXCIuL2ZpbGUtY3JlYXRpb24tZGF0YVwiO1xuaW1wb3J0IHsgU2luZ2xlTWVkaWFGaWxlIH0gZnJvbSBcIi4vc2luZ2xlLW1lZGlhLWZpbGVcIjtcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XG5cbmV4cG9ydCBjbGFzcyBId2F5dVN0b3J5IGV4dGVuZHMgQ0ZFRmlsZSB7XG5cdGZpbGVUeXBlID0gJ0h3YXl1IFN0b3J5JztcblxuXHRwcml2YXRlIGN1cnJlbnRQYWdlSW5kZXg6IG51bWJlcjtcblx0cHJpdmF0ZSBwYWdlczogUGFnZVtdO1xuXHRwcml2YXRlIGNoYXJhY3RlcnM6IENoYXJhY3RlcltdO1xuXHRwcml2YXRlIGdldCBmb250KCkge1xuXHRcdHJldHVybiAnSHdheXVSZWFsJztcblx0fVxuXG5cdHN0YXRpYyBvdmVycmlkZSBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YTogRmlsZUNyZWF0aW9uRGF0YSk6IFByb21pc2U8SHdheXVTdG9yeT4ge1xuXHRcdGNvbnN0IG5ld1N0b3J5RmlsZSA9IDxId2F5dVN0b3J5PiAoYXdhaXQgc3VwZXIuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpKTtcblx0XHRuZXdTdG9yeUZpbGUuY3VycmVudFBhZ2VJbmRleCA9IDA7XG5cdFx0bmV3U3RvcnlGaWxlLnBhZ2VzID0gW107XG5cdFx0bmV3U3RvcnlGaWxlLmNoYXJhY3RlcnMgPSBbXTtcblx0XHRyZXR1cm4gbmV3U3RvcnlGaWxlO1xuXHR9XG5cblx0b3ZlcnJpZGUgYXN5bmMgRGlzcGxheShzbnY6IFNvdXJjZUFuZFZhdWx0LCBtYWluRGl2OiBIVE1MRGl2RWxlbWVudCkge1xuXHRcdGF3YWl0IHN1cGVyLkRpc3BsYXkoc252LCBtYWluRGl2KTtcblx0XHRhd2FpdCB0aGlzLkxvYWRTdG9yeVVJKHNudiwgbWFpbkRpdi5jcmVhdGVEaXYoJ3Zib3gnKSk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIExvYWRTdG9yeVVJKHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdFx0bWFpbkRpdi5lbXB0eSgpO1xuXHRcdG1haW5EaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdHbyB0byBwYWdlIG51bWJlcjonIH0gKTtcblx0XHRjb25zdCBwYWdlU2VsZWN0RGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0XHRjb25zdCBwYWdlTnVtYmVySW5wdXQgPSBwYWdlU2VsZWN0RGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJycgKyAodGhpcy5jdXJyZW50UGFnZUluZGV4ICsgMSkgfSApO1xuXHRcdHBhZ2VTZWxlY3REaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICcnICsgJy8nICsgdGhpcy5wYWdlcy5sZW5ndGggfSApO1xuXHRcdGNvbnN0IGdvQnV0dG9uID0gcGFnZVNlbGVjdERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR28nIH0gKTtcblx0XHRnb0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4ID0gcGFyc2VJbnQocGFnZU51bWJlcklucHV0LnZhbHVlKSAtIDE7XG5cdFx0XHR0aGlzLkxvYWRDdXJyZW50UGFnZShzbnYsIG1haW5EaXYpO1xuXHRcdH1cblx0XHR0aGlzLkxvYWRDaGFyYWN0ZXJFZGl0b3JVSShzbnYsIG1haW5EaXYpO1xuXHR9XG5cblx0cHJpdmF0ZSBMb2FkQ2hhcmFjdGVyRWRpdG9yVUkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRjb25zdCBlZGl0b3JEaXYgPSBtYWluRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdGNvbnN0IGFkZENoYXJCdXR0b24gPSBtYWluRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdBZGQgQ2hhcmFjdGVyJyB9ICk7XG5cdFx0bGV0IGNvdW50ID0gMDtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhcmFjdGVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gY291bnQ7XG5cdFx0XHRjb3VudCsrO1xuXHRcdFx0Y29uc3QgY2hhckRpdiA9IGVkaXRvckRpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHRcdGNvbnN0IG5hbWVEaXYgPSBjaGFyRGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdFx0bmFtZURpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05hbWU6ICcgfSApO1xuXHRcdFx0Y29uc3QgbmFtZUlucHV0ID0gbmFtZURpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6IHRoaXMuY2hhcmFjdGVyc1tpXS5uYW1lIH0gKTtcblx0XHRcdGNvbnN0IGNvbG9yRGl2ID0gZWRpdG9yRGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdFx0Y29sb3JEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUZXh0IENvbG9yOicgfSApO1xuXHRcdFx0Y29uc3QgY29sb3JJbnB1dCA9IGNvbG9yRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NvbG9yJywgdmFsdWU6IHRoaXMuY2hhcmFjdGVyc1tpXS5jb2xvciB9ICk7XG5cdFx0XHRjb2xvckRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0JhY2tncm91bmQgQ29sb3I6JyB9ICk7XG5cdFx0XHRjb25zdCBiYWNrZ3JvdW5kSW5wdXQgPSBjb2xvckRpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjb2xvcicsIHZhbHVlOiB0aGlzLmNoYXJhY3RlcnNbaV0uYmFja2dyb3VuZENvbG9yIH0gKTtcblx0XHRcdGNvbnN0IHN3YXBCdXR0b24gPSBjb2xvckRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU3dhcCcgfSApO1xuXHRcdFx0bmFtZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5uYW1lID0gbmFtZUlucHV0LnZhbHVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdH1cblx0XHRcdGNvbG9ySW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yID0gY29sb3JJbnB1dC52YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0XHRiYWNrZ3JvdW5kSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRJbnB1dC52YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0XHRzd2FwQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmJhY2tncm91bmRDb2xvciA9IGNvbG9ySW5wdXQudmFsdWU7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yID0gYmFja2dyb3VuZElucHV0LnZhbHVlO1xuXHRcdFx0XHRiYWNrZ3JvdW5kSW5wdXQudmFsdWUgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5iYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRcdGNvbG9ySW5wdXQudmFsdWUgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5jb2xvcjtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFkZENoYXJCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IGNvdW50O1xuXHRcdFx0Y291bnQrKztcblx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBDaGFyYWN0ZXIoJycsICd3aGl0ZScsICdibGFjaycpKTtcblx0XHRcdGNvbnN0IGNoYXJEaXYgPSBlZGl0b3JEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XG5cdFx0XHRjb25zdCBuYW1lRGl2ID0gY2hhckRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0XHRcdG5hbWVEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdOYW1lOiAnIH0gKTtcblx0XHRcdGNvbnN0IG5hbWVJbnB1dCA9IG5hbWVEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSApO1xuXHRcdFx0Y29uc3QgY29sb3JEaXYgPSBlZGl0b3JEaXYuY3JlYXRlRGl2KCdoYm94Jyk7XG5cdFx0XHRjb2xvckRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1RleHQgQ29sb3I6JyB9ICk7XG5cdFx0XHRjb25zdCBjb2xvcklucHV0ID0gY29sb3JEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY29sb3InLCB2YWx1ZTogdGhpcy5jaGFyYWN0ZXJzW2NvdW50IC0gMV0uY29sb3IgfSApO1xuXHRcdFx0Y29sb3JEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdCYWNrZ3JvdW5kIENvbG9yOicgfSApO1xuXHRcdFx0Y29uc3QgYmFja2dyb3VuZElucHV0ID0gY29sb3JEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY29sb3InLCB2YWx1ZTogdGhpcy5jaGFyYWN0ZXJzW2NvdW50IC0gMV0uYmFja2dyb3VuZENvbG9yIH0gKTtcblx0XHRcdGNvbnN0IHN3YXBCdXR0b24gPSBjb2xvckRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU3dhcCcgfSApO1xuXHRcdFx0bmFtZUlucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5uYW1lID0gbmFtZUlucHV0LnZhbHVlO1xuXHRcdFx0XHR0aGlzLlNhdmUoc252KTtcblx0XHRcdH1cblx0XHRcdGNvbG9ySW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yID0gY29sb3JJbnB1dC52YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0XHRiYWNrZ3JvdW5kSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRJbnB1dC52YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0XHRzd2FwQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmJhY2tncm91bmRDb2xvciA9IGNvbG9ySW5wdXQudmFsdWU7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yID0gYmFja2dyb3VuZElucHV0LnZhbHVlO1xuXHRcdFx0XHRiYWNrZ3JvdW5kSW5wdXQudmFsdWUgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5iYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRcdGNvbG9ySW5wdXQudmFsdWUgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5jb2xvcjtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLlNhdmUoc252KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIExvYWRQYWdlU2VsZWN0b3Ioc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRjb25zdCBidXR0b25zRGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0XHRjb25zdCBiYWNrQnV0dG9uID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnLScgfSApO1xuXHRcdGNvbnN0IHBhZ2VOdW1iZXJJbnB1dCA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggKyAxKSB9ICk7XG5cdFx0YnV0dG9uc0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJycgKyAnLycgKyB0aGlzLnBhZ2VzLmxlbmd0aCB9ICk7XG5cdFx0Y29uc3QgbmV4dEJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcblx0XHRjb25zdCBkZWxldGVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEZWxldGUgUGFnZScgfSApO1xuXHRcdGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2ZlLXJlbW92ZS1idXR0b24nO1xuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FkZCBQYWdlJyB9ICk7XG5cdFx0YmFja0J1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFBhZ2VJbmRleCA+IDApIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4LS07XG5cdFx0XHRcdGF3YWl0IHRoaXMuTG9hZEN1cnJlbnRQYWdlKHNudiwgbWFpbkRpdik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG5leHRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggPCB0aGlzLnBhZ2VzLmxlbmd0aCkge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRQYWdlSW5kZXgrKztcblx0XHRcdFx0YXdhaXQgdGhpcy5Mb2FkQ3VycmVudFBhZ2Uoc252LCBtYWluRGl2KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cGFnZU51bWJlcklucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4ID0gcGFyc2VJbnQocGFnZU51bWJlcklucHV0LnZhbHVlKSAtIDE7XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZShzbnYsIG1haW5EaXYpO1xuXHRcdH1cblx0XHRkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMucGFnZXMuc3BsaWNlKHRoaXMuY3VycmVudFBhZ2VJbmRleCwgMSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggIT09IDApIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4LS07XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZShzbnYsbWFpbkRpdik7XG5cdFx0fVxuXHRcdGFkZEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgZGVmYXVsdFBhZ2UgPSBuZXcgUGFnZSgpO1xuXHRcdFx0Y29uc3QgdGhpc1BhZ2VGaWxlSUQgPSB0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubWVkaWFGaWxlSUQ7XG5cdFx0XHRpZiAodGhpc1BhZ2VGaWxlSUQgIT09IC0xICYmIHRoaXNQYWdlRmlsZUlEIDwgc252LnNvdXJjZUZvbGRlci5maWxlQ291bnQpIHtcblx0XHRcdFx0ZGVmYXVsdFBhZ2UubWVkaWFGaWxlSUQgPSB0aGlzUGFnZUZpbGVJRDtcblx0XHRcdH1cblx0XHRcdHRoaXMucGFnZXMuc3BsaWNlKHRoaXMuY3VycmVudFBhZ2VJbmRleCArIDEsIDAsIGRlZmF1bHRQYWdlKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4Kys7XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZShzbnYsbWFpbkRpdik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBMb2FkQ3VycmVudFBhZ2Uoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRtYWluRGl2LmVtcHR5KCk7XG5cdFx0Y29uc3QgYmFja0J1dHRvbiA9IG1haW5EaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1JldHVybiB0byBTdG9yeScgfSApO1xuXHRcdGJhY2tCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuTG9hZFN0b3J5VUkoc252LCBtYWluRGl2KTtcblx0XHR9XG5cdFx0dGhpcy5Mb2FkUGFnZVNlbGVjdG9yKHNudiwgbWFpbkRpdik7XG5cdFx0bWFpbkRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ01lZGlhIEZpbGUgSUQ6JyB9ICk7XG5cdFx0Y29uc3QgbWVkaWFGaWxlSURJbnB1dCA9IG1haW5EaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSApO1xuXHRcdFx0XHRjb25zdCBwYW5lbERpdiA9IG1haW5EaXYuY3JlYXRlRGl2KCdoYm94Jyk7XG5cdFx0Y29uc3Qgb3V0ZXJNZWRpYURpdiA9IHBhbmVsRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdGNvbnN0IGxpbmVzRGl2ID0gcGFuZWxEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XG5cdFx0Y29uc3QgbWVkaWFXaWR0aElucHV0ID0gb3V0ZXJNZWRpYURpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JyB9ICk7XG5cdFx0bWVkaWFXaWR0aElucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0b3V0ZXJNZWRpYURpdi5zdHlsZS53aWR0aCA9IG1lZGlhV2lkdGhJbnB1dC52YWx1ZSArICclJztcblx0XHRcdGxpbmVzRGl2LnN0eWxlLndpZHRoID0gMTAwIC0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKSArICclJztcblx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlID0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdH1cblx0XHRjb25zdCBtZWRpYURpdiA9IG91dGVyTWVkaWFEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XG5cdFx0b3V0ZXJNZWRpYURpdi5zdHlsZS53aWR0aCA9ICc1MCUnO1xuXHRcdG1lZGlhRGl2LnN0eWxlLm9iamVjdEZpdCA9ICdjb250YWluJztcblx0XHRsaW5lc0Rpdi5zdHlsZS53aWR0aCA9ICc1MCUnO1xuXHRcdGxpbmVzRGl2LnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJztcblx0XHRsaW5lc0Rpdi5zdHlsZS5wb3NpdGlvbiA9ICdzdGlja3knO1xuXHRcdGxpbmVzRGl2LnN0eWxlLnRvcCA9ICcwJSc7XG5cdFx0aWYgKHRoaXMuY3VycmVudFBhZ2VJbmRleCA8IHRoaXMucGFnZXMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBjdXJyZW50UGFnZSA9IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XTtcblx0XHRcdGNvbnN0IG1lZGlhRmlsZUlEID0gY3VycmVudFBhZ2UubWVkaWFGaWxlSUQ7XG5cdFx0XHRtZWRpYUZpbGVJRElucHV0LnZhbHVlID0gJycgKyBjdXJyZW50UGFnZS5tZWRpYUZpbGVJRDtcblx0XHRcdGlmIChtZWRpYUZpbGVJRCA+IDApIHtcblx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCBtZWRpYUZpbGVJRCk7XG5cdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlKSB7XG5cdFx0XHRcdG1lZGlhV2lkdGhJbnB1dC52YWx1ZSA9ICcnICsgdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2U7XG5cdFx0XHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSBtZWRpYVdpZHRoSW5wdXQudmFsdWUgKyAnJSc7XG5cdFx0XHRcdGxpbmVzRGl2LnN0eWxlLndpZHRoID0gMTAwIC0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKSArICclJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lZGlhV2lkdGhJbnB1dC52YWx1ZSA9ICc1MCc7XG5cdFx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlID0gNTA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBkZWZhdWx0UGFnZSA9IG5ldyBQYWdlKCk7XG5cdFx0XHRjb25zdCBsYXN0UGFnZSA9IHRoaXMuY3VycmVudFBhZ2VJbmRleCAtIDE7XG5cdFx0XHRpZiAobGFzdFBhZ2UgPj0gMCAmJiB0aGlzLmN1cnJlbnRQYWdlSW5kZXggIT09IDApIHtcblx0XHRcdFx0Y29uc3QgbGFzdFBhZ2VGaWxlSUQgPSB0aGlzLnBhZ2VzW2xhc3RQYWdlXS5tZWRpYUZpbGVJRDtcblx0XHRcdFx0Y29uc3QgbGFzdFBhZ2VTaXplID0gdGhpcy5wYWdlc1tsYXN0UGFnZV0ubWVkaWFTaXplUGVyY2VudGFnZTtcblx0XHRcdFx0ZGVmYXVsdFBhZ2UubWVkaWFTaXplUGVyY2VudGFnZSA9IGxhc3RQYWdlU2l6ZTtcblx0XHRcdFx0bWVkaWFXaWR0aElucHV0LnZhbHVlID0gJycgKyBsYXN0UGFnZVNpemU7XG5cdFx0XHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSBtZWRpYVdpZHRoSW5wdXQudmFsdWUgKyAnJSc7XG5cdFx0XHRcdGxpbmVzRGl2LnN0eWxlLndpZHRoID0gMTAwIC0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKSArICclJztcblx0XHRcdFx0aWYgKGxhc3RQYWdlRmlsZUlEICE9PSAtMSAmJiBsYXN0UGFnZUZpbGVJRCA8IHNudi5zb3VyY2VGb2xkZXIuZmlsZUNvdW50KSB7XG5cdFx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlSUQgPSBsYXN0UGFnZUZpbGVJRCArIDE7XG5cdFx0XHRcdFx0ZGVmYXVsdFBhZ2UubWVkaWFGaWxlSUQgPSBtZWRpYUZpbGVJRDtcblx0XHRcdFx0XHRtZWRpYUZpbGVJRElucHV0LnZhbHVlID0gJycgKyBtZWRpYUZpbGVJRDtcblx0XHRcdFx0XHRpZiAobWVkaWFGaWxlSUQgPiAwKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBtZWRpYUZpbGUgPSA8U2luZ2xlTWVkaWFGaWxlPiBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIG1lZGlhRmlsZUlEKTtcblx0XHRcdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5wYWdlcy5wdXNoKGRlZmF1bHRQYWdlKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdH1cblx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzKHNudiwgbGluZXNEaXYpO1xuXHRcdG1lZGlhRmlsZUlESW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBjdXJyZW50UGFnZSA9IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XTtcblx0XHRcdGN1cnJlbnRQYWdlLm1lZGlhRmlsZUlEID0gcGFyc2VJbnQobWVkaWFGaWxlSURJbnB1dC52YWx1ZSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdGNvbnN0IG1lZGlhRmlsZSA9IDxTaW5nbGVNZWRpYUZpbGU+IGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgY3VycmVudFBhZ2UubWVkaWFGaWxlSUQpO1xuXHRcdFx0YXdhaXQgbWVkaWFGaWxlLkRpc3BsYXlNZWRpYU9ubHkobWVkaWFEaXYsIHNudik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBMb2FkRGlhbG9ndWVMaW5lcyhzbnY6IFNvdXJjZUFuZFZhdWx0LCBsaW5lc0RpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRsaW5lc0Rpdi5lbXB0eSgpO1xuXHRcdGNvbnN0IGV4aXN0aW5nTGluZXNEaXYgPSBsaW5lc0Rpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0XHRleGlzdGluZ0xpbmVzRGl2LnN0eWxlLm92ZXJmbG93WCA9ICdzY3JvbGwnO1xuXHRcdGNvbnN0IGZvbnRTaXplID0gJzE3LjVweCc7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IGk7XG5cdFx0XHRjb25zdCBjdXJyZW50TGluZSA9IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lc1tpXTtcblx0XHRcdGNvbnN0IHNwZWFrZXJJbmRleCA9IGN1cnJlbnRMaW5lLnNwZWFrZXJJbmRleDtcblx0XHRcdGNvbnN0IGN1cnJlbnRTcGVha2VyID0gdGhpcy5jaGFyYWN0ZXJzW3NwZWFrZXJJbmRleF07XG5cdFx0XHRjb25zdCBsaW5lRGl2ID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGxpbmVEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJy0nIH0gKTtcblx0XHRcdGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2ZlLXJlbW92ZS1idXR0b24nO1xuXHRcdFx0ZGVsZXRlQnV0dG9uLnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0XHRcdGRlbGV0ZUJ1dHRvbi5zdHlsZS50ZXh0T3JpZW50YXRpb24gPSAndXByaWdodCc7XG5cdFx0XHRkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzLnNwbGljZShjdXJyZW50SW5kZXgsIDEpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5Mb2FkRGlhbG9ndWVMaW5lcyhzbnYsIGxpbmVzRGl2KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGluZGV4RWxlbWVudCA9IGxpbmVEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICcnICsgIGN1cnJlbnRJbmRleCB9ICk7XG5cdFx0XHRpbmRleEVsZW1lbnQuc3R5bGUuY29sb3IgPSBjdXJyZW50U3BlYWtlci5jb2xvcjtcblx0XHRcdGluZGV4RWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gdGhpcy5mb250O1xuXHRcdFx0aW5kZXhFbGVtZW50LnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0XHRcdGluZGV4RWxlbWVudC5zdHlsZS50ZXh0T3JpZW50YXRpb24gPSAndXByaWdodCc7XG5cdFx0XHRjb25zdCBjaGFyRHJvcGRvd25EaXYgPSBsaW5lRGl2LmNyZWF0ZURpdigpO1xuXHRcdFx0Y2hhckRyb3Bkb3duRGl2LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcblx0XHRcdGNvbnN0IGNoYXJEcm9wZG93biA9IGNoYXJEcm9wZG93bkRpdi5jcmVhdGVFbCgnYnV0dG9uJyk7XG5cdFx0XHRjaGFyRHJvcGRvd24uc3R5bGUuaGVpZ2h0ID0gJ2ZpdC1jb250ZW50Jztcblx0XHRcdGNoYXJEcm9wZG93bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBzZWxlY3REaXYgPSBjaGFyRHJvcGRvd25EaXYuY3JlYXRlRGl2KCdoYm94Jyk7XG5cdFx0XHRcdHNlbGVjdERpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdFx0XHRcdHNlbGVjdERpdi5zdHlsZS50b3AgPSAnMCUnO1xuXHRcdFx0XHRzZWxlY3REaXYuc3R5bGUubGVmdCA9ICcwJSc7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENoYXJJbmRleCA9IGk7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENoYXIgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudENoYXJJbmRleF07XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudE9wdGlvbiA9IHNlbGVjdERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiBjdXJyZW50Q2hhci5uYW1lLCB2YWx1ZTogJycgKyBpIH0gKTtcblx0XHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLmNvbG9yID0gY3VycmVudENoYXIuY29sb3I7XG5cdFx0XHRcdFx0Y3VycmVudE9wdGlvbi5zdHlsZS5mb250RmFtaWx5ID0gdGhpcy5mb250O1xuXHRcdFx0XHRcdGN1cnJlbnRPcHRpb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VycmVudENoYXIuYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0XHRcdGN1cnJlbnRPcHRpb24uc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xuXHRcdFx0XHRcdGN1cnJlbnRPcHRpb24uc3R5bGUudGV4dE9yaWVudGF0aW9uID0gJ3VwcmlnaHQnO1xuXHRcdFx0XHRcdGN1cnJlbnRPcHRpb24uc3R5bGUuaGVpZ2h0ID0gJ2ZpdC1jb250ZW50Jztcblx0XHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLnpJbmRleCA9ICcyJztcblx0XHRcdFx0XHRjdXJyZW50T3B0aW9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubGluZXNbY3VycmVudEluZGV4XS5zcGVha2VySW5kZXggPSBjdXJyZW50Q2hhckluZGV4O1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3U3BlYWtlckNvbG9yID0gdGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRDaGFySW5kZXhdLmNvbG9yO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3QmFja2dyb3VuZENvbG9yID0gdGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRDaGFySW5kZXhdLmJhY2tncm91bmRDb2xvcjtcblx0XHRcdFx0XHRcdGNoYXJEcm9wZG93bi5zdHlsZS5jb2xvciA9IG5ld1NwZWFrZXJDb2xvcjtcblx0XHRcdFx0XHRcdGNoYXJEcm9wZG93bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBuZXdCYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRcdFx0XHRjaGFyRHJvcGRvd24udGV4dENvbnRlbnQgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudENoYXJJbmRleF0ubmFtZTtcblx0XHRcdFx0XHRcdGxpbmVJbnB1dC5zdHlsZS5jb2xvciA9IG5ld1NwZWFrZXJDb2xvcjtcblx0XHRcdFx0XHRcdGxpbmVJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBuZXdCYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRcdFx0XHRpbmRleEVsZW1lbnQuc3R5bGUuY29sb3IgPSBuZXdTcGVha2VyQ29sb3I7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdFx0XHRcdHNlbGVjdERpdi5yZW1vdmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNoYXJEcm9wZG93bi50ZXh0Q29udGVudCA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50TGluZS5zcGVha2VySW5kZXhdLm5hbWU7XG5cdFx0XHRjaGFyRHJvcGRvd24uc3R5bGUuY29sb3IgPSBjdXJyZW50U3BlYWtlci5jb2xvcjtcblx0XHRcdGNoYXJEcm9wZG93bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXJyZW50U3BlYWtlci5iYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRjaGFyRHJvcGRvd24uc3R5bGUuZm9udEZhbWlseSA9IHRoaXMuZm9udDtcblx0XHRcdGNoYXJEcm9wZG93bi5zdHlsZS53cml0aW5nTW9kZSA9ICd2ZXJ0aWNhbC1scic7XG5cdFx0XHRjaGFyRHJvcGRvd24uc3R5bGUudGV4dE9yaWVudGF0aW9uID0gJ3VwcmlnaHQnO1xuXHRcdFx0Y29uc3QgbGluZUlucHV0ID0gbGluZURpdi5jcmVhdGVFbCgndGV4dGFyZWEnKTtcblx0XHRcdGxpbmVJbnB1dC5zcGVsbGNoZWNrID0gZmFsc2U7XG5cdFx0XHRsaW5lSW5wdXQuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG5cdFx0XHRsaW5lSW5wdXQuc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xuXHRcdFx0bGluZUlucHV0LnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0XHRcdGxpbmVJbnB1dC5kZWZhdWx0VmFsdWUgPSBjdXJyZW50TGluZS5saW5lXG5cdFx0XHRsaW5lSW5wdXQuc3R5bGUuY29sb3IgPSBjdXJyZW50U3BlYWtlci5jb2xvcjtcblx0XHRcdGxpbmVJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXJyZW50U3BlYWtlci5iYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRsaW5lSW5wdXQuc3R5bGUuZm9udEZhbWlseSA9IHRoaXMuZm9udDtcblx0XHRcdGxpbmVJbnB1dC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuXHRcdFx0bGluZUlucHV0LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcblx0XHRcdGxpbmVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2N1cnJlbnRJbmRleF0ubGluZSA9IGxpbmVJbnB1dC52YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGV4aXN0aW5nTGluZXNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcblx0XHRhZGRCdXR0b24uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuXHRcdGFkZEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzLnB1c2gobmV3IERpYWxvZ3VlTGluZSgwLCAnJykpO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzKHNudiwgbGluZXNEaXYpO1xuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBQYWdlIHtcblx0bWVkaWFGaWxlSUQ6IG51bWJlcjtcblx0bGluZXM6IERpYWxvZ3VlTGluZVtdO1xuXHRtZWRpYVNpemVQZXJjZW50YWdlOiBudW1iZXI7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMubWVkaWFGaWxlSUQgPSAtMTtcblx0XHR0aGlzLmxpbmVzID0gW107XG5cdFx0dGhpcy5tZWRpYVNpemVQZXJjZW50YWdlID0gNTA7XG5cdH1cbn1cbmNsYXNzIERpYWxvZ3VlTGluZSB7XG5cdHNwZWFrZXJJbmRleDogbnVtYmVyO1xuXHRsaW5lOiBzdHJpbmc7XG5cdGNvbnN0cnVjdG9yKHNwZWFrZXJJbmRleDogbnVtYmVyLCBsaW5lOiBzdHJpbmcpIHtcblx0XHR0aGlzLnNwZWFrZXJJbmRleCA9IHNwZWFrZXJJbmRleDtcblx0XHR0aGlzLmxpbmUgPSBsaW5lO1xuXHR9XG59XG5jbGFzcyBDaGFyYWN0ZXIge1xuXHRuYW1lOiBzdHJpbmc7XG5cdGNvbG9yOiBzdHJpbmc7XG5cdGJhY2tncm91bmRDb2xvcjogc3RyaW5nO1xuXHRjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGNvbG9yOiBzdHJpbmcsIGJhY2tncm91bmRDb2xvcjogc3RyaW5nKSB7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLmNvbG9yID0gY29sb3I7XG5cdFx0dGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgQ0ZFRmlsZUhhbmRsZXIgfSBmcm9tIFwiLi9jZmUtZmlsZS1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IEZpbGVDcmVhdGlvbkRhdGEgfSBmcm9tIFwiLi9maWxlLWNyZWF0aW9uLWRhdGFcIjtcclxuaW1wb3J0IHsgUmVhbEZpbGUgfSBmcm9tIFwiLi9yZWFsLWZpbGVcIjtcclxuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5bGlzdCBleHRlbmRzIENGRUZpbGUge1xyXG5cdHByaXZhdGUgY3VycmVudFZpZGVvSW5kZXg6IG51bWJlcjtcclxuXHR2aWRlb0lEczogbnVtYmVyW107XHJcblxyXG5cdHByaXZhdGUgdmlkZW9PcmRlcjogc3RyaW5nO1xyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBnZXROZXh0VmlkZW9JREluT3JkZXIocGxheWxpc3Q6IFBsYXlsaXN0KSB7XHJcblx0XHRsZXQgbmV4dFZpZGVvSW5kZXggPSBwbGF5bGlzdC5jdXJyZW50VmlkZW9JbmRleCArIDE7XHJcblx0XHRpZiAobmV4dFZpZGVvSW5kZXggPj0gcGxheWxpc3QudmlkZW9JRHMubGVuZ3RoKSB7XHJcblx0XHRcdG5leHRWaWRlb0luZGV4ID0gMDtcclxuXHRcdH1cclxuXHRcdHJldHVybiBuZXh0VmlkZW9JbmRleDtcclxuXHR9XHJcblx0cHJpdmF0ZSBzdGF0aWMgZ2V0TmV4dFZpZGVvSURTaHVmZmxlZChwbGF5bGlzdDogUGxheWxpc3QpIHtcclxuXHRcdGxldCBuZXh0VmlkZW9JbmRleCA9IE1hdGgucmFuZG9tKCkgKiBwbGF5bGlzdC52aWRlb0lEcy5sZW5ndGg7XHJcblx0XHRuZXh0VmlkZW9JbmRleCA9IE1hdGguZmxvb3IobmV4dFZpZGVvSW5kZXgpO1xyXG5cdFx0cmV0dXJuIG5leHRWaWRlb0luZGV4O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgYXN5bmMgbG9hZE5leHRWaWRlbyhzb3VyY2VBbmRWYXVsdDogU291cmNlQW5kVmF1bHQsIHBsYXlsaXN0OiBQbGF5bGlzdCwgdmlkZW9FbGVtZW50OiBIVE1MVmlkZW9FbGVtZW50KSB7XHJcblx0XHRpZiAocGxheWxpc3QudmlkZW9PcmRlciA9PT0gJ3NodWZmbGVkJykge1xyXG5cdFx0XHRwbGF5bGlzdC5jdXJyZW50VmlkZW9JbmRleCA9IFBsYXlsaXN0LmdldE5leHRWaWRlb0lEU2h1ZmZsZWQocGxheWxpc3QpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cGxheWxpc3QuY3VycmVudFZpZGVvSW5kZXggPSBQbGF5bGlzdC5nZXROZXh0VmlkZW9JREluT3JkZXIocGxheWxpc3QpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgbmV4dFZpZGVvID0gPFJlYWxGaWxlPiAoYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc291cmNlQW5kVmF1bHQsIHBsYXlsaXN0LnZpZGVvSURzW3BsYXlsaXN0LmN1cnJlbnRWaWRlb0luZGV4XSkpO1xyXG5cclxuXHRcdHZpZGVvRWxlbWVudC5zcmMgPSBhd2FpdCBuZXh0VmlkZW8uZ2V0U3JjKHNvdXJjZUFuZFZhdWx0KTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBvdmVycmlkZSBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YTogRmlsZUNyZWF0aW9uRGF0YSk6IFByb21pc2U8UGxheWxpc3Q+IHtcclxuXHRcdGNvbnN0IG5ld1BsYXlsaXN0RmlsZSA9IDxQbGF5bGlzdD4gKGF3YWl0IHN1cGVyLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhKSk7XHJcblx0XHRuZXdQbGF5bGlzdEZpbGUudmlkZW9JRHMgPSBbXTtcclxuXHRcdHJldHVybiBuZXdQbGF5bGlzdEZpbGU7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGF3YWl0IHN1cGVyLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cdFx0dGhpcy5jdXJyZW50VmlkZW9JbmRleCA9IDA7XHJcblx0XHRjb25zdCB2aWRlb0Rpc3BsYXlDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdjZmUtZGlzcGxheS12aWRlbycpO1xyXG5cdFx0Y29uc3QgdmlkZW9FbGVtZW50ID0gdmlkZW9EaXNwbGF5Q29udGFpbmVyLmNyZWF0ZUVsKCd2aWRlbycpO1xyXG5cdFx0Y29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdGNvbnN0IGhpZGVCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdoaWRlIHZpZGVvJyB9ICk7XHJcblx0XHRoaWRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdGlmIChoaWRlQnV0dG9uLnRleHRDb250ZW50ID09PSAnaGlkZSB2aWRlbycpIHtcclxuXHRcdFx0XHRoaWRlQnV0dG9uLnRleHRDb250ZW50ID0gJ3Nob3cgdmlkZW8nO1xyXG5cdFx0XHRcdHZpZGVvRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGhpZGVCdXR0b24udGV4dENvbnRlbnQgPSAnaGlkZSB2aWRlbyc7XHJcblx0XHRcdFx0dmlkZW9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNvbnN0IHNodWZmbGVCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdzaHVmZmxlJyB9ICk7XHJcblx0XHR0aGlzLnZpZGVvT3JkZXIgPSAnaW4gb3JkZXInO1xyXG5cdFx0c2h1ZmZsZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHRpZiAoc2h1ZmZsZUJ1dHRvbi50ZXh0Q29udGVudCA9PT0gJ3NodWZmbGUnKSB7XHJcblx0XHRcdFx0c2h1ZmZsZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdnbyBpbiBvcmRlcic7XHJcblx0XHRcdFx0dGhpcy52aWRlb09yZGVyID0gJ3NodWZmbGVkJztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzaHVmZmxlQnV0dG9uLnRleHRDb250ZW50ID0gJ3NodWZmbGUnO1xyXG5cdFx0XHRcdHRoaXMudmlkZW9PcmRlciA9ICdpbiBvcmRlcic7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNvbnN0IG5leHRCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICduZXh0IHZpZGVvJyB9ICk7XHJcblx0XHRuZXh0QnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGF3YWl0IFBsYXlsaXN0LmxvYWROZXh0VmlkZW8oc252LCB0aGlzLCB2aWRlb0VsZW1lbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGZpcnN0VmlkZW8gPSA8UmVhbEZpbGU+IChhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIHRoaXMudmlkZW9JRHNbdGhpcy5jdXJyZW50VmlkZW9JbmRleF0pKTtcclxuXHRcdFx0dmlkZW9FbGVtZW50LnNyYyA9IGF3YWl0IGZpcnN0VmlkZW8uZ2V0U3JjKHNudik7XHJcblx0XHRcdHZpZGVvRWxlbWVudC5hdXRvcGxheSA9IHRydWU7XHJcblx0XHRcdHZpZGVvRWxlbWVudC5jb250cm9scyA9IHRydWU7XHJcblx0XHRcdHZpZGVvRWxlbWVudC5vbnRpbWV1cGRhdGUgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHZpZGVvRWxlbWVudC5lbmRlZCkge1xyXG5cdFx0XHRcdFx0YXdhaXQgUGxheWxpc3QubG9hZE5leHRWaWRlbyhzbnYsIHRoaXMsIHZpZGVvRWxlbWVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdDaGFuZ2UgZmlsZXMnIH0gKTtcclxuXHRcdFx0bGV0IGNvdW50ID0gMDtcclxuXHRcdFx0Y29uc3QgbWVkaWFJRElucHV0RGl2ID0gY29udGFpbmVyLmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0XHRjb25zdCBuZXdGaWxlQnV0dG9uID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdBZGQgRmlsZScgfSApO1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmlkZW9JRHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBjb3VudDtcclxuXHRcdFx0XHRjb3VudCsrO1xyXG5cdFx0XHRcdGNvbnN0IG1lZGlhSUREaXYgPSBtZWRpYUlESW5wdXREaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRcdFx0Y29uc3QgaWRJbnB1dCA9IG1lZGlhSUREaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArIHRoaXMudmlkZW9JRHNbY3VycmVudEluZGV4XSB9ICk7XHJcblx0XHRcdFx0Y29uc3QgZGVsZXRlQnV0dG9uID0gbWVkaWFJRERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnZGVsZXRlJyB9ICk7XHJcblx0XHRcdFx0ZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRtZWRpYUlERGl2LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0dGhpcy52aWRlb0lEcy5zcGxpY2UoY3VycmVudEluZGV4LCAxKTtcclxuXHRcdFx0XHRcdHRoaXMuRGlzcGxheShzbnYsIGNvbnRhaW5lcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlkSW5wdXQub25jaGFuZ2UgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnZpZGVvSURzW2N1cnJlbnRJbmRleF0gPSBwYXJzZUludChpZElucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRcdHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRuZXdGaWxlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gY291bnQ7XHJcblx0XHRcdFx0Y291bnQrKztcclxuXHRcdFx0XHRjb25zdCBtZWRpYUlERGl2ID0gbWVkaWFJRElucHV0RGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0XHRcdGNvbnN0IGlkSW5wdXQgPSBtZWRpYUlERGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnIH0gKTtcclxuXHRcdFx0XHRjb25zdCBkZWxldGVCdXR0b24gPSBtZWRpYUlERGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdkZWxldGUnIH0gKTtcclxuXHRcdFx0XHRkZWxldGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0XHRcdG1lZGlhSUREaXYucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR0aGlzLnZpZGVvSURzLnNwbGljZShjdXJyZW50SW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0dGhpcy5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWRJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudmlkZW9JRHNbY3VycmVudEluZGV4XSA9IHBhcnNlSW50KGlkSW5wdXQudmFsdWUpO1xyXG5cdFx0XHRcdFx0dGhpcy5TYXZlKHNudik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDRkVGaWxlSGFuZGxlciB9IGZyb20gXCIuL2NmZS1maWxlLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgRmlsZUNyZWF0aW9uRGF0YSB9IGZyb20gXCIuL2ZpbGUtY3JlYXRpb24tZGF0YVwiO1xyXG5pbXBvcnQgeyBSZWFsRmlsZSB9IGZyb20gXCIuL3JlYWwtZmlsZVwiO1xyXG5pbXBvcnQgeyBTaW5nbGVNZWRpYUZpbGUgfSBmcm9tIFwiLi9zaW5nbGUtbWVkaWEtZmlsZVwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZhcmlhbnRNZWRpYUZpbGUgZXh0ZW5kcyBSZWFsRmlsZSB7XHJcblx0ZmlsZVR5cGUgPSAnVmFyaWFudCBNZWRpYSBGaWxlJztcclxuXHJcblx0cHJpdmF0ZSB2YXJpYW50SURzOiBudW1iZXJbXTtcclxuXHJcblx0YXN5bmMgZ2V0U3JjKHNudjogU291cmNlQW5kVmF1bHQsIGluZGV4OiBudW1iZXIgfCBudWxsID0gbnVsbCk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0XHRpZiAoaW5kZXggPT09IG51bGwpIHtcclxuXHRcdFx0aW5kZXggPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpKSAqIHRoaXMudmFyaWFudElEcy5sZW5ndGgpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgY29udGFpbmVkTWVkaWEgPSA8U2luZ2xlTWVkaWFGaWxlPiBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIHRoaXMudmFyaWFudElEc1tpbmRleF0pO1xyXG5cdFx0cmV0dXJuIGF3YWl0IGNvbnRhaW5lZE1lZGlhLmdldFNyYyhzbnYpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhOiBGaWxlQ3JlYXRpb25EYXRhKTogUHJvbWlzZTxWYXJpYW50TWVkaWFGaWxlPiB7XHJcblx0XHRjb25zdCBuZXdNZWRpYUZpbGUgPSA8VmFyaWFudE1lZGlhRmlsZT4gKGF3YWl0IHN1cGVyLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhKSk7XHJcblx0XHRuZXdNZWRpYUZpbGUudmFyaWFudElEcyA9IFtdO1xyXG5cdFx0cmV0dXJuIG5ld01lZGlhRmlsZTtcclxuXHR9XHJcblxyXG5cdG92ZXJyaWRlIGFzeW5jIERpc3BsYXkoc252OiBTb3VyY2VBbmRWYXVsdCwgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0YXdhaXQgc3VwZXIuRGlzcGxheShzbnYsIGNvbnRhaW5lcik7XHJcblxyXG5cdFx0Y29uc3QgaW1hZ2VEaXNwbGF5Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0aW1hZ2VEaXNwbGF5Q29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ2hhbmdlIGZpbGVzJyB9ICk7XHJcblx0XHRjb25zdCBtZWRpYUlESW5wdXREaXYgPSBpbWFnZURpc3BsYXlDb250YWluZXIuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblx0XHRjb25zdCBuZXdGaWxlQnV0dG9uID0gaW1hZ2VEaXNwbGF5Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdBZGQgRmlsZScgfSApO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZhcmlhbnRJRHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gaTtcclxuXHRcdFx0Y29uc3QgbWVkaWFJRERpdiA9IG1lZGlhSURJbnB1dERpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdFx0Y29uc3QgaWRJbnB1dCA9IG1lZGlhSUREaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArIHRoaXMudmFyaWFudElEc1tjdXJyZW50SW5kZXhdIH0gKTtcclxuXHRcdFx0Y29uc3QgZGVsZXRlQnV0dG9uID0gbWVkaWFJRERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnZGVsZXRlJyB9ICk7XHJcblx0XHRcdGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2ZlLXJlbW92ZS1idXR0b24nO1xyXG5cdFx0XHRkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRtZWRpYUlERGl2LnJlbW92ZSgpO1xyXG5cdFx0XHRcdHRoaXMudmFyaWFudElEcy5zcGxpY2UoY3VycmVudEluZGV4LCAxKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlkSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy52YXJpYW50SURzW2N1cnJlbnRJbmRleF0gPSBwYXJzZUludChpZElucHV0LnZhbHVlKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRuZXdGaWxlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMudmFyaWFudElEcy5wdXNoKC0xKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHRcdGF3YWl0IHRoaXMuRGlzcGxheShzbnYsIGNvbnRhaW5lcik7XHJcblx0XHR9XHJcblx0XHRjb25zdCBtZWRpYURpdiA9IGltYWdlRGlzcGxheUNvbnRhaW5lci5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xyXG5cdH1cclxuXHRhc3luYyBEaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2OiBIVE1MRGl2RWxlbWVudCwgc252OiBTb3VyY2VBbmRWYXVsdCwgaW5kZXggPSAtMSkge1xyXG5cdFx0Ly8gVGhpcyBjYWxsIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBjb250YWluZWRNZWRpYS5EaXNwbGF5TWVkaWFPbmx5KCkgY2FsbHMgaXQgYW55d2F5XHJcblx0XHQvLyBhd2FpdCBzdXBlci5EaXNwbGF5TWVkaWFPbmx5XHJcblx0XHRpZiAoaW5kZXggPT09IC0xKSB7XHJcblx0XHRcdGluZGV4ID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSkgKiB0aGlzLnZhcmlhbnRJRHMubGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGNvbnRhaW5lZE1lZGlhID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCB0aGlzLnZhcmlhbnRJRHNbaW5kZXhdKTtcclxuXHRcdGF3YWl0IGNvbnRhaW5lZE1lZGlhLkRpc3BsYXlNZWRpYU9ubHkobWVkaWFEaXYsIHNudik7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgRmlsZUNyZWF0aW9uRGF0YSB9IGZyb20gXCIuL2ZpbGUtY3JlYXRpb24tZGF0YVwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5pbXBvcnQgeyBTb3VyY2VGb2xkZXIgfSBmcm9tIFwiLi9zb3VyY2UtZm9sZGVyXCI7XHJcblxyXG4vKipcclxuICogQSBjaGlsZCBjbGFzcyBvZiB0aGUgQ0ZFRmlsZSBjbGFzcy4gUmVwcmVzZW50cyBhIGZvbGRlciB3aXRoaW4gdGhlIFNvdXJjZUZvbGRlci5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTb3VyY2VGb2xkZXJTaG9ydGN1dCBleHRlbmRzIENGRUZpbGUge1xyXG5cdC8qKlxyXG5cdCAqIFRoZSBJRHMgb2YgZmlsZXMgY29udGFpbmVkIGluIHRoaXMgZm9sZGVyXHJcblx0ICovXHJcblx0cGF0aFRvT3RoZXJTb3VyY2U6IHN0cmluZztcclxuXHJcblx0LyoqXHJcblx0ICogQG92ZXJyaWRlIEZvbGRlciBsYXllcjpcclxuXHQgKiBcclxuXHQgKiBpbml0aWFsaXplcyB0aGUgY29udGFpbmVkIGZpbGUgaWRzIGFycmF5IGZvciB0aGUgZm9sZGVyIG9iamVjdFxyXG5cdCAqL1xyXG5cdHN0YXRpYyBvdmVycmlkZSBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YTogRmlsZUNyZWF0aW9uRGF0YSk6IFByb21pc2U8U291cmNlRm9sZGVyU2hvcnRjdXQ+IHtcclxuXHRcdGNvbnN0IHVuZmluaXNoZWRGb2xkZXIgPSA8U291cmNlRm9sZGVyU2hvcnRjdXQ+IChhd2FpdCBzdXBlci5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YSkpO1xyXG5cdFx0dW5maW5pc2hlZEZvbGRlci5wYXRoVG9PdGhlclNvdXJjZSA9ICcnO1xyXG5cdFx0cmV0dXJuIHVuZmluaXNoZWRGb2xkZXI7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRhd2FpdCBzdXBlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XHJcblx0XHRjb25zdCBpbnB1dERpdiA9IG1haW5EaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblx0XHRpbnB1dERpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1BhdGggdG8gT3RoZXIgU291cmNlIEZvbGRlcicgfSApO1xyXG5cdFx0Y29uc3QgcGF0aElucHV0ID0gaW5wdXREaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSApO1xyXG5cdFx0Y29uc3QgZ29CdXR0b24gPSBpbnB1dERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR28nIH0gKTtcclxuXHRcdHBhdGhJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0dGhpcy5wYXRoVG9PdGhlclNvdXJjZSA9IHBhdGhJbnB1dC52YWx1ZTtcclxuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHR9XHJcblx0XHRnb0J1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBvdGhlclNvdXJjZSA9IGF3YWl0IFNvdXJjZUZvbGRlci5DcmVhdGVPckxvYWRTb3VyY2VGb2xkZXIodGhpcy5wYXRoVG9PdGhlclNvdXJjZSwgc252LnZhdWx0KTtcclxuXHRcdFx0b3RoZXJTb3VyY2UuRGlzcGxheShtYWluRGl2LCBzbnYudmF1bHQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHR9XHJcbiIsICJleHBvcnQgY2xhc3MgUGhvdG9MYW5nIHtcclxuXHRzdGF0aWMgRGlzcGxheShkaXY6IEhUTUxEaXZFbGVtZW50LCB0ZXh0ID0gJycsIGZvbnRTaXplID0gMTAsIG1vdmVTcGVlZHM6IG51bWJlcltdIHwgbnVsbCA9IG51bGwsIGR1cmF0aW9uczogbnVtYmVyW10gfCBudWxsID0gbnVsbCwgZG9Mb29wID0gZmFsc2UpOiBIVE1MRWxlbWVudCB7XHJcblx0XHRjb25zdCBsaW5lID0gbmV3IFBob3RvTGluZSh0ZXh0KTtcclxuXHRcdGlmICghbW92ZVNwZWVkcykge1xyXG5cdFx0XHRtb3ZlU3BlZWRzID0gWzEwMCwgMjUwLCA1MDBdO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFkdXJhdGlvbnMpIHtcclxuXHRcdFx0ZHVyYXRpb25zID0gWzAsIDUwMF07XHJcblx0XHR9XHJcblx0XHRjb25zdCBkaXNwbGF5RGl2ID0gZGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0bGluZS5TcGVhayhkaXNwbGF5RGl2LCBmb250U2l6ZSwgbW92ZVNwZWVkcywgZHVyYXRpb25zLCBkb0xvb3ApO1xyXG5cdFx0cmV0dXJuIGRpc3BsYXlEaXY7XHJcblx0fVxyXG5cdHN0YXRpYyBDcmVhdGVUZXh0QXJlYShkaXY6IEhUTUxEaXZFbGVtZW50LCBleGlzdGluZ1RleHQgPSAnJywgZm9udFNpemUgPSAxNy41KTogSFRNTFRleHRBcmVhRWxlbWVudCB7XHJcblx0XHRjb25zdCB0ZXh0QXJlYSA9IGRpdi5jcmVhdGVFbCgndGV4dGFyZWEnLCB7IHRleHQ6IGV4aXN0aW5nVGV4dCB9ICk7XHJcblx0XHR0ZXh0QXJlYS5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgJ3B4JztcclxuXHRcdHRleHRBcmVhLnNwZWxsY2hlY2sgPSBmYWxzZTtcclxuXHRcdHJldHVybiB0ZXh0QXJlYTtcclxuXHR9XHJcblx0c3RhdGljIENyZWF0ZVRleHRJbnB1dChkaXY6IEhUTUxEaXZFbGVtZW50LCBleGlzdGluZ1RleHQgPSAnJywgZm9udFNpemUgPSAxNy41KTogSFRNTElucHV0RWxlbWVudCB7XHJcblx0XHRjb25zdCB0ZXh0SW5wdXQgPSBkaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiBleGlzdGluZ1RleHQgfSApO1xyXG5cdFx0dGV4dElucHV0LnN0eWxlLmZvbnRTaXplID0gZm9udFNpemUgKyAncHgnO1xyXG5cdFx0dGV4dElucHV0LnNwZWxsY2hlY2sgPSBmYWxzZTtcclxuXHRcdHJldHVybiB0ZXh0SW5wdXQ7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGhvdG9MaW5lIHtcclxuXHRnbHlwaHM6IFBob3RvR2x5cGhbXTtcclxuXHRjb25zdHJ1Y3Rvcih0ZXh0Q29udGVudCA9ICcnKSB7XHJcblx0XHR0aGlzLmdseXBocyA9IFtdO1xyXG5cclxuXHRcdGNvbnN0IHRleHRBcnJheSA9IHRleHRDb250ZW50LnNwbGl0KFwiICAgXCIpLmZpbHRlcigoYzogc3RyaW5nKSA9PiBjICE9PSBcIlwiKTtcclxuXHJcblx0XHRsZXQgZG9TcGFjZSA9IGZhbHNlO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IG5ld0dseXBoID0gbmV3IFBob3RvR2x5cGgoKTtcclxuXHRcdFx0Y29uc3QgZ2x5cGhUZXh0ID0gdGV4dEFycmF5W2ldO1xyXG5cclxuXHRcdFx0aWYgKGdseXBoVGV4dCA9PT0gJ3x8fCcpIHtcclxuXHRcdFx0XHRuZXdHbHlwaC5odWUgPSAwO1xyXG5cdFx0XHRcdG5ld0dseXBoLnNhdHVyYXRpb24gPSAwO1xyXG5cdFx0XHRcdG5ld0dseXBoLnZhbHVlID0gMDtcclxuXHRcdFx0XHRuZXdHbHlwaC5vcGFjaXR5ID0gMDtcclxuXHRcdFx0XHRuZXdHbHlwaC5tb3ZlU3BlZWQgPSAwO1xyXG5cdFx0XHRcdG5ld0dseXBoLmR1cmF0aW9uID0gMDtcclxuXHRcdFx0XHRuZXdHbHlwaC54ID0gdGhpcy5nbHlwaHNbdGhpcy5nbHlwaHMubGVuZ3RoIC0gMV0ueDtcclxuXHRcdFx0XHRuZXdHbHlwaC55ID0gdGhpcy5nbHlwaHNbdGhpcy5nbHlwaHMubGVuZ3RoIC0gMV0ueTtcclxuXHRcdFx0XHRkb1NwYWNlID0gdHJ1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsZXQgaiA9IDA7XHJcblx0XHRcdFx0bGV0IHNraXBOZXh0ID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdC8vIG1vdmUgc3BlZWRcclxuXHRcdFx0XHRzd2l0Y2ggKGdseXBoVGV4dFtqXSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAnLic6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLm1vdmVTcGVlZCA9IDA7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnLSc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLm1vdmVTcGVlZCA9IDE7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnPSc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLm1vdmVTcGVlZCA9IDI7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRqKys7XHJcblxyXG5cdFx0XHRcdC8vIGR1cmF0aW9uXHJcblx0XHRcdFx0c3dpdGNoIChnbHlwaFRleHRbal0pIHtcclxuXHRcdFx0XHRcdGNhc2UgJy4nOlxyXG5cdFx0XHRcdFx0XHRuZXdHbHlwaC5kdXJhdGlvbiA9IDA7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnLSc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLmR1cmF0aW9uID0gMTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGorKztcclxuXHJcblx0XHRcdFx0Ly8gc2hhcGVcclxuXHRcdFx0XHRuZXdHbHlwaC5zaGFwZSA9IGdseXBoVGV4dFtqXTtcclxuXHRcdFx0XHRqKys7XHJcblxyXG5cdFx0XHRcdC8vIGh1ZVxyXG5cdFx0XHRcdGxldCBodWUxID0gMDtcclxuXHRcdFx0XHRzd2l0Y2ggKGdseXBoVGV4dFtqXSkge1xyXG5cdFx0XHRcdFx0Y2FzZSAncic6XHJcblx0XHRcdFx0XHRcdGh1ZTEgPSAwO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ28nOlxyXG5cdFx0XHRcdFx0XHRodWUxID0gNDA7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAneSc6XHJcblx0XHRcdFx0XHRcdGh1ZTEgPSA2MDtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdnJzpcclxuXHRcdFx0XHRcdFx0aHVlMSA9IDEyMDtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdjJzpcclxuXHRcdFx0XHRcdFx0aHVlMSA9IDE4MDtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdiJzpcclxuXHRcdFx0XHRcdFx0aHVlMSA9IDI0MDtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICdwJzpcclxuXHRcdFx0XHRcdFx0aHVlMSA9IDI3MDtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICcuJzpcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGguaHVlID0gMDtcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGguc2F0dXJhdGlvbiA9IDA7XHJcblx0XHRcdFx0XHRcdHNraXBOZXh0ID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGorKztcclxuXHRcdFx0XHRpZiAoIXNraXBOZXh0KSB7XHJcblx0XHRcdFx0XHRsZXQgaHVlMiA9IDA7XHJcblx0XHRcdFx0XHRzd2l0Y2ggKGdseXBoVGV4dFtqXSkge1xyXG5cdFx0XHRcdFx0XHRjYXNlICdyJzpcclxuXHRcdFx0XHRcdFx0XHRodWUyID0gMDtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSAnbyc6XHJcblx0XHRcdFx0XHRcdFx0aHVlMiA9IDQwO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlICd5JzpcclxuXHRcdFx0XHRcdFx0XHRodWUyID0gNjA7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ2cnOlxyXG5cdFx0XHRcdFx0XHRcdGh1ZTIgPSAxMjA7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ2MnOlxyXG5cdFx0XHRcdFx0XHRcdGh1ZTIgPSAxODA7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ2InOlxyXG5cdFx0XHRcdFx0XHRcdGh1ZTIgPSAyNDA7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgJ3AnOlxyXG5cdFx0XHRcdFx0XHRcdGh1ZTIgPSAyNzA7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0bmV3R2x5cGguaHVlID0gaHVlMTtcclxuXHRcdFx0XHRcdFx0XHRza2lwTmV4dCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoIXNraXBOZXh0KSB7XHJcblx0XHRcdFx0XHRcdGlmIChodWUxID09PSAwICYmIGh1ZTIgPT09IDI3MCB8fCBodWUxID09PSAyNzAgJiYgaHVlMiA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld0dseXBoLmh1ZSA9IDMxNTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRuZXdHbHlwaC5odWUgPSAoaHVlMSArIGh1ZTIpIC8gMjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRqKys7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNraXBOZXh0ID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdC8vIHNhdHVyYXRpb25cclxuXHRcdFx0XHRjb25zdCBzYXR1cmF0aW9uVGV4dCA9IGdseXBoVGV4dFtqXTtcclxuXHRcdFx0XHRzd2l0Y2ggKHNhdHVyYXRpb25UZXh0KSB7XHJcblx0XHRcdFx0XHRjYXNlICcwJzpcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGguc2F0dXJhdGlvbiA9IDA7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnMSc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLnNhdHVyYXRpb24gPSAwLjI1O1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJzInOlxyXG5cdFx0XHRcdFx0XHRuZXdHbHlwaC5zYXR1cmF0aW9uID0gMC41O1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJzMnOlxyXG5cdFx0XHRcdFx0XHRuZXdHbHlwaC5zYXR1cmF0aW9uID0gMC43NTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICc0JzpcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGguc2F0dXJhdGlvbiA9IDE7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRqKys7XHJcblxyXG5cdFx0XHRcdC8vIHZhbHVlXHJcblx0XHRcdFx0Y29uc3QgdmFsdWVUZXh0ID0gZ2x5cGhUZXh0W2pdO1xyXG5cdFx0XHRcdHN3aXRjaCAodmFsdWVUZXh0KSB7XHJcblx0XHRcdFx0XHRjYXNlICcwJzpcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGgudmFsdWUgPSAwO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJzEnOlxyXG5cdFx0XHRcdFx0XHRuZXdHbHlwaC52YWx1ZSA9IDAuMTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlICcyJzpcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGgudmFsdWUgPSAwLjI7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnMyc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLnZhbHVlID0gMC41O1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJzQnOlxyXG5cdFx0XHRcdFx0XHRuZXdHbHlwaC52YWx1ZSA9IDE7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRqKys7XHJcblxyXG5cdFx0XHRcdC8vIG9wYWNpdHlcclxuXHRcdFx0XHRjb25zdCBvcGFjaXR5VGV4dCA9IGdseXBoVGV4dFtqXTtcclxuXHRcdFx0XHRzd2l0Y2ggKG9wYWNpdHlUZXh0KSB7XHJcblx0XHRcdFx0XHRjYXNlICcuJzpcclxuXHRcdFx0XHRcdFx0bmV3R2x5cGgub3BhY2l0eSA9IDA7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnLSc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLm9wYWNpdHkgPSAwLjU7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0Y2FzZSAnPSc6XHJcblx0XHRcdFx0XHRcdG5ld0dseXBoLm9wYWNpdHkgPSAxO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aisrO1xyXG5cclxuXHRcdFx0XHRjb25zdCBsb2NhdGlvbkluZm8gPSBnbHlwaFRleHQuc3Vic3RyaW5nKGopO1xyXG5cclxuXHRcdFx0XHQvLyBsb2NhdGlvblxyXG5cdFx0XHRcdC8vIHhcclxuXHRcdFx0XHRpZiAobG9jYXRpb25JbmZvLmNvbnRhaW5zKCc8JykpIHtcclxuXHRcdFx0XHRcdG5ld0dseXBoLnggPSAwO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAobG9jYXRpb25JbmZvLmNvbnRhaW5zKCc+JykpIHtcclxuXHRcdFx0XHRcdG5ld0dseXBoLnggPSAyO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRuZXdHbHlwaC54ID0gMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8geVxyXG5cdFx0XHRcdGlmIChsb2NhdGlvbkluZm8uY29udGFpbnMoJ3YnKSkge1xyXG5cdFx0XHRcdFx0bmV3R2x5cGgueSA9IDA7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChsb2NhdGlvbkluZm8uY29udGFpbnMoJ14nKSkge1xyXG5cdFx0XHRcdFx0bmV3R2x5cGgueSA9IDI7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdG5ld0dseXBoLnkgPSAxO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKGRvU3BhY2UpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGVtcHR5R2x5cGggPSBuZXcgUGhvdG9HbHlwaCgpO1xyXG5cdFx0XHRcdFx0ZW1wdHlHbHlwaC5odWUgPSAwO1xyXG5cdFx0XHRcdFx0ZW1wdHlHbHlwaC5zYXR1cmF0aW9uID0gMDtcclxuXHRcdFx0XHRcdGVtcHR5R2x5cGgudmFsdWUgPSAwO1xyXG5cdFx0XHRcdFx0ZW1wdHlHbHlwaC5vcGFjaXR5ID0gMDtcclxuXHRcdFx0XHRcdGVtcHR5R2x5cGgubW92ZVNwZWVkID0gMDtcclxuXHRcdFx0XHRcdGVtcHR5R2x5cGguZHVyYXRpb24gPSAwO1xyXG5cdFx0XHRcdFx0ZW1wdHlHbHlwaC54ID0gbmV3R2x5cGgueDtcclxuXHRcdFx0XHRcdGVtcHR5R2x5cGgueSA9IG5ld0dseXBoLnk7XHJcblx0XHRcdFx0XHRkb1NwYWNlID0gZmFsc2U7XHJcblx0XHRcdFx0XHR0aGlzLmdseXBocy5wdXNoKGVtcHR5R2x5cGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5nbHlwaHMucHVzaChuZXdHbHlwaCk7XHJcblx0XHR9XHJcblx0XHRpZiAoZG9TcGFjZSkge1xyXG5cdFx0XHRjb25zdCBlbXB0eUdseXBoID0gbmV3IFBob3RvR2x5cGgoKTtcclxuXHRcdFx0ZW1wdHlHbHlwaC5odWUgPSAwO1xyXG5cdFx0XHRlbXB0eUdseXBoLnNhdHVyYXRpb24gPSAwO1xyXG5cdFx0XHRlbXB0eUdseXBoLnZhbHVlID0gMDtcclxuXHRcdFx0ZW1wdHlHbHlwaC5vcGFjaXR5ID0gMDtcclxuXHRcdFx0ZW1wdHlHbHlwaC5tb3ZlU3BlZWQgPSAwO1xyXG5cdFx0XHRlbXB0eUdseXBoLmR1cmF0aW9uID0gMDtcclxuXHRcdFx0ZW1wdHlHbHlwaC54ID0gdGhpcy5nbHlwaHNbMF0ueDtcclxuXHRcdFx0ZW1wdHlHbHlwaC55ID0gdGhpcy5nbHlwaHNbMF0ueTtcclxuXHRcdFx0ZG9TcGFjZSA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmdseXBocy5wdXNoKGVtcHR5R2x5cGgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgU3BlYWsoZGl2OiBIVE1MRGl2RWxlbWVudCwgdGV4dFNpemU6IG51bWJlciwgbW92ZVNwZWVkczogbnVtYmVyW10sIGR1cmF0aW9uczogbnVtYmVyW10sIGRvTG9vcCA9IGZhbHNlKSB7XHJcblx0XHRkaXYuc3R5bGUuZm9udFNpemUgPSB0ZXh0U2l6ZSArICdweCc7XHJcblx0XHRkaXYuc3R5bGUuZm9udEZhbWlseSA9ICdQaG90b2xhbmcnO1xyXG5cdFx0ZGl2LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuXHRcdGRpdi5zdHlsZS5oZWlnaHQgPSAodGV4dFNpemUgKiAzLjI1KSArICdweCc7XHJcblx0XHRkaXYuc3R5bGUud2lkdGggPSAodGV4dFNpemUgKiAzLjI1KSArICdweCc7XHJcblx0XHRjb25zdCB0ZXh0RGl2ID0gZGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0dGV4dERpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblx0XHR0ZXh0RGl2LnN0eWxlLmJvdHRvbSA9IHRleHRTaXplICsgJ3B4JztcclxuXHRcdHRleHREaXYuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJ2JvdHRvbSwgbGVmdCwgY29sb3InO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdseXBocy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBwaG90b0dseXBoID0gdGhpcy5nbHlwaHNbaV07XHJcblxyXG5cdFx0XHR0ZXh0RGl2LnRleHRDb250ZW50ID0gcGhvdG9HbHlwaC5zaGFwZTtcclxuXHRcdFx0dGV4dERpdi5zdHlsZS5sZWZ0ID0gKHBob3RvR2x5cGgueCAqIHRleHRTaXplKSArICdweCc7XHJcblx0XHRcdHRleHREaXYuc3R5bGUuYm90dG9tID0gKHBob3RvR2x5cGgueSAqIHRleHRTaXplKSArICdweCc7XHJcblx0XHRcdHRleHREaXYuc3R5bGUuY29sb3IgPSBwaG90b0dseXBoLmNvbG9yO1xyXG5cclxuXHRcdFx0aWYgKGRvTG9vcCAmJiBpID09PSB0aGlzLmdseXBocy5sZW5ndGggLSAxKSB7XHJcblx0XHRcdFx0aSA9IC0xO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRleHREaXYuc3R5bGUudHJhbnNpdGlvbiA9IG1vdmVTcGVlZHNbcGhvdG9HbHlwaC5tb3ZlU3BlZWRdICsgJ21zJztcclxuXHRcdFx0YXdhaXQgc2xlZXAobW92ZVNwZWVkc1twaG90b0dseXBoLm1vdmVTcGVlZF0gKyBkdXJhdGlvbnNbcGhvdG9HbHlwaC5kdXJhdGlvbl0pO1xyXG5cdFx0fVxyXG5cdFx0ZGl2LnJlbW92ZSgpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgRGlzcGxheVN0YXRpYyhkaXY6IEhUTUxEaXZFbGVtZW50LCB0ZXh0U2l6ZTogbnVtYmVyKSB7XHJcblx0XHRjb25zdCBsaW5lRGl2ID0gZGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0bGluZURpdi5zdHlsZS5nYXAgPSAnJyArICh0ZXh0U2l6ZSAqIDMuMjUpICsgJ3B4KSc7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHRoaXMuZ2x5cGhzW2ldID0gT2JqZWN0LmFzc2lnbihuZXcgUGhvdG9HbHlwaCgpLCB0aGlzLmdseXBoc1tpXSk7XHJcblx0XHRcdHRoaXMuZ2x5cGhzW2ldLkRpc3BsYXlTdGF0aWMobGluZURpdi5jcmVhdGVEaXYoKSwgdGV4dFNpemUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQaG90b0dseXBoIHtcclxuXHRzaGFwZTogc3RyaW5nO1xyXG5cdHg6IG51bWJlcjtcclxuXHR5OiBudW1iZXI7XHJcblx0aHVlOiBudW1iZXI7XHJcblx0c2F0dXJhdGlvbjogbnVtYmVyO1xyXG5cdHZhbHVlOiBudW1iZXI7XHJcblx0b3BhY2l0eTogbnVtYmVyO1xyXG5cdG1vdmVTcGVlZDogbnVtYmVyO1xyXG5cdGR1cmF0aW9uOiBudW1iZXI7XHJcblxyXG5cdGdldCBjb2xvcigpIHtcclxuXHRcdC8vIGhzdiB2YWx1ZXMgYXJlIGluIFswLCAxXVxyXG5cdFx0bGV0IGxpZ2h0bmVzcyA9ICgyIC0gdGhpcy5zYXR1cmF0aW9uKSAqIHRoaXMudmFsdWUgLyAyO1xyXG5cdFx0bGV0IG5ld1MgPSB0aGlzLnNhdHVyYXRpb24gKiB0aGlzLnZhbHVlIC8gKGxpZ2h0bmVzcyA8IDEgPyBsaWdodG5lc3MgKiAyIDogMiAtIGxpZ2h0bmVzcyAqIDIpO1xyXG5cclxuXHRcdC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBsaWdodG5lc3MgaXMgMCBvciAxLCB3aGljaCByZXN1bHRzIGluIHNhdHVyYXRpb24gYmVpbmcgMFxyXG5cdFx0aWYgKGxpZ2h0bmVzcyA9PT0gMCB8fCBsaWdodG5lc3MgPT09IDEpIHtcclxuXHRcdFx0bmV3UyA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0bGlnaHRuZXNzICo9IDEwMDtcclxuXHRcdG5ld1MgKj0gMTAwO1xyXG5cclxuXHRcdHJldHVybiAnaHNsYSgnICsgdGhpcy5odWUgKyAnLCcgKyBuZXdTICsgJyUsJyArIGxpZ2h0bmVzcyArICclLCcgKyB0aGlzLm9wYWNpdHkgKyAnKSc7XHJcblx0fVxyXG5cclxuXHREaXNwbGF5U3RhdGljKGRpdjogSFRNTERpdkVsZW1lbnQsIHRleHRTaXplOiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IG91dGVyRGl2ID0gZGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0b3V0ZXJEaXYuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG5cdFx0b3V0ZXJEaXYuc3R5bGUud2lkdGggPSAodGV4dFNpemUgKiAzLjI1KSArICdweCc7XHJcblx0XHRvdXRlckRpdi5zdHlsZS5oZWlnaHQgPSAodGV4dFNpemUgKiAzLjI1KSArICdweCc7XHJcblx0XHRvdXRlckRpdi5jbGFzc05hbWUgPSAnY2ZlLXBob3RvZ2x5cGgnO1xyXG5cdFx0Y29uc3QgZ2x5cGhEaXYgPSBvdXRlckRpdi5jcmVhdGVEaXYoKTtcclxuXHRcdGdseXBoRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHRcdGdseXBoRGl2LnRleHRDb250ZW50ID0gdGhpcy5zaGFwZTtcclxuXHRcdGdseXBoRGl2LnN0eWxlLmxlZnQgPSAodGhpcy54ICogdGV4dFNpemUpICsgJ3B4JztcclxuXHRcdGdseXBoRGl2LnN0eWxlLmJvdHRvbSA9ICh0aGlzLnkgKiB0ZXh0U2l6ZSkgKyAncHgnO1xyXG5cdFx0Z2x5cGhEaXYuc3R5bGUuY29sb3IgPSB0aGlzLmNvbG9yO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQ0ZFRmlsZSB9IGZyb20gXCIuL2NmZS1maWxlXCI7XHJcbmltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBGaWxlQ3JlYXRpb25EYXRhIH0gZnJvbSBcIi4vZmlsZS1jcmVhdGlvbi1kYXRhXCI7XHJcbmltcG9ydCB7IFNpbmdsZU1lZGlhRmlsZSB9IGZyb20gXCIuL3NpbmdsZS1tZWRpYS1maWxlXCI7XHJcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XHJcbmltcG9ydCB7IFBob3RvTGluZSB9IGZyb20gXCIuL2NvbmxhbmdzL3Bob3RvbGFuZy10ZXh0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGhvdG9sYW5nU3RvcnkgZXh0ZW5kcyBDRkVGaWxlIHtcclxuXHRmaWxlVHlwZSA9ICdQaG90b2xhbmcgU3RvcnknO1xyXG5cclxuXHRwcml2YXRlIGN1cnJlbnRQYWdlSW5kZXg6IG51bWJlcjtcclxuXHRwcml2YXRlIHBhZ2VzOiBQYWdlW107XHJcblx0cHJpdmF0ZSBjaGFyYWN0ZXJzOiBDaGFyYWN0ZXJbXTtcclxuXHJcblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhOiBGaWxlQ3JlYXRpb25EYXRhKTogUHJvbWlzZTxQaG90b2xhbmdTdG9yeT4ge1xyXG5cdFx0Y29uc3QgbmV3U3RvcnlGaWxlID0gPFBob3RvbGFuZ1N0b3J5PiAoYXdhaXQgc3VwZXIuQ3JlYXRlTmV3RmlsZUZvckxheWVyKGRhdGEpKTtcclxuXHRcdG5ld1N0b3J5RmlsZS5jdXJyZW50UGFnZUluZGV4ID0gMDtcclxuXHRcdG5ld1N0b3J5RmlsZS5wYWdlcyA9IFtdO1xyXG5cdFx0bmV3U3RvcnlGaWxlLmNoYXJhY3RlcnMgPSBbXTtcclxuXHRcdHJldHVybiBuZXdTdG9yeUZpbGU7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRhd2FpdCBzdXBlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XHJcblx0XHRhd2FpdCB0aGlzLkxvYWRTdG9yeVVJKHNudiwgbWFpbkRpdi5jcmVhdGVEaXYoJ3Zib3gnKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIExvYWRTdG9yeVVJKHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRtYWluRGl2LmVtcHR5KCk7XHJcblx0XHRtYWluRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnR28gdG8gcGFnZSBudW1iZXI6JyB9ICk7XHJcblx0XHRjb25zdCBwYWdlU2VsZWN0RGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdGNvbnN0IHBhZ2VOdW1iZXJJbnB1dCA9IHBhZ2VTZWxlY3REaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggKyAxKSB9ICk7XHJcblx0XHRwYWdlU2VsZWN0RGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnJyArICcvJyArIHRoaXMucGFnZXMubGVuZ3RoIH0gKTtcclxuXHRcdGNvbnN0IGdvQnV0dG9uID0gcGFnZVNlbGVjdERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR28nIH0gKTtcclxuXHRcdGdvQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY3VycmVudFBhZ2VJbmRleCA9IHBhcnNlSW50KHBhZ2VOdW1iZXJJbnB1dC52YWx1ZSkgLSAxO1xyXG5cdFx0XHR0aGlzLkxvYWRDdXJyZW50UGFnZUVkaXQoc252LCBtYWluRGl2KTtcclxuXHRcdH1cclxuXHRcdGF3YWl0IHRoaXMuTG9hZENoYXJhY3RlckVkaXRvclVJKHNudiwgbWFpbkRpdik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIExvYWRDaGFyYWN0ZXJFZGl0b3JVSShzbnY6IFNvdXJjZUFuZFZhdWx0LCBkaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRjb25zdCBjaGFyRWRpdG9yRGl2ID0gZGl2LmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gaTtcclxuXHRcdFx0Y29uc3QgY2hhckRpdiA9IGNoYXJFZGl0b3JEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblxyXG5cdFx0XHRjaGFyRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTmFtZTogJyB9ICk7XHJcblx0XHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNoYXJEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiB0aGlzLmNoYXJhY3RlcnNbaV0ubmFtZSB9ICk7XHJcblx0XHRcdG5hbWVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5uYW1lID0gbmFtZUlucHV0LnZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuTG9hZFN0b3J5VUkoc252LCBkaXYpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IHBob3RvTmFtZSA9IG5ldyBQaG90b0xpbmUodGhpcy5jaGFyYWN0ZXJzW2ldLm5hbWUpO1xyXG5cdFx0XHRwaG90b05hbWUuU3BlYWsoY2hhckRpdi5jcmVhdGVEaXYoKSwgNTAsIFsxMDAsIDI1MCwgNTAwXSwgWzAsIDUwMF0sIHRydWUpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgYWRkQ2hhckJ1dHRvbiA9IGNoYXJFZGl0b3JEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FkZCBDaGFyYWN0ZXInIH0gKTtcclxuXHRcdGFkZENoYXJCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzLnB1c2gobmV3IENoYXJhY3RlcigpKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHRcdGNoYXJFZGl0b3JEaXYucmVtb3ZlKCk7XHJcblx0XHRcdGF3YWl0IHRoaXMuTG9hZENoYXJhY3RlckVkaXRvclVJKHNudiwgZGl2KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgTG9hZFBhZ2VTZWxlY3RvcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBtYWluRGl2OiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0Y29uc3QgYnV0dG9uc0RpdiA9IG1haW5EaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRjb25zdCBiYWNrQnV0dG9uID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnLScgfSApO1xyXG5cdFx0Y29uc3QgcGFnZU51bWJlcklucHV0ID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcnICsgKHRoaXMuY3VycmVudFBhZ2VJbmRleCArIDEpIH0gKTtcclxuXHRcdGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICcnICsgJy8nICsgdGhpcy5wYWdlcy5sZW5ndGggfSApO1xyXG5cdFx0Y29uc3QgbmV4dEJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcclxuXHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0RlbGV0ZSBQYWdlJyB9ICk7XHJcblx0XHRkZWxldGVCdXR0b24uY2xhc3NOYW1lID0gJ2NmZS1yZW1vdmUtYnV0dG9uJztcclxuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FkZCBQYWdlJyB9ICk7XHJcblx0XHRjb25zdCBlZGl0TW9kZUJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0VkaXQgTW9kZScgfSApO1xyXG5cdFx0Y29uc3Qgdmlld01vZGVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdWaWV3IE1vZGUnIH0gKTtcclxuXHRcdGNvbnN0IGhvbWVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdSZXR1cm4gdG8gU3RvcnknIH0gKTtcclxuXHRcdGhvbWVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0YXdhaXQgdGhpcy5Mb2FkU3RvcnlVSShzbnYsIG1haW5EaXYpO1xyXG5cdFx0fVxyXG5cdFx0ZWRpdE1vZGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0YXdhaXQgdGhpcy5Mb2FkQ3VycmVudFBhZ2VFZGl0KHNudiwgbWFpbkRpdik7XHJcblx0XHR9XHJcblx0XHR2aWV3TW9kZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZURpc3BsYXlPbmx5KHNudiwgbWFpbkRpdik7XHJcblx0XHR9XHJcblx0XHRiYWNrQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggPiAwKSB7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4LS07XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5Mb2FkQ3VycmVudFBhZ2VFZGl0KHNudiwgbWFpbkRpdik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdG5leHRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudFBhZ2VJbmRleCA8IHRoaXMucGFnZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4Kys7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5Mb2FkQ3VycmVudFBhZ2VFZGl0KHNudiwgbWFpbkRpdik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHBhZ2VOdW1iZXJJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4ID0gcGFyc2VJbnQocGFnZU51bWJlcklucHV0LnZhbHVlKSAtIDE7XHJcblx0XHRcdGF3YWl0IHRoaXMuTG9hZEN1cnJlbnRQYWdlRWRpdChzbnYsIG1haW5EaXYpO1xyXG5cdFx0fVxyXG5cdFx0ZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMucGFnZXMuc3BsaWNlKHRoaXMuY3VycmVudFBhZ2VJbmRleCwgMSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50UGFnZUluZGV4ICE9PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4LS07XHJcblx0XHRcdH1cclxuXHRcdFx0YXdhaXQgdGhpcy5Mb2FkQ3VycmVudFBhZ2VFZGl0KHNudixtYWluRGl2KTtcclxuXHRcdH1cclxuXHRcdGFkZEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBkZWZhdWx0UGFnZSA9IG5ldyBQYWdlKCk7XHJcblx0XHRcdGNvbnN0IHRoaXNQYWdlRmlsZUlEID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhRmlsZUlEO1xyXG5cdFx0XHRpZiAodGhpc1BhZ2VGaWxlSUQgIT09IC0xICYmIHRoaXNQYWdlRmlsZUlEIDwgc252LnNvdXJjZUZvbGRlci5maWxlQ291bnQpIHtcclxuXHRcdFx0XHRkZWZhdWx0UGFnZS5tZWRpYUZpbGVJRCA9IHRoaXNQYWdlRmlsZUlEO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMucGFnZXMuc3BsaWNlKHRoaXMuY3VycmVudFBhZ2VJbmRleCArIDEsIDAsIGRlZmF1bHRQYWdlKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHRcdHRoaXMuY3VycmVudFBhZ2VJbmRleCsrO1xyXG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZUVkaXQoc252LG1haW5EaXYpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBMb2FkQ3VycmVudFBhZ2VFZGl0KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRtYWluRGl2LmVtcHR5KCk7XHJcblx0XHR0aGlzLkxvYWRQYWdlU2VsZWN0b3Ioc252LCBtYWluRGl2KTtcclxuXHJcblx0XHRtYWluRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTWVkaWEgRmlsZSBJRDonIH0gKTtcclxuXHRcdGNvbnN0IG1lZGlhRmlsZUlESW5wdXQgPSBtYWluRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnIH0gKTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgcGFuZWxEaXYgPSBtYWluRGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0Y29uc3Qgb3V0ZXJNZWRpYURpdiA9IHBhbmVsRGl2LmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0Y29uc3QgbGluZXNEaXYgPSBwYW5lbERpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdGNvbnN0IG1lZGlhV2lkdGhJbnB1dCA9IG91dGVyTWVkaWFEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSApO1xyXG5cdFx0bWVkaWFXaWR0aElucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRvdXRlck1lZGlhRGl2LnN0eWxlLndpZHRoID0gbWVkaWFXaWR0aElucHV0LnZhbHVlICsgJyUnO1xyXG5cdFx0XHRsaW5lc0Rpdi5zdHlsZS53aWR0aCA9IDEwMCAtIHBhcnNlSW50KG1lZGlhV2lkdGhJbnB1dC52YWx1ZSkgKyAnJSc7XHJcblx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlID0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKTtcclxuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHR9XHJcblx0XHRvdXRlck1lZGlhRGl2LnN0eWxlLndpZHRoID0gJzUwJSc7XHJcblx0XHRjb25zdCBtZWRpYURpdiA9IG91dGVyTWVkaWFEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblx0XHRtZWRpYURpdi5zdHlsZS5vYmplY3RGaXQgPSAnY29udGFpbic7XHJcblx0XHRsaW5lc0Rpdi5zdHlsZS53aWR0aCA9ICc1MCUnO1xyXG5cdFx0bGluZXNEaXYuc3R5bGUubWF4SGVpZ2h0ID0gJzgwdmgnO1xyXG5cdFx0bGluZXNEaXYuc3R5bGUucG9zaXRpb24gPSAnc3RpY2t5JztcclxuXHRcdGxpbmVzRGl2LnN0eWxlLnRvcCA9ICcwJSc7XHJcblxyXG5cdFx0aWYgKHRoaXMuY3VycmVudFBhZ2VJbmRleCA8IHRoaXMucGFnZXMubGVuZ3RoKSB7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRQYWdlID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdO1xyXG5cdFx0XHRjb25zdCBtZWRpYUZpbGVJRCA9IGN1cnJlbnRQYWdlLm1lZGlhRmlsZUlEO1xyXG5cdFx0XHRtZWRpYUZpbGVJRElucHV0LnZhbHVlID0gJycgKyBjdXJyZW50UGFnZS5tZWRpYUZpbGVJRDtcclxuXHRcdFx0aWYgKG1lZGlhRmlsZUlEID4gMCkge1xyXG5cdFx0XHRcdGNvbnN0IG1lZGlhRmlsZSA9IDxTaW5nbGVNZWRpYUZpbGU+IGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgbWVkaWFGaWxlSUQpO1xyXG5cdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubWVkaWFTaXplUGVyY2VudGFnZSkge1xyXG5cdFx0XHRcdG1lZGlhV2lkdGhJbnB1dC52YWx1ZSA9ICcnICsgdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2U7XHJcblx0XHRcdFx0b3V0ZXJNZWRpYURpdi5zdHlsZS53aWR0aCA9IG1lZGlhV2lkdGhJbnB1dC52YWx1ZSArICclJztcclxuXHRcdFx0XHRsaW5lc0Rpdi5zdHlsZS53aWR0aCA9IDEwMCAtIHBhcnNlSW50KG1lZGlhV2lkdGhJbnB1dC52YWx1ZSkgKyAnJSc7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bWVkaWFXaWR0aElucHV0LnZhbHVlID0gJzUwJztcclxuXHRcdFx0XHR0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubWVkaWFTaXplUGVyY2VudGFnZSA9IDUwO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zdCBkZWZhdWx0UGFnZSA9IG5ldyBQYWdlKCk7XHJcblx0XHRcdGNvbnN0IGxhc3RQYWdlID0gdGhpcy5jdXJyZW50UGFnZUluZGV4IC0gMTtcclxuXHRcdFx0aWYgKGxhc3RQYWdlID49IDAgJiYgdGhpcy5jdXJyZW50UGFnZUluZGV4ICE9PSAwKSB7XHJcblx0XHRcdFx0Y29uc3QgbGFzdFBhZ2VGaWxlSUQgPSB0aGlzLnBhZ2VzW2xhc3RQYWdlXS5tZWRpYUZpbGVJRDtcclxuXHRcdFx0XHRjb25zdCBsYXN0UGFnZVNpemUgPSB0aGlzLnBhZ2VzW2xhc3RQYWdlXS5tZWRpYVNpemVQZXJjZW50YWdlO1xyXG5cdFx0XHRcdGRlZmF1bHRQYWdlLm1lZGlhU2l6ZVBlcmNlbnRhZ2UgPSBsYXN0UGFnZVNpemU7XHJcblx0XHRcdFx0bWVkaWFXaWR0aElucHV0LnZhbHVlID0gJycgKyBsYXN0UGFnZVNpemU7XHJcblx0XHRcdFx0b3V0ZXJNZWRpYURpdi5zdHlsZS53aWR0aCA9IG1lZGlhV2lkdGhJbnB1dC52YWx1ZSArICclJztcclxuXHRcdFx0XHRsaW5lc0Rpdi5zdHlsZS53aWR0aCA9IDEwMCAtIHBhcnNlSW50KG1lZGlhV2lkdGhJbnB1dC52YWx1ZSkgKyAnJSc7XHJcblx0XHRcdFx0aWYgKGxhc3RQYWdlRmlsZUlEICE9PSAtMSAmJiBsYXN0UGFnZUZpbGVJRCA8IHNudi5zb3VyY2VGb2xkZXIuZmlsZUNvdW50KSB7XHJcblx0XHRcdFx0XHRjb25zdCBtZWRpYUZpbGVJRCA9IGxhc3RQYWdlRmlsZUlEICsgMTtcclxuXHRcdFx0XHRcdGRlZmF1bHRQYWdlLm1lZGlhRmlsZUlEID0gbWVkaWFGaWxlSUQ7XHJcblx0XHRcdFx0XHRtZWRpYUZpbGVJRElucHV0LnZhbHVlID0gJycgKyBtZWRpYUZpbGVJRDtcclxuXHRcdFx0XHRcdGlmIChtZWRpYUZpbGVJRCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCBtZWRpYUZpbGVJRCk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnBhZ2VzLnB1c2goZGVmYXVsdFBhZ2UpO1xyXG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdH1cclxuXHRcdGF3YWl0IHRoaXMuTG9hZERpYWxvZ3VlTGluZXNFZGl0KHNudiwgbGluZXNEaXYpO1xyXG5cdFx0bWVkaWFGaWxlSURJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF07XHJcblx0XHRcdGN1cnJlbnRQYWdlLm1lZGlhRmlsZUlEID0gcGFyc2VJbnQobWVkaWFGaWxlSURJbnB1dC52YWx1ZSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHRjb25zdCBtZWRpYUZpbGUgPSA8U2luZ2xlTWVkaWFGaWxlPiBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIGN1cnJlbnRQYWdlLm1lZGlhRmlsZUlEKTtcclxuXHRcdFx0YXdhaXQgbWVkaWFGaWxlLkRpc3BsYXlNZWRpYU9ubHkobWVkaWFEaXYsIHNudik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIExvYWRDdXJyZW50UGFnZURpc3BsYXlPbmx5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRtYWluRGl2LmVtcHR5KCk7XHJcblxyXG5cdFx0dGhpcy5Mb2FkUGFnZVNlbGVjdG9yKHNudiwgbWFpbkRpdik7XHJcblx0XHRcclxuXHRcdGNvbnN0IHBhbmVsRGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdGNvbnN0IG91dGVyTWVkaWFEaXYgPSBwYW5lbERpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdGNvbnN0IGxpbmVzRGl2ID0gcGFuZWxEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblxyXG5cdFx0b3V0ZXJNZWRpYURpdi5zdHlsZS53aWR0aCA9ICc1MCUnO1xyXG5cdFx0Y29uc3QgbWVkaWFEaXYgPSBvdXRlck1lZGlhRGl2LmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0bWVkaWFEaXYuc3R5bGUub2JqZWN0Rml0ID0gJ2NvbnRhaW4nO1xyXG5cdFx0bGluZXNEaXYuc3R5bGUud2lkdGggPSAnNTAlJztcclxuXHRcdGxpbmVzRGl2LnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJztcclxuXHRcdGxpbmVzRGl2LnN0eWxlLnBvc2l0aW9uID0gJ3N0aWNreSc7XHJcblx0XHRsaW5lc0Rpdi5zdHlsZS50b3AgPSAnMCUnO1xyXG5cclxuXHRcdGNvbnN0IGN1cnJlbnRQYWdlID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdO1xyXG5cdFx0Y29uc3QgbWVkaWFGaWxlSUQgPSBjdXJyZW50UGFnZS5tZWRpYUZpbGVJRDtcclxuXHRcdGlmIChtZWRpYUZpbGVJRCA+IDApIHtcclxuXHRcdFx0Y29uc3QgbWVkaWFGaWxlID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCBtZWRpYUZpbGVJRCk7XHJcblx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlKSB7XHJcblx0XHRcdGNvbnN0IHdpZHRoID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2U7XHJcblx0XHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSB3aWR0aCArICclJztcclxuXHRcdFx0bGluZXNEaXYuc3R5bGUud2lkdGggPSAxMDAgLSB3aWR0aCArICclJztcclxuXHRcdH1cclxuXHRcdGF3YWl0IHRoaXMuTG9hZERpYWxvZ3VlTGluZXNEaXNwbGF5T25seShsaW5lc0Rpdik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIExvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnY6IFNvdXJjZUFuZFZhdWx0LCBsaW5lc0RpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGxpbmVzRGl2LmVtcHR5KCk7XHJcblx0XHRjb25zdCBzcGVha0RpdiA9IGxpbmVzRGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0Y29uc3QgZXhpc3RpbmdMaW5lc0RpdiA9IGxpbmVzRGl2LmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0ZXhpc3RpbmdMaW5lc0Rpdi5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IGk7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2ldO1xyXG5cdFx0XHRjb25zdCBsaW5lRGl2ID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdFx0bGluZURpdi5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHJcblx0XHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGxpbmVEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJy0nIH0gKTtcclxuXHRcdFx0ZGVsZXRlQnV0dG9uLmNsYXNzTmFtZSA9ICdjZmUtcmVtb3ZlLWJ1dHRvbic7XHJcblx0XHRcdGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5zcGxpY2UoY3VycmVudEluZGV4LCAxKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGluZURpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJycgKyAgY3VycmVudEluZGV4IH0gKTtcclxuXHRcdFx0Y29uc3QgcGxheUJ1dHRvbiA9IGxpbmVEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1MjVCNycgfSApO1xyXG5cclxuXHRcdFx0Y29uc3QgY2hhckRyb3Bkb3duQnV0dG9uID0gbGluZURpdi5jcmVhdGVEaXYoKTtcclxuXHRcdFx0Y29uc3QgY2hhckRyb3Bkb3duRGl2ID0gY2hhckRyb3Bkb3duQnV0dG9uLmNyZWF0ZURpdigpO1xyXG5cdFx0XHRjaGFyRHJvcGRvd25EaXYuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG5cdFx0XHRjaGFyRHJvcGRvd25CdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0XHRjaGFyRHJvcGRvd25EaXYuZW1wdHkoKTtcclxuXHRcdFx0XHRjb25zdCBzZWxlY3REaXYgPSBjaGFyRHJvcGRvd25EaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRcdFx0c2VsZWN0RGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHRcdFx0XHRzZWxlY3REaXYuc3R5bGUudG9wID0gJzAlJztcclxuXHRcdFx0XHRzZWxlY3REaXYuc3R5bGUubGVmdCA9ICcwJSc7XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRDaGFySW5kZXggPSBpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudENoYXIgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudENoYXJJbmRleF07XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50T3B0aW9uID0gc2VsZWN0RGl2LmNyZWF0ZUVsKCdkaXYnKTtcclxuXHRcdFx0XHRcdGNvbnN0IHBob3RvTmFtZSA9IG5ldyBQaG90b0xpbmUoY3VycmVudENoYXIubmFtZSk7XHJcblx0XHRcdFx0XHRwaG90b05hbWUuU3BlYWsoY3VycmVudE9wdGlvbiwgMTAsIFsxMDAsIDI1MCwgNTAwXSwgWzAsIDUwMF0sIHRydWUpO1xyXG5cdFx0XHRcdFx0Y3VycmVudE9wdGlvbi5zdHlsZS56SW5kZXggPSAnMic7XHJcblx0XHRcdFx0XHRjdXJyZW50T3B0aW9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lc1tjdXJyZW50SW5kZXhdLnNwZWFrZXJJbmRleCA9IGN1cnJlbnRDaGFySW5kZXg7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHRcdFx0XHRsaW5lc0Rpdi5lbXB0eSgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IHBob3RvTmFtZSA9IG5ldyBQaG90b0xpbmUodGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRMaW5lLnNwZWFrZXJJbmRleF0ubmFtZSk7XHJcblx0XHRcdHBob3RvTmFtZS5TcGVhayhjaGFyRHJvcGRvd25EaXYsIDEwLCBbMTAwLCAyNTAsIDUwMF0sIFswLCA1MDBdLCB0cnVlKTtcclxuXHJcblx0XHRcdGNvbnN0IGxpbmVJbnB1dCA9IGxpbmVEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiBjdXJyZW50TGluZS5jb250ZW50IH0gKTtcclxuXHRcdFx0bGluZUlucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG5cdFx0XHRsaW5lSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0Y3VycmVudExpbmUuY29udGVudCA9IGxpbmVJbnB1dC52YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cGxheUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHBvcHVwID0gc3BlYWtEaXYuY3JlYXRlRGl2KCk7XHJcblx0XHRcdFx0cG9wdXAuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG5cdFx0XHRcdHBvcHVwLnN0eWxlLnRvcCA9ICcwcHgnO1xyXG5cdFx0XHRcdHBvcHVwLnN0eWxlLmxlZnQgPSAnMHB4JztcclxuXHRcdFx0XHRjb25zdCBwaG90b2xpbmUgPSBuZXcgUGhvdG9MaW5lKGxpbmVJbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0cGhvdG9saW5lLlNwZWFrKHBvcHVwLCAyMDAsIFsxMDAsIDI1MCwgNTAwXSwgWzAsIDUwMF0sIGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc3QgYWRkQnV0dG9uID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnKycgfSApO1xyXG5cdFx0YWRkQnV0dG9uLnN0eWxlLndpZHRoID0gJzEwcHgnO1xyXG5cdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5wdXNoKG5ldyBEaWFsb2d1ZUxpbmUoMCkpO1xyXG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdFx0YXdhaXQgdGhpcy5Mb2FkRGlhbG9ndWVMaW5lc0VkaXQoc252LCBsaW5lc0Rpdik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIExvYWREaWFsb2d1ZUxpbmVzRGlzcGxheU9ubHkobGluZXNEaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRsaW5lc0Rpdi5lbXB0eSgpO1xyXG5cdFx0Y29uc3Qgc3BlYWtEaXYgPSBsaW5lc0Rpdi5jcmVhdGVEaXYoKTtcclxuXHRcdGNvbnN0IGV4aXN0aW5nTGluZXNEaXYgPSBsaW5lc0Rpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdGV4aXN0aW5nTGluZXNEaXYuc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBjdXJyZW50TGluZSA9IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lc1tpXTtcclxuXHJcblx0XHRcdGNvbnN0IHBsYXlCdXR0b24gPSBleGlzdGluZ0xpbmVzRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTI1QjcnIH0gKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IG5hbWVEaXYgPSBleGlzdGluZ0xpbmVzRGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0XHRjb25zdCBsaW5lRGl2ID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdFx0bGluZURpdi5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHJcblx0XHRcdGNvbnN0IHBob3RvTmFtZSA9IG5ldyBQaG90b0xpbmUodGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRMaW5lLnNwZWFrZXJJbmRleF0ubmFtZSk7XHJcblx0XHRcdHBob3RvTmFtZS5TcGVhayhuYW1lRGl2LCAxMCwgWzEwMCwgMjUwLCA1MDBdLCBbMCwgNTAwXSwgdHJ1ZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBwaG90b0xpbmUgPSBuZXcgUGhvdG9MaW5lKGN1cnJlbnRMaW5lLmNvbnRlbnQpO1xyXG5cdFx0XHRwaG90b0xpbmUuRGlzcGxheVN0YXRpYyhsaW5lRGl2LCAxMCk7XHJcblx0XHRcdFxyXG5cdFx0XHRwbGF5QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgcG9wdXAgPSBzcGVha0Rpdi5jcmVhdGVEaXYoKTtcclxuXHRcdFx0XHRwb3B1cC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblx0XHRcdFx0cG9wdXAuc3R5bGUudG9wID0gJzBweCc7XHJcblx0XHRcdFx0cG9wdXAuc3R5bGUubGVmdCA9ICcwcHgnO1xyXG5cdFx0XHRcdHBob3RvTGluZS5TcGVhayhwb3B1cCwgMjAwLCBbMTAwLCAyNTAsIDUwMF0sIFswLCA1MDBdLCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2ldO1xyXG5cclxuXHRcdFx0Y29uc3QgbmFtZURpdiA9IHNwZWFrRGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0XHRuYW1lRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHRcdFx0bmFtZURpdi5zdHlsZS50b3AgPSAnMHB4JztcclxuXHRcdFx0bmFtZURpdi5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBwaG90b05hbWUgPSBuZXcgUGhvdG9MaW5lKHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50TGluZS5zcGVha2VySW5kZXhdLm5hbWUpO1xyXG5cdFx0XHRhd2FpdCBwaG90b05hbWUuU3BlYWsobmFtZURpdiwgMTAwLCBbMTAwLCAyNTAsIDUwMF0sIFswLCA1MDBdLCBmYWxzZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBwb3B1cCA9IHNwZWFrRGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0XHRwb3B1cC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblx0XHRcdHBvcHVwLnN0eWxlLnRvcCA9ICcwcHgnO1xyXG5cdFx0XHRwb3B1cC5zdHlsZS5sZWZ0ID0gJzBweCc7XHJcblxyXG5cdFx0XHRjb25zdCBwaG90b0xpbmUgPSBuZXcgUGhvdG9MaW5lKGN1cnJlbnRMaW5lLmNvbnRlbnQpO1xyXG5cdFx0XHRhd2FpdCBwaG90b0xpbmUuU3BlYWsocG9wdXAsIDIwMCwgWzEwMCwgMjUwLCA1MDBdLCBbMCwgNTAwXSwgZmFsc2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuXHJcbmNsYXNzIFBhZ2Uge1xyXG5cdG1lZGlhRmlsZUlEOiBudW1iZXI7XHJcblx0bGluZXM6IERpYWxvZ3VlTGluZVtdO1xyXG5cdG1lZGlhU2l6ZVBlcmNlbnRhZ2U6IG51bWJlcjtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMubWVkaWFGaWxlSUQgPSAtMTtcclxuXHRcdHRoaXMubGluZXMgPSBbXTtcclxuXHRcdHRoaXMubWVkaWFTaXplUGVyY2VudGFnZSA9IDUwO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgRGlhbG9ndWVMaW5lIHtcclxuXHRzcGVha2VySW5kZXg6IG51bWJlcjtcclxuXHRjb250ZW50OiBzdHJpbmc7XHJcblx0Y29uc3RydWN0b3Ioc3BlYWtlckluZGV4OiBudW1iZXIpIHtcclxuXHRcdHRoaXMuc3BlYWtlckluZGV4ID0gc3BlYWtlckluZGV4O1xyXG5cdFx0dGhpcy5jb250ZW50ID0gJyc7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBDaGFyYWN0ZXIge1xyXG5cdG5hbWU6IHN0cmluZztcclxuXHRjb25zdHJ1Y3RvcihuYW1lID0gJycpIHtcclxuXHRcdHRoaXMubmFtZSA9IG5hbWU7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgSHdheXUge1xuXHRzdGF0aWMgRGlzcGxheShkaXY6IEhUTUxEaXZFbGVtZW50LCB0ZXh0ID0gJycsIGZvbnRTaXplID0gMjAsIGlzVmVydGljYWwgPSB0cnVlKTogSFRNTEVsZW1lbnQge1xuXHRcdGNvbnN0IHRleHRFbGVtZW50ID0gZGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0ZXh0IH0gKTtcblx0XHR0ZXh0RWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gaXNWZXJ0aWNhbCA/ICdId2F5dVJlYWwnIDogJ0h3YXl1SG9yaXpvbnRhbCc7XG5cdFx0dGV4dEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArICdweCc7XG5cdFx0aWYgKGlzVmVydGljYWwpIHtcblx0XHRcdHRleHRFbGVtZW50LnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0XHRcdHRleHRFbGVtZW50LnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0XHR9XG5cdFx0cmV0dXJuIHRleHRFbGVtZW50O1xuXHR9XG5cblx0c3RhdGljIENyZWF0ZVRleHRBcmVhKGRpdjogSFRNTERpdkVsZW1lbnQsIGV4aXN0aW5nVGV4dCA9ICcnLCBmb250U2l6ZSA9IDIwLCBpc1ZlcnRpY2FsID0gdHJ1ZSk6IEhUTUxUZXh0QXJlYUVsZW1lbnQge1xuXHRcdGNvbnN0IHRleHRBcmVhID0gZGl2LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgdGV4dDogZXhpc3RpbmdUZXh0IH0gKTtcblx0XHR0ZXh0QXJlYS5zdHlsZS5mb250RmFtaWx5ID0gaXNWZXJ0aWNhbCA/ICdId2F5dVJlYWwnIDogJ0h3YXl1SG9yaXpvbnRhbCc7XG5cdFx0dGV4dEFyZWEuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArICdweCc7XG5cdFx0aWYgKGlzVmVydGljYWwpIHtcblx0XHRcdHRleHRBcmVhLnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0XHRcdHRleHRBcmVhLnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0XHR9XG5cdFx0dGV4dEFyZWEuc3BlbGxjaGVjayA9IGZhbHNlO1xuXHRcdHJldHVybiB0ZXh0QXJlYTtcblx0fVxuXG5cdHN0YXRpYyBDcmVhdGVUZXh0SW5wdXQoZGl2OiBIVE1MRGl2RWxlbWVudCwgZXhpc3RpbmdUZXh0ID0gJycsIGZvbnRTaXplID0gMjAsIGlzVmVydGljYWwgPSB0cnVlKTogSFRNTElucHV0RWxlbWVudCB7XG5cdFx0Y29uc3QgdGV4dElucHV0ID0gZGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogZXhpc3RpbmdUZXh0IH0gKTtcblx0XHR0ZXh0SW5wdXQuc3R5bGUuZm9udEZhbWlseSA9IGlzVmVydGljYWwgPyAnSHdheXVSZWFsJyA6ICdId2F5dUhvcml6b250YWwnO1xuXHRcdHRleHRJbnB1dC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgJ3B4Jztcblx0XHRpZiAoaXNWZXJ0aWNhbCkge1xuXHRcdFx0dGV4dElucHV0LnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0XHRcdHRleHRJbnB1dC5zdHlsZS50ZXh0T3JpZW50YXRpb24gPSAndXByaWdodCc7XG5cdFx0fVxuXHRcdHRleHRJbnB1dC5zcGVsbGNoZWNrID0gZmFsc2U7XG5cdFx0cmV0dXJuIHRleHRJbnB1dDtcblx0fVxufVxuIiwgImltcG9ydCB7IENGRUZpbGUgfSBmcm9tIFwiLi9jZmUtZmlsZVwiO1xuaW1wb3J0IHsgSHdheXUgfSBmcm9tIFwiLi9jb25sYW5ncy9od2F5dS10ZXh0XCI7XG5pbXBvcnQgeyBQaG90b0xhbmcgfSBmcm9tIFwiLi9jb25sYW5ncy9waG90b2xhbmctdGV4dFwiO1xuaW1wb3J0IHsgRmlsZUNyZWF0aW9uRGF0YSB9IGZyb20gXCIuL2ZpbGUtY3JlYXRpb24tZGF0YVwiO1xuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcblxuZXhwb3J0IGNsYXNzIENvbmxhbmdEaWN0aW9uYXJ5IGV4dGVuZHMgQ0ZFRmlsZSB7XG5cblx0bGFuZ3VhZ2U6IHN0cmluZztcblx0d29yZHM6IFtzdHJpbmcsIHN0cmluZ11bXTtcblx0c2VhcmNoVGVybTogc3RyaW5nO1xuXHRzZWFyY2hJbkNvbmxhbmc6IGJvb2xlYW47XG5cblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihkYXRhOiBGaWxlQ3JlYXRpb25EYXRhKTogUHJvbWlzZTxDb25sYW5nRGljdGlvbmFyeT4ge1xuXHRcdGNvbnN0IHVuZmluaXNoZWREaWN0aW9uYXJ5ID0gPENvbmxhbmdEaWN0aW9uYXJ5PiBhd2FpdCBzdXBlci5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoZGF0YSk7XG5cdFx0dW5maW5pc2hlZERpY3Rpb25hcnkubGFuZ3VhZ2UgPSAnSHdheXUnO1xuXHRcdHVuZmluaXNoZWREaWN0aW9uYXJ5LndvcmRzID0gW107XG5cdFx0dW5maW5pc2hlZERpY3Rpb25hcnkuc2VhcmNoVGVybSA9ICcnO1xuXHRcdHVuZmluaXNoZWREaWN0aW9uYXJ5LnNlYXJjaEluQ29ubGFuZyA9IGZhbHNlO1xuXHRcdHJldHVybiB1bmZpbmlzaGVkRGljdGlvbmFyeTtcblx0fVxuXG5cdG92ZXJyaWRlIGFzeW5jIERpc3BsYXkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCBzdXBlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XG5cblx0XHRjb25zdCBsYW5ndWFnZURyb3Bkb3duID0gbWFpbkRpdi5jcmVhdGVFbCgnc2VsZWN0Jyk7XG5cdFx0bGFuZ3VhZ2VEcm9wZG93bi5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnSHdheXUnLCB2YWx1ZTogJ0h3YXl1JyB9ICk7XG5cdFx0bGFuZ3VhZ2VEcm9wZG93bi5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnUGhvdG9sYW5nJywgdmFsdWU6ICdQaG90b2xhbmcnIH0gKTtcblx0XHRsYW5ndWFnZURyb3Bkb3duLnZhbHVlID0gdGhpcy5sYW5ndWFnZTtcblxuXHRcdGNvbnN0IGFkZFdvcmREaXYgPSBtYWluRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdGF3YWl0IHRoaXMuQ3JlYXRlTmV3V29yZEVkaXRvcihzbnYsIG1haW5EaXYsIGFkZFdvcmREaXYpO1xuXG5cdFx0bGFuZ3VhZ2VEcm9wZG93bi5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMubGFuZ3VhZ2UgPSBsYW5ndWFnZURyb3Bkb3duLnZhbHVlO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXkoc252LCBtYWluRGl2KTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLkRpc3BsYXlMaXN0KHNudiwgbWFpbkRpdik7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIERpc3BsYXlXb3JkKHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50LCBkaXY6IEhUTUxEaXZFbGVtZW50LCBpbmRleDogbnVtYmVyKSB7XG5cdFx0ZGl2LmVtcHR5KCk7XG5cblx0XHRjb25zdCBtb2RlQnV0dG9uID0gZGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdFZGl0JyB9ICk7XG5cdFx0bW9kZUJ1dHRvbi5zdHlsZS50b3AgPSAnMCc7XG5cdFx0bW9kZUJ1dHRvbi5zdHlsZS5yaWdodCA9ICcwJztcblx0XHRtb2RlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLkVkaXRXb3JkKHNudiwgbWFpbkRpdiwgZGl2LCBpbmRleCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd29yZERpdiA9IGRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0XHR3b3JkRGl2LnN0eWxlLmdhcCA9ICcxJSc7XG5cdFx0d29yZERpdi5zdHlsZS5mb250U2l6ZSA9ICcyNXB4Jztcblx0XHRjb25zdCBjb25sYW5nV29yZCA9IHRoaXMud29yZHNbaW5kZXhdWzBdO1xuXHRcdGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLndvcmRzW2luZGV4XVsxXTtcblx0XHRjb25zdCBjb25sYW5nV29yZERpdiA9IHRoaXMuRGlzcGxheUNvbmxhbmdUZXh0KHdvcmREaXYsIGNvbmxhbmdXb3JkKTtcblx0XHRjb25sYW5nV29yZERpdi5jbGFzc0xpc3QuYWRkKCdjZmUtcG9pbnRlci1ob3ZlcicpO1xuXHRcdHdvcmREaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICc6JyB9ICk7XG5cdFx0d29yZERpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogZGVmaW5pdGlvbiB9ICk7XG5cblx0XHRjb25sYW5nV29yZERpdi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY29ubGFuZ1dvcmQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb3B5IHRleHQ6ICcsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBFZGl0V29yZChzbnY6IFNvdXJjZUFuZFZhdWx0LCBtYWluRGl2OiBIVE1MRGl2RWxlbWVudCwgZGl2OiBIVE1MRGl2RWxlbWVudCwgaW5kZXg6IG51bWJlcikge1xuXHRcdGRpdi5lbXB0eSgpO1xuXHRcdGNvbnN0IGJ1dHRvbnNEaXYgPSBkaXYuY3JlYXRlRGl2KCdoYm94Jyk7XG5cblx0XHRjb25zdCBtb2RlQnV0dG9uID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnVmlldycgfSApO1xuXHRcdG1vZGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuRGlzcGxheVdvcmQoc252LCBtYWluRGl2LCBkaXYsIGluZGV4KTtcblx0XHR9XG5cblx0XHRjb25zdCBkZWxldGVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEZWxldGUnIH0gKTtcblx0XHRkZWxldGVCdXR0b24uY2xhc3NMaXN0ID0gJ2NmZS1yZW1vdmUtYnV0dG9uJztcblx0XHRkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMud29yZHMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0YXdhaXQgdGhpcy5EaXNwbGF5KHNudiwgbWFpbkRpdik7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd29yZERpdiA9IGRpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHR3b3JkRGl2LnN0eWxlLmZvbnRTaXplID0gJzI1cHgnO1xuXHRcdHdvcmREaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdXb3JkIGluICcgKyB0aGlzLmxhbmd1YWdlIH0gKTtcblx0XHRjb25zdCBjb25sYW5nV29yZCA9IHRoaXMud29yZHNbaW5kZXhdWzBdO1xuXHRcdGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLndvcmRzW2luZGV4XVsxXTtcblx0XHRjb25zdCBuZXdXb3JkSW5wdXQgPSB0aGlzLkRpc3BsYXlDb25sYW5nRWRpdG9yKHdvcmREaXYsIGNvbmxhbmdXb3JkKTtcblxuXHRcdHdvcmREaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdEZWZpbml0aW9uJyB9ICk7XG5cdFx0Y29uc3QgZGVmaW5pdGlvbklucHV0ID0gd29yZERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6IGRlZmluaXRpb24gfSApO1xuXHRcdGRlZmluaXRpb25JbnB1dC5zdHlsZS5mb250U2l6ZSA9ICcyNXB4JztcblxuXHRcdGNvbnN0IG9uU3VibWl0ID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy53b3Jkc1tpbmRleF0gPSBbbmV3V29yZElucHV0LnZhbHVlLCBkZWZpbml0aW9uSW5wdXQudmFsdWVdO1xuXHRcdFx0dGhpcy5SZVNvcnQoaW5kZXgpO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXkoc252LCBtYWluRGl2KTtcblx0XHR9XG5cblx0XHRkaXYub25rZXlkb3duID0gYXN5bmMgKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG5cdFx0XHRcdGF3YWl0IG9uU3VibWl0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBDcmVhdGVOZXdXb3JkRWRpdG9yKHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50LCBkaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdFx0ZGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQWRkIE5ldyBXb3JkOicgfSApO1xuXHRcdGRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1dvcmQgaW4gJyArIHRoaXMubGFuZ3VhZ2UgfSApO1xuXHRcdGNvbnN0IG5ld1dvcmRJbnB1dCA9IHRoaXMuRGlzcGxheUNvbmxhbmdFZGl0b3IoZGl2KTtcblxuXHRcdGRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0RlZmluaXRpb24nIH0gKTtcblx0XHRjb25zdCBkZWZpbml0aW9uSW5wdXQgPSBkaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyB9ICk7XG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gZGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdzdWJtaXQnIH0gKTtcblxuXHRcdGNvbnN0IG9uU3VibWl0ID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy53b3Jkcy5wdXNoKFtuZXdXb3JkSW5wdXQudmFsdWUsIGRlZmluaXRpb25JbnB1dC52YWx1ZV0pO1xuXHRcdFx0dGhpcy5SZVNvcnQodGhpcy53b3Jkcy5sZW5ndGggLSAxKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0YXdhaXQgdGhpcy5EaXNwbGF5KHNudiwgbWFpbkRpdik7XG5cdFx0fVxuXG5cdFx0c3VibWl0QnV0dG9uLm9uY2xpY2sgPSBvblN1Ym1pdDtcblx0XHRkaXYub25rZXlkb3duID0gYXN5bmMgKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG5cdFx0XHRcdGF3YWl0IG9uU3VibWl0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBEaXNwbGF5Q29ubGFuZ0VkaXRvcihkaXY6IEhUTUxEaXZFbGVtZW50LCBleGlzdGluZ1dvcmQgPSAnJykge1xuXHRcdHN3aXRjaCh0aGlzLmxhbmd1YWdlKSB7XG5cdFx0XHRjYXNlICdId2F5dSc6XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm4gSHdheXUuQ3JlYXRlVGV4dElucHV0KGRpdiwgZXhpc3RpbmdXb3JkLCAyNSwgZmFsc2UpO1xuXHRcdFx0Y2FzZSAnUGhvdG9sYW5nJzpcblx0XHRcdFx0cmV0dXJuIFBob3RvTGFuZy5DcmVhdGVUZXh0SW5wdXQoZGl2LCBleGlzdGluZ1dvcmQsIDI1KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIERpc3BsYXlDb25sYW5nVGV4dChkaXY6IEhUTUxEaXZFbGVtZW50LCBleGlzdGluZ1dvcmQgPSAnJykge1xuXHRcdHN3aXRjaCh0aGlzLmxhbmd1YWdlKSB7XG5cdFx0XHRjYXNlICdId2F5dSc6XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm4gSHdheXUuRGlzcGxheShkaXYsIGV4aXN0aW5nV29yZCwgMjUsIGZhbHNlKTtcblx0XHRcdGNhc2UgJ1Bob3RvbGFuZyc6XG5cdFx0XHRcdHJldHVybiBQaG90b0xhbmcuRGlzcGxheShkaXYsIGV4aXN0aW5nV29yZCwgMjUsIG51bGwsIG51bGwsIHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgRGlzcGxheUxpc3Qoc252OiBTb3VyY2VBbmRWYXVsdCwgZGl2OiBIVE1MRGl2RWxlbWVudCkge1xuXHRcdGRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1NlYXJjaCBpbiAnICsgdGhpcy5sYW5ndWFnZSArICc/JyB9ICk7XG5cdFx0XG5cdFx0Y29uc3QgY2hlY2tib3ggPSBkaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0gKTtcblx0XHRjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWFyY2hJbkNvbmxhbmc7XG5cblx0XHRkaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdTZWFyY2ggdGVybScgfSApO1xuXHRcdFxuXHRcdGNvbnN0IGNvbmxhbmdTZWFyY2ggPSB0aGlzLkRpc3BsYXlDb25sYW5nRWRpdG9yKGRpdiwgdGhpcy5zZWFyY2hUZXJtKTtcblx0XHRjb25zdCBlbmdsaXNoU2VhcmNoID0gZGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogdGhpcy5zZWFyY2hUZXJtIH0gKTtcblx0XHRcblx0XHRsZXQgcHJldkVsZW1lbnQgPSBjaGVja2JveC5jaGVja2VkID8gZW5nbGlzaFNlYXJjaCA6IGNvbmxhbmdTZWFyY2g7XG5cdFx0bGV0IGN1cnJlbnRFbGVtZW50ID0gY2hlY2tib3guY2hlY2tlZCA/IGNvbmxhbmdTZWFyY2ggOiBlbmdsaXNoU2VhcmNoO1xuXHRcdHByZXZFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXHRcdGN1cnJlbnRFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXG5cdFx0dGhpcy5zZWFyY2hUZXJtID0gcHJldkVsZW1lbnQudmFsdWU7XG5cblx0XHRwcmV2RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGN1cnJlbnRFbGVtZW50LnZhbHVlID0gdGhpcy5zZWFyY2hUZXJtO1xuXHRcdGN1cnJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcblx0XHRcblx0XHRjb25zdCByZXN1bHRzRGl2ID0gZGl2LmNyZWF0ZURpdignY2ZlLWRpY3Rpb25hcnktZ3JpZCcpO1xuXHRcdFxuXHRcdGNvbnN0IHJlZnJlc2hSZXN1bHRzID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5zZWFyY2hUZXJtID0gY3VycmVudEVsZW1lbnQudmFsdWU7XG5cdFx0XHR0aGlzLnNlYXJjaEluQ29ubGFuZyA9IGNoZWNrYm94LmNoZWNrZWQ7XG5cdFx0XHRyZXN1bHRzRGl2LmVtcHR5KCk7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud29yZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKHRoaXMud29yZHNbaV1bY2hlY2tib3guY2hlY2tlZCA/IDAgOiAxXS5jb250YWlucyhjdXJyZW50RWxlbWVudC52YWx1ZSkpIHtcblx0XHRcdFx0XHRjb25zdCB3b3JkRGl2ID0gcmVzdWx0c0Rpdi5jcmVhdGVEaXYoJ2NmZS1kaWN0aW9uYXJ5LXdvcmQnKTtcblx0XHRcdFx0XHR0aGlzLkRpc3BsYXlXb3JkKHNudiwgZGl2LCB3b3JkRGl2LCBpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJlZnJlc2hSZXN1bHRzKCk7XG5cblx0XHRjb25sYW5nU2VhcmNoLm9uaW5wdXQgPSByZWZyZXNoUmVzdWx0cztcblxuXHRcdGVuZ2xpc2hTZWFyY2gub25pbnB1dCA9IHJlZnJlc2hSZXN1bHRzO1xuXG5cdFx0Y2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRyZXN1bHRzRGl2LmVtcHR5KCk7XG5cblx0XHRcdHByZXZFbGVtZW50ID0gY2hlY2tib3guY2hlY2tlZCA/IGVuZ2xpc2hTZWFyY2ggOiBjb25sYW5nU2VhcmNoO1xuXHRcdFx0Y3VycmVudEVsZW1lbnQgPSBjaGVja2JveC5jaGVja2VkID8gY29ubGFuZ1NlYXJjaCA6IGVuZ2xpc2hTZWFyY2g7XG5cdFx0XHR0aGlzLnNlYXJjaFRlcm0gPSBwcmV2RWxlbWVudC52YWx1ZTtcblxuXHRcdFx0cHJldkVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdGN1cnJlbnRFbGVtZW50LnZhbHVlID0gdGhpcy5zZWFyY2hUZXJtO1xuXHRcdFx0Y3VycmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdFx0XG5cdFx0XHRyZWZyZXNoUmVzdWx0cygpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgUmVTb3J0KGluZGV4T2ZDaGFuZ2VkV29yZDogbnVtYmVyKSB7XG5cdFx0Y29uc3QgY2hhbmdlZFdvcmQgPSB0aGlzLndvcmRzLnNwbGljZShpbmRleE9mQ2hhbmdlZFdvcmQsIDEpWzBdO1xuXHRcdGxldCBpID0gMDtcblx0XHRsZXQgbGVmdCA9IDA7XG5cdFx0bGV0IHJpZ2h0ID0gdGhpcy53b3Jkcy5sZW5ndGggLSAxO1xuXHRcdFxuXHRcdHdoaWxlIChsZWZ0IDw9IHJpZ2h0KSB7XG5cdFx0XHRjb25zdCBtaWQgPSBNYXRoLmZsb29yKChsZWZ0ICsgcmlnaHQpIC8gMik7XG5cdFx0XHRpZiAodGhpcy53b3Jkc1ttaWRdWzBdIDwgY2hhbmdlZFdvcmRbMF0pIHtcblx0XHRcdFx0bGVmdCA9IG1pZCArIDE7XG5cdFx0XHRcdGkgPSBsZWZ0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmlnaHQgPSBtaWQgLSAxO1xuXHRcdFx0XHRpID0gbWlkO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMud29yZHMuc3BsaWNlKGksIDAsIGNoYW5nZWRXb3JkKTtcblx0fVxuXG59XG4iLCAiaW1wb3J0IHsgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFNvdXJjZUZvbGRlciB9IGZyb20gXCIuL3NvdXJjZS1mb2xkZXJcIjtcblxuZXhwb3J0IGNsYXNzIFNvdXJjZUFuZFZhdWx0IHtcblx0c291cmNlRm9sZGVyOiBTb3VyY2VGb2xkZXI7XG5cdHZhdWx0OiBWYXVsdDtcblx0Y29uc3RydWN0b3Ioc291cmNlRm9sZGVyOiBTb3VyY2VGb2xkZXIsIHZhdWx0OiBWYXVsdCkge1xuXHRcdHRoaXMuc291cmNlRm9sZGVyID0gc291cmNlRm9sZGVyO1xuXHRcdHRoaXMudmF1bHQgPSB2YXVsdDtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDQUEsSUFBQUEsbUJBQXdDOzs7QUNBeEMsSUFBQUMsbUJBQTZDOzs7QUNBN0MsSUFBQUMsbUJBQXVCOzs7QUNBdkIsc0JBQThCO0FBZXZCLElBQU0sV0FBTixNQUFjO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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RSxNQUFNLFdBQVcsUUFBUSxLQUFLLENBQUM7QUFHekQsY0FBVSxXQUFXLElBQUk7QUFBQSxFQUMxQjtBQUNEO0FBRUEsSUFBTSxtQkFBTixjQUErQixrQ0FBaUI7QUFBQSxFQUcvQyxZQUFZLEtBQVUsUUFBYTtBQUNsQyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBQyxZQUFXLElBQUk7QUFFdEIsZ0JBQVksTUFBTTtBQUVsQixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxxQkFBcUIsRUFDN0IsUUFBUSw2REFBNkQsRUFDckUsUUFBUSxVQUFRLEtBQ2YsZUFBZSxxQkFBcUIsRUFDcEMsU0FBUyxLQUFLLE9BQU8sU0FBUyxXQUFXLEVBQ3pDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssT0FBTyxTQUFTLGNBQWM7QUFDbkMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FBQztBQUFBLEVBQ0w7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImkiLCAiQ2hhcmFjdGVyIiwgIlBhZ2UiLCAiaSIsICJwaG90b05hbWUiLCAiRGlhbG9ndWVMaW5lIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
