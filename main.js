/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CFE
});
module.exports = __toCommonJS(main_exports);

// classes/custom-explorer-view.ts
var import_obsidian4 = require("obsidian");

// classes/source-folder.ts
var import_obsidian3 = require("obsidian");

// classes/cfe-file.ts
var import_obsidian = require("obsidian");
var _CFEFile = class {
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * Use CFEFileHandler.CreateNew() instead.
   * 
   * CHILD CLASSES SHOULD NOT WRITE TO A FILE. THIS IS DONE INSIDE OF CFEFileHandler
   * 
   * CFEFile layer:
   * 
   * sets the source, id, file type, file name, and parent folder id of the file object.
   */
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const sourceFolder = snv.sourceFolder;
    const unfinishedFile = new _CFEFile();
    unfinishedFile.id = sourceFolder.fileCount;
    unfinishedFile.fileType = fileType;
    unfinishedFile.fileName = name;
    unfinishedFile.parentFolderID = parentFolderID;
    sourceFolder.fileCount++;
    await SourceFolder.Save(snv);
    if (unfinishedFile.id !== unfinishedFile.parentFolderID) {
      const parentFolder = await CFEFileHandler.LoadFile(snv, unfinishedFile.parentFolderID);
      parentFolder.containedFileIDs.push(unfinishedFile.id);
      await parentFolder.Save(snv);
    }
    return unfinishedFile;
  }
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * Use CFEFileHandler.DisplayThumbnail() instead.
   * 
   * CFEFile layer:
   * 
   * sets the thumbnail container's css class to 'cfe-thumbnail'
   * and fully displays the file if the thumbnail is clicked.
   */
  async DisplayThumbnail(sourceAndVault, thumbnailDiv, displayDiv) {
    thumbnailDiv.className = "cfe-thumbnail vbox";
    thumbnailDiv.onclick = async () => {
      await this.Display(sourceAndVault, displayDiv);
    };
    const idText = thumbnailDiv.createDiv("hbox");
    idText.textContent = "ID: " + this.id;
    idText.style.justifyContent = "center";
    const fileText = thumbnailDiv.createDiv("hbox");
    fileText.textContent = "File Type: " + this.fileType;
    fileText.style.justifyContent = "center";
    const nameText = thumbnailDiv.createDiv("hbox");
    nameText.textContent = "File Name: " + this.fileName;
    nameText.style.justifyContent = "center";
  }
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * Use CFEFileHandler.Display() instead.
   * 
   * CFEFile layer:
   * 
   * empties the display container provided.
   */
  async Display(snv, container) {
    container.empty();
    const headerContainer = container.createDiv("hbox");
    const backButton = headerContainer.createEl("button", { text: "Back to parent folder" });
    headerContainer.createEl("p", { text: "File ID: " + this.id });
    headerContainer.createEl("p", { text: "File Name: " });
    const nameInput = headerContainer.createEl("input", { type: "text", value: this.fileName });
    backButton.onclick = async () => {
      const parentFolder = await CFEFileHandler.LoadFile(snv, this.parentFolderID);
      if (parentFolder !== null) {
        await parentFolder.Display(snv, container);
      }
    };
    nameInput.onchange = async () => {
      this.fileName = nameInput.value;
      await this.Save(snv);
    };
  }
  /**
   * SHOULD NOT BE CALLED OUTSIDE OF CFEFileHandler.
   * 
   * (it is unlikely this method will ever be overriden by child classes, but making this 'inaccessible' is for consistency)
   * 
   * Use CFEFileHandler.SaveFile() instead.
   * 
   * Formatted File layer:
   * 
   * Deletes this file ID from the original parent folder, adds this file to the new parent folder, and changes the parent folder ID
   */
  async MoveFile(sourceAndVault, newParentFolderID) {
    const oldParentFolder = await CFEFileHandler.LoadFile(sourceAndVault, this.parentFolderID);
    const indexOfFile = oldParentFolder.containedFileIDs.indexOf(this.id);
    oldParentFolder.containedFileIDs.splice(indexOfFile, 1);
    oldParentFolder.Save(sourceAndVault);
    const newParentFolder = await CFEFileHandler.LoadFile(sourceAndVault, newParentFolderID);
    newParentFolder.containedFileIDs.push(this.id);
    newParentFolder.Save(sourceAndVault);
    this.parentFolderID = newParentFolderID;
    this.Save(sourceAndVault);
  }
  async Save(sourceAndVault) {
    const sourceFolder = sourceAndVault.sourceFolder;
    const vault = sourceAndVault.vault;
    const filePath = sourceFolder.vaultPath + "/" + this.id + ".json";
    const jsonData = JSON.stringify(this);
    const tFile = vault.getFileByPath(filePath);
    if (tFile === null) {
      const normalizedPath = (0, import_obsidian.normalizePath)(filePath);
      await vault.adapter.write(normalizedPath, jsonData);
      return;
    }
    await vault.modify(tFile, jsonData);
  }
};
var CFEFile = _CFEFile;
CFEFile.FILE_NAME_INPUT_INDEX = 0;
CFEFile.PARENT_FOLDER_ID_INPUT_INDEX = 1;

// classes/single-media-file.ts
var import_obsidian2 = require("obsidian");

// classes/real-file.ts
var RealFile = class extends CFEFile {
  async DisplayMediaOnly(mediaDiv, snv) {
    mediaDiv.empty();
  }
};

// classes/single-media-file.ts
var SingleMediaFile = class extends RealFile {
  get mediaType() {
    switch (this.extensionName) {
      case "png":
      case "jpg":
      case "webp":
      case "heic":
      case "gif":
        return "Image";
      case "mp4":
      case "MP4":
      case "mov":
      case "MOV":
      default:
        return "Video";
    }
  }
  async getSrc(snv) {
    const mediaFile = await this.getTFile(snv);
    const arrayBuffer = await snv.vault.readBinary(mediaFile);
    const blob = new Blob([arrayBuffer]);
    const mediaUrl = URL.createObjectURL(blob);
    return mediaUrl;
  }
  async getTFile(snv) {
    const mediaPath = await this.getPath(snv);
    let mediaFile = snv.vault.getFileByPath(mediaPath);
    if (mediaFile === null) {
      mediaFile = snv.vault.getFileByPath(mediaPath + "." + this.extensionName);
      if (mediaFile === null) {
        throw Error("File not found at path: " + mediaPath + " or " + mediaPath + "." + this.extensionName);
      }
      snv.vault.rename(mediaFile, mediaPath);
    }
    return mediaFile;
  }
  async getPath(snv) {
    const sourceFolder = snv.sourceFolder;
    return sourceFolder.vaultPath + "/" + this.id + " Actual File";
  }
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const newMediaFile = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    newMediaFile.extensionName = "";
    return newMediaFile;
  }
  async Display(snv, container) {
    await super.Display(snv, container);
    const imageDisplayContainer = container.createDiv("vbox");
    imageDisplayContainer.createEl("p", { text: "Change file" });
    const newFileInput = imageDisplayContainer.createEl("input", { type: "file" });
    await this.DisplayMediaOnly(imageDisplayContainer, snv);
    newFileInput.onchange = async () => {
      try {
        const oldFile = await this.getTFile(snv);
        try {
          await snv.vault.delete(oldFile);
        } finally {
          await this.SaveNewFile(snv, newFileInput);
          this.Display(snv, container);
        }
      } catch (e) {
        console.log();
      }
    };
  }
  async SaveNewFile(snv, fileInput) {
    const fileArray = fileInput.files;
    if (fileArray === null) {
      throw Error("no file was selected");
    }
    const mediaFile = fileArray[0];
    await this.SetFileTo(snv, mediaFile);
  }
  async SetFileTo(snv, mediaFile) {
    const partsOfPath = mediaFile.name.split(".");
    const extension = partsOfPath[partsOfPath.length - 1];
    this.fileName = partsOfPath[0];
    this.extensionName = extension;
    const path = snv.sourceFolder.vaultPath + "/" + this.id + " Actual File";
    const normalizedPath = (0, import_obsidian2.normalizePath)(path);
    await snv.vault.adapter.writeBinary(normalizedPath, await mediaFile.arrayBuffer());
    await this.Save(snv);
  }
  async DisplayMediaOnly(mediaDiv, snv) {
    await super.DisplayMediaOnly(mediaDiv, snv);
    if (this.mediaType === "Image") {
      const imageElement = mediaDiv.createEl("img");
      imageElement.src = await this.getSrc(snv);
      imageElement.style.objectFit = "contain";
    } else {
      const videoElement = mediaDiv.createEl("video");
      videoElement.src = await this.getSrc(snv);
      videoElement.controls = true;
      videoElement.loop = true;
      videoElement.autoplay = true;
      videoElement.style.objectFit = "contain";
    }
  }
};

// classes/folder.ts
var Folder = class extends CFEFile {
  /**
   * @override Folder layer:
   * 
   * initializes the contained file ids array for the folder object
   */
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const unfinishedFolder = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    unfinishedFolder.containedFileIDs = [];
    return unfinishedFolder;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    const createButtonsDiv = mainDiv.createDiv("hbox");
    const newFileButton = createButtonsDiv.createEl("button", { text: "Create New File" });
    const popUpContainer = mainDiv.createDiv();
    newFileButton.onclick = () => {
      this.LoadCreateFileUI(snv, mainDiv, popUpContainer);
    };
    const mediaFilesButton = createButtonsDiv.createEl("button", { text: "Upload Multiple Images / Videos" });
    mediaFilesButton.onclick = () => {
      this.LoadFileSelectionUI(snv, mainDiv, popUpContainer);
    };
    const folderDisplayContainer = mainDiv.createDiv("cfe-grid");
    for (let i = 0; i < this.containedFileIDs.length; i++) {
      const containedFile = await CFEFileHandler.LoadFile(snv, this.containedFileIDs[i]);
      if (containedFile !== null) {
        await containedFile.DisplayThumbnail(snv, folderDisplayContainer.createDiv(), mainDiv);
      }
    }
  }
  LoadCreateFileUI(snv, mainDiv, div) {
    div.empty();
    const popupDiv = div.createDiv("cfe-popup");
    const wrapperDiv = popupDiv.createDiv();
    wrapperDiv.style.position = "relative";
    const exitButton = wrapperDiv.createEl("button", { text: "X", cls: "cfe-remove-button" });
    exitButton.style.position = "absolute";
    exitButton.style.top = "0%";
    exitButton.style.right = "0%";
    popupDiv.createEl("p", { text: "Choose a File Type to create:" });
    const fileTypeDropdown = popupDiv.createEl("select");
    popupDiv.createEl("p", { text: "File Name:" });
    const nameInput = popupDiv.createEl("input", { type: "text", value: "Unnamed" });
    popupDiv.createEl("p", { text: "Parent Folder ID:" });
    const parentFolderIDInput = popupDiv.createEl("input", { type: "text", value: "" + this.id });
    for (let i = 0; i < CFEFileHandler.KnownFileTypes.length; i++) {
      const option = fileTypeDropdown.createEl("option");
      option.value = CFEFileHandler.KnownFileTypes[i];
      option.text = CFEFileHandler.KnownFileTypes[i];
      fileTypeDropdown.options.add(option);
    }
    const submitButton = popupDiv.createEl("button", { text: "Create" });
    const onExit = () => {
      popupDiv.remove();
    };
    const onSubmit = async () => {
      await CFEFileHandler.CreateNew(snv, fileTypeDropdown.value, parseInt(parentFolderIDInput.value), nameInput.value);
      exitButton.click();
      const resettedFolder = await CFEFileHandler.LoadFile(snv, this.id);
      await resettedFolder.Display(snv, mainDiv);
    };
    exitButton.onclick = onExit;
    submitButton.onclick = onSubmit;
    popupDiv.onkeydown = async (event) => {
      if (event.key === "Escape") {
        onExit();
      } else if (event.key === "Enter") {
        await onSubmit();
      }
    };
  }
  LoadFileSelectionUI(snv, mainDiv, div) {
    div.empty();
    const popupDiv = div.createDiv("cfe-popup");
    const wrapperDiv = popupDiv.createDiv();
    wrapperDiv.style.position = "relative";
    popupDiv.createEl("p", { text: "Choose your files" });
    const fileInput = popupDiv.createEl("input", { type: "file" });
    fileInput.multiple = true;
    popupDiv.createEl("p", { text: "Parent Folder ID: " });
    const parentFolderIDInput = popupDiv.createEl("input", { type: "text", value: "" + this.id });
    const exitButton = wrapperDiv.createEl("button", { text: "X", cls: "cfe-remove-button" });
    exitButton.style.position = "absolute";
    exitButton.style.top = "0%";
    exitButton.style.right = "0%";
    const submitButton = popupDiv.createEl("button", { text: "Create" });
    const onExit = () => {
      popupDiv.remove();
    };
    const onSubmit = async () => {
      const fileArray = fileInput.files;
      const parentFolderID = parseInt(parentFolderIDInput.value);
      if (fileArray !== null) {
        for (let i = 0; i < fileArray.length; i++) {
          const cfeFile = await CFEFileHandler.CreateNew(snv, "Single Media File", parentFolderID, fileArray[i].name);
          const mediaFile = Object.assign(new SingleMediaFile(), cfeFile);
          await mediaFile.SetFileTo(snv, fileArray[i]);
          await mediaFile.Save(snv);
        }
        exitButton.click();
        const resettedFolder = await CFEFileHandler.LoadFile(snv, this.id);
        await resettedFolder.Display(snv, mainDiv);
      }
    };
    exitButton.onclick = onExit;
    submitButton.onclick = onSubmit;
    popupDiv.onkeydown = async (event) => {
      if (event.key === "Escape") {
        onExit();
      } else if (event.key === "Enter") {
        await onSubmit();
      }
    };
  }
};

// classes/playlist.ts
var Playlist = class extends CFEFile {
  static getNextVideoIDInOrder(playlist) {
    let nextVideoIndex = playlist.currentVideoIndex + 1;
    if (nextVideoIndex >= playlist.videoIDs.length) {
      nextVideoIndex = 0;
    }
    return nextVideoIndex;
  }
  static getNextVideoIDShuffled(playlist) {
    let nextVideoIndex = Math.random() * playlist.videoIDs.length;
    nextVideoIndex = Math.floor(nextVideoIndex);
    return nextVideoIndex;
  }
  static async loadNextVideo(sourceAndVault, playlist, videoElement) {
    if (playlist.videoOrder === "shuffled") {
      playlist.currentVideoIndex = Playlist.getNextVideoIDShuffled(playlist);
    } else {
      playlist.currentVideoIndex = Playlist.getNextVideoIDInOrder(playlist);
    }
    const nextVideo = await CFEFileHandler.LoadFile(sourceAndVault, playlist.videoIDs[playlist.currentVideoIndex]);
    videoElement.src = await nextVideo.getSrc(sourceAndVault);
  }
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const newPlaylistFile = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    newPlaylistFile.videoIDs = [];
    return newPlaylistFile;
  }
  async Display(snv, container) {
    await super.Display(snv, container);
    this.currentVideoIndex = 0;
    const videoDisplayContainer = container.createDiv("cfe-display-video");
    const videoElement = videoDisplayContainer.createEl("video");
    const buttonsContainer = container.createDiv("hbox");
    const hideButton = buttonsContainer.createEl("button", { text: "hide video" });
    hideButton.onclick = () => {
      if (hideButton.textContent === "hide video") {
        hideButton.textContent = "show video";
        videoElement.style.display = "none";
      } else {
        hideButton.textContent = "hide video";
        videoElement.style.display = "flex";
      }
    };
    const shuffleButton = buttonsContainer.createEl("button", { text: "shuffle" });
    this.videoOrder = "in order";
    shuffleButton.onclick = () => {
      if (shuffleButton.textContent === "shuffle") {
        shuffleButton.textContent = "go in order";
        this.videoOrder = "shuffled";
      } else {
        shuffleButton.textContent = "shuffle";
        this.videoOrder = "in order";
      }
    };
    const nextButton = buttonsContainer.createEl("button", { text: "next video" });
    nextButton.onclick = async () => {
      await Playlist.loadNextVideo(snv, this, videoElement);
    };
    try {
      const firstVideo = await CFEFileHandler.LoadFile(snv, this.videoIDs[this.currentVideoIndex]);
      videoElement.src = await firstVideo.getSrc(snv);
      videoElement.autoplay = true;
      videoElement.controls = true;
      videoElement.ontimeupdate = async () => {
        if (videoElement.ended) {
          await Playlist.loadNextVideo(snv, this, videoElement);
        }
      };
    } finally {
      container.createEl("p", { text: "Change files" });
      let count = 0;
      const mediaIDInputDiv = container.createDiv("vbox");
      const newFileButton = container.createEl("button", { text: "Add File" });
      for (let i = 0; i < this.videoIDs.length; i++) {
        const currentIndex = count;
        count++;
        const mediaIDDiv = mediaIDInputDiv.createDiv("hbox");
        const idInput = mediaIDDiv.createEl("input", { type: "text", value: "" + this.videoIDs[currentIndex] });
        const deleteButton = mediaIDDiv.createEl("button", { text: "delete" });
        deleteButton.onclick = () => {
          mediaIDDiv.remove();
          this.videoIDs.splice(currentIndex, 1);
          this.Display(snv, container);
        };
        idInput.onchange = () => {
          this.videoIDs[currentIndex] = parseInt(idInput.value);
          this.Save(snv);
        };
      }
      newFileButton.onclick = () => {
        const currentIndex = count;
        count++;
        const mediaIDDiv = mediaIDInputDiv.createDiv("hbox");
        const idInput = mediaIDDiv.createEl("input", { type: "text" });
        const deleteButton = mediaIDDiv.createEl("button", { text: "delete" });
        deleteButton.onclick = () => {
          mediaIDDiv.remove();
          this.videoIDs.splice(currentIndex, 1);
          this.Display(snv, container);
        };
        idInput.onchange = () => {
          this.videoIDs[currentIndex] = parseInt(idInput.value);
          this.Save(snv);
        };
      };
    }
  }
};

// classes/variant-media-file.ts
var VariantMediaFile = class extends RealFile {
  async getSrc(snv, index = null) {
    if (index === null) {
      index = Math.floor(Math.random() * this.variantIDs.length);
    }
    const containedMedia = await CFEFileHandler.LoadFile(snv, this.variantIDs[index]);
    return await containedMedia.getSrc(snv);
  }
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const newMediaFile = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    newMediaFile.variantIDs = [];
    return newMediaFile;
  }
  async Display(snv, container) {
    await super.Display(snv, container);
    const imageDisplayContainer = container.createDiv("vbox");
    imageDisplayContainer.createEl("p", { text: "Change files" });
    const mediaIDInputDiv = imageDisplayContainer.createDiv("vbox");
    const newFileButton = imageDisplayContainer.createEl("button", { text: "Add File" });
    for (let i = 0; i < this.variantIDs.length; i++) {
      const currentIndex = i;
      const mediaIDDiv = mediaIDInputDiv.createDiv("hbox");
      const idInput = mediaIDDiv.createEl("input", { type: "text", value: "" + this.variantIDs[currentIndex] });
      const deleteButton = mediaIDDiv.createEl("button", { text: "delete" });
      deleteButton.className = "cfe-remove-button";
      deleteButton.onclick = async () => {
        mediaIDDiv.remove();
        this.variantIDs.splice(currentIndex, 1);
        await this.Save(snv);
        await this.Display(snv, container);
      };
      idInput.onchange = async () => {
        this.variantIDs[currentIndex] = parseInt(idInput.value);
        await this.Save(snv);
        await this.Display(snv, container);
      };
    }
    newFileButton.onclick = async () => {
      this.variantIDs.push(-1);
      await this.Save(snv);
      await this.Display(snv, container);
    };
    const mediaDiv = imageDisplayContainer.createDiv("vbox");
    await this.DisplayMediaOnly(mediaDiv, snv);
  }
  async DisplayMediaOnly(mediaDiv, snv, index = -1) {
    if (index === -1) {
      index = Math.floor(Math.random() * this.variantIDs.length);
    }
    const containedMedia = await CFEFileHandler.LoadFile(snv, this.variantIDs[index]);
    await containedMedia.DisplayMediaOnly(mediaDiv, snv);
  }
};

// classes/source-folder-shortcut.ts
var SourceFolderShortcut = class extends CFEFile {
  /**
   * @override Folder layer:
   * 
   * initializes the contained file ids array for the folder object
   */
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const unfinishedFolder = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    unfinishedFolder.pathToOtherSource = "";
    return unfinishedFolder;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    const inputDiv = mainDiv.createDiv("vbox");
    inputDiv.createEl("p", { text: "Path to Other Source Folder" });
    const pathInput = inputDiv.createEl("input", { type: "text" });
    const goButton = inputDiv.createEl("button", { text: "Go" });
    pathInput.onchange = async () => {
      this.pathToOtherSource = pathInput.value;
      await this.Save(snv);
    };
    goButton.onclick = async () => {
      const otherSource = await SourceFolder.CreateOrLoadSourceFolder(this.pathToOtherSource, snv.vault);
      otherSource.Display(mainDiv, snv.vault);
    };
  }
};

// classes/conlangs/hwayu-text.ts
var Hwayu = class {
  static Display(div, text = "", fontSize = 20, isVertical = true) {
    const textElement = div.createDiv();
    textElement.textContent = text;
    textElement.style.fontFamily = isVertical ? "HwayuReal" : "HwayuHorizontal";
    textElement.style.fontSize = fontSize + "px";
    if (isVertical) {
      textElement.style.writingMode = "vertical-lr";
      textElement.style.textOrientation = "upright";
    }
    return textElement;
  }
  static CreateTextArea(div, existingText = "", fontSize = 20, isVertical = true) {
    const textArea = div.createEl("textarea", { text: existingText });
    textArea.style.fontFamily = isVertical ? "HwayuReal" : "HwayuHorizontal";
    textArea.style.fontSize = fontSize + "px";
    if (isVertical) {
      textArea.style.writingMode = "vertical-lr";
      textArea.style.textOrientation = "upright";
    }
    textArea.spellcheck = false;
    return textArea;
  }
  static CreateTextInput(div, existingText = "", fontSize = 20, isVertical = true) {
    const textInput = div.createEl("input", { type: "text", value: existingText });
    textInput.style.fontFamily = isVertical ? "HwayuReal" : "HwayuHorizontal";
    textInput.style.fontSize = fontSize + "px";
    if (isVertical) {
      textInput.style.writingMode = "vertical-lr";
      textInput.style.textOrientation = "upright";
    }
    textInput.spellcheck = false;
    return textInput;
  }
};

// classes/conlangs/photolang-text.ts
var PhotoLang = class {
  static Display(div, text = "", fontSize = 10, moveSpeeds = null, durations = null, doLoop = false) {
    const line = new PhotoLine(text);
    if (!moveSpeeds) {
      moveSpeeds = [100, 250, 500];
    }
    if (!durations) {
      durations = [0, 500];
    }
    const displayDiv = div.createDiv();
    line.Speak(displayDiv, fontSize, moveSpeeds, durations, doLoop);
    return displayDiv;
  }
  static CreateTextArea(div, existingText = "", fontSize = 17.5) {
    const textArea = div.createEl("textarea", { text: existingText });
    textArea.style.fontSize = fontSize + "px";
    textArea.spellcheck = false;
    return textArea;
  }
  static CreateTextInput(div, existingText = "", fontSize = 17.5) {
    return new PhotoLangInput(div, existingText, fontSize, [100, 250, 500], [0, 500]);
  }
};
var PhotoLangInput = class {
  get value() {
    return this.line.toText();
  }
  set value(newVal) {
    this.line = new PhotoLine(newVal);
  }
  get style() {
    return this.mainDiv.style;
  }
  constructor(div, value, fontSize = 17.5, moveSpeeds, durations) {
    const hbox = div.createDiv("hbox");
    this.mainDiv = hbox;
    this.line = new PhotoLine(value);
    this.Display(fontSize, moveSpeeds, durations);
  }
  Display(fontSize = 17.5, moveSpeeds, durations) {
    this.mainDiv.empty();
    for (let i = 0; i < this.line.words.length; i++) {
      const index = i;
      const word = this.line.words[i];
      const wordDiv = this.mainDiv.createDiv("vbox");
      const deleteButton = wordDiv.createEl("button", { text: "delete" });
      deleteButton.className = "cfe-remove-button";
      wordDiv.style.width = fontSize * 3.25 + "px";
      const speakDiv = wordDiv.createDiv();
      speakDiv.style.fontSize = fontSize + "px";
      speakDiv.style.fontFamily = "Photolang";
      speakDiv.style.position = "relative";
      speakDiv.style.height = fontSize * 3.25 + "px";
      speakDiv.style.width = fontSize * 3.25 + "px";
      word.Speak(speakDiv, fontSize, moveSpeeds, durations, true);
      const input = wordDiv.createEl("input", { type: "text", value: word.toText() });
      input.spellcheck = false;
      input.style.fontSize = fontSize * 0.5 + "px";
      deleteButton.onclick = () => {
        this.line.words.splice(index, 1);
        this.Display(fontSize, moveSpeeds, durations);
      };
      input.onchange = async () => {
        this.line.words[index] = new PhotoWord(input.value);
        await this.onchange();
      };
      input.oninput = async () => {
        this.line.words[index] = new PhotoWord(input.value);
        await this.oninput();
      };
    }
    const addButton = this.mainDiv.createEl("button", { text: "+" });
    addButton.onclick = () => {
      this.line.words.push(new PhotoWord(""));
      this.Display(fontSize, moveSpeeds, durations);
    };
  }
};
var PhotoLine = class {
  toText() {
    let output = "";
    for (let i = 0; i < this.words.length; i++) {
      output += this.words[i].toText();
      output += "|||";
    }
    return output;
  }
  constructor(textContent = "") {
    this.words = [];
    const textArray = textContent.split("|||").filter((c) => c !== "");
    for (let i = 0; i < textArray.length; i++) {
      const wordText = textArray[i];
      const newWord = new PhotoWord(wordText);
      this.words.push(newWord);
    }
  }
  async Speak(div, textSize, moveSpeeds, durations, doLoop = false) {
    div.style.fontSize = textSize + "px";
    div.style.fontFamily = "Photolang";
    div.style.position = "relative";
    div.style.height = textSize * 3.25 + "px";
    div.style.width = textSize * 3.25 + "px";
    for (let i = 0; i < this.words.length; i++) {
      const photoword = this.words[i];
      await photoword.Speak(div, textSize, moveSpeeds, durations, false);
      await sleep(200);
      if (doLoop && i === this.words.length - 1) {
        i = -1;
      }
    }
    div.remove();
  }
  async DisplayStatic(div, textSize, moveSpeeds, durations) {
    if (!moveSpeeds) {
      moveSpeeds = [100, 250, 500];
    }
    if (!durations) {
      durations = [0, 500];
    }
    const lineDiv = div.createDiv("hbox");
    for (let i = 0; i < this.words.length; i++) {
      const wordDiv = lineDiv.createDiv();
      wordDiv.className = "cfe-photoglyph";
      wordDiv.style.fontSize = textSize + "px";
      wordDiv.style.fontFamily = "Photolang";
      wordDiv.style.position = "relative";
      wordDiv.style.height = textSize * 3.25 + "px";
      wordDiv.style.width = textSize * 3.25 + "px";
      this.words[i].Speak(wordDiv, textSize, moveSpeeds, durations, true);
    }
  }
};
var PhotoWord = class {
  toText() {
    let output = "";
    for (let i = 0; i < this.glyphs.length; i++) {
      output += this.glyphs[i].toText();
      output += "   ";
    }
    return output;
  }
  constructor(textContent = "") {
    this.glyphs = [];
    const textArray = textContent.split("   ").filter((c) => c !== "");
    for (let i = 0; i < textArray.length; i++) {
      const glyphText = textArray[i];
      const newGlyph = new PhotoGlyph(glyphText);
      this.glyphs.push(newGlyph);
    }
  }
  async Speak(div, textSize, moveSpeeds, durations, doLoop = false) {
    const textDiv = div.createDiv();
    textDiv.style.position = "absolute";
    textDiv.style.bottom = textSize + "px";
    textDiv.style.transitionProperty = "bottom, left, color";
    for (let i = 0; i < this.glyphs.length; i++) {
      const photoGlyph = this.glyphs[i];
      textDiv.textContent = photoGlyph.shape;
      textDiv.style.left = photoGlyph.x * textSize + "px";
      textDiv.style.bottom = photoGlyph.y * textSize + "px";
      textDiv.style.color = photoGlyph.color;
      if (doLoop && i === this.glyphs.length - 1) {
        i = -1;
      }
      textDiv.style.transition = moveSpeeds[photoGlyph.moveSpeed] + "ms";
      await sleep(moveSpeeds[photoGlyph.moveSpeed] + durations[photoGlyph.duration]);
    }
    textDiv.remove();
  }
};
var PhotoGlyph = class {
  constructor(glyphText) {
    let j = 0;
    let skipNext = false;
    switch (glyphText[j]) {
      case ".":
        this.moveSpeed = 0;
        break;
      case "-":
        this.moveSpeed = 1;
        break;
      case "=":
        this.moveSpeed = 2;
        break;
    }
    j++;
    switch (glyphText[j]) {
      case ".":
        this.duration = 0;
        break;
      case "-":
        this.duration = 1;
        break;
    }
    j++;
    this.shape = glyphText[j];
    j++;
    let hue1 = 0;
    switch (glyphText[j]) {
      case "r":
        hue1 = 0;
        break;
      case "o":
        hue1 = 40;
        break;
      case "y":
        hue1 = 60;
        break;
      case "g":
        hue1 = 120;
        break;
      case "c":
        hue1 = 180;
        break;
      case "b":
        hue1 = 240;
        break;
      case "p":
        hue1 = 270;
        break;
      case ".":
        this.hue = 0;
        this.saturation = 0;
        skipNext = true;
        break;
    }
    j++;
    if (!skipNext) {
      let hue2 = 0;
      switch (glyphText[j]) {
        case "r":
          hue2 = 0;
          break;
        case "o":
          hue2 = 40;
          break;
        case "y":
          hue2 = 60;
          break;
        case "g":
          hue2 = 120;
          break;
        case "c":
          hue2 = 180;
          break;
        case "b":
          hue2 = 240;
          break;
        case "p":
          hue2 = 270;
          break;
        default:
          this.hue = hue1;
          skipNext = true;
          break;
      }
      if (!skipNext) {
        if (hue1 === 0 && hue2 === 270 || hue1 === 270 && hue2 === 0) {
          this.hue = 315;
        } else {
          this.hue = (hue1 + hue2) / 2;
        }
        j++;
      }
    }
    skipNext = false;
    const saturationText = glyphText[j];
    switch (saturationText) {
      case "0":
        this.saturation = 0;
        break;
      case "1":
        this.saturation = 0.25;
        break;
      case "2":
        this.saturation = 0.5;
        break;
      case "3":
        this.saturation = 0.75;
        break;
      case "4":
        this.saturation = 1;
        break;
    }
    j++;
    const valueText = glyphText[j];
    switch (valueText) {
      case "0":
        this.value = 0;
        break;
      case "1":
        this.value = 0.1;
        break;
      case "2":
        this.value = 0.2;
        break;
      case "3":
        this.value = 0.5;
        break;
      case "4":
        this.value = 1;
        break;
    }
    j++;
    const opacityText = glyphText[j];
    switch (opacityText) {
      case ".":
        this.opacity = 0;
        break;
      case "-":
        this.opacity = 0.5;
        break;
      case "=":
        this.opacity = 1;
        break;
    }
    j++;
    const locationInfo = glyphText.substring(j);
    if (locationInfo.contains("<")) {
      this.x = 0;
    } else if (locationInfo.contains(">")) {
      this.x = 2;
    } else {
      this.x = 1;
    }
    if (locationInfo.contains("v")) {
      this.y = 0;
    } else if (locationInfo.contains("^")) {
      this.y = 2;
    } else {
      this.y = 1;
    }
  }
  toText() {
    let output = "";
    switch (this.moveSpeed) {
      case 0:
        output += ".";
        break;
      case 1:
        output += "-";
        break;
      case 2:
        output += "=";
        break;
    }
    switch (this.duration) {
      case 0:
        output += ".";
        break;
      case 1:
        output += "-";
        break;
    }
    output += this.shape;
    switch (this.hue) {
      case 0:
        output += "r";
        break;
      case 20:
        output += "ro";
        break;
      case 40:
        output += "o";
        break;
      case 50:
        output += "yo";
        break;
      case 60:
        output += "yo";
        break;
      case 90:
        output += "yg";
        break;
      case 120:
        output += "g";
        break;
      case 150:
        output += "cg";
        break;
      case 180:
        output += "c";
        break;
      case 210:
        output += "cb";
        break;
      case 240:
        output += "b";
        break;
      case 255:
        output += "bp";
        break;
      case 270:
        output += "p";
        break;
      case 315:
        output += "pr";
        break;
    }
    switch (this.saturation) {
      case 0:
        output += "0";
        break;
      case 0.25:
        output += "1";
        break;
      case 0.5:
        output += "2";
        break;
      case 0.75:
        output += "3";
        break;
      case 1:
        output += "4";
        break;
    }
    switch (this.value) {
      case 0:
        output += "0";
        break;
      case 0.1:
        output += "1";
        break;
      case 0.2:
        output += "2";
        break;
      case 0.5:
        output += "3";
        break;
      case 1:
        output += "4";
        break;
    }
    switch (this.opacity) {
      case 0:
        output += ".";
        break;
      case 0.5:
        output += "-";
        break;
      case 1:
        output += "=";
        break;
    }
    switch (this.x) {
      case 0:
        output += "<";
        break;
      case 2:
        output += ">";
        break;
    }
    switch (this.y) {
      case 0:
        output += "v";
        break;
      case 2:
        output += "^";
        break;
    }
    return output;
  }
  get color() {
    let lightness = (2 - this.saturation) * this.value / 2;
    let newS = this.saturation * this.value / (lightness < 1 ? lightness * 2 : 2 - lightness * 2);
    if (lightness === 0 || lightness === 1) {
      newS = 0;
    }
    lightness *= 100;
    newS *= 100;
    return "hsla(" + this.hue + "," + newS + "%," + lightness + "%," + this.opacity + ")";
  }
  DisplayStatic(div, textSize) {
    const outerDiv = div.createDiv();
    outerDiv.style.position = "relative";
    outerDiv.style.width = textSize * 3.25 + "px";
    outerDiv.style.height = textSize * 3.25 + "px";
    outerDiv.className = "cfe-photoglyph";
    const glyphDiv = outerDiv.createDiv();
    glyphDiv.style.position = "absolute";
    glyphDiv.textContent = this.shape;
    glyphDiv.style.left = this.x * textSize + "px";
    glyphDiv.style.bottom = this.y * textSize + "px";
    glyphDiv.style.color = this.color;
  }
};

// classes/conlang-dictionary.ts
var ConlangDictionary = class extends CFEFile {
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const unfinishedDictionary = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    unfinishedDictionary.language = "Hwayu";
    unfinishedDictionary.words = [];
    unfinishedDictionary.searchTerm = "";
    unfinishedDictionary.searchInConlang = false;
    return unfinishedDictionary;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    const languageDropdown = mainDiv.createEl("select");
    languageDropdown.createEl("option", { text: "Hwayu", value: "Hwayu" });
    languageDropdown.createEl("option", { text: "Photolang", value: "Photolang" });
    languageDropdown.value = this.language;
    const addWordDiv = mainDiv.createDiv("vbox");
    await this.CreateNewWordEditor(snv, mainDiv, addWordDiv);
    languageDropdown.onchange = async () => {
      this.language = languageDropdown.value;
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    await this.DisplayList(snv, mainDiv);
  }
  async DisplayWord(snv, mainDiv, div, index) {
    div.empty();
    const modeButton = div.createEl("button", { text: "Edit" });
    modeButton.style.top = "0";
    modeButton.style.right = "0";
    modeButton.onclick = async () => {
      await this.EditWord(snv, mainDiv, div, index);
    };
    const wordDiv = div.createDiv("hbox");
    wordDiv.style.gap = "1%";
    wordDiv.style.fontSize = "25px";
    const conlangWord = this.words[index][0];
    const definition = this.words[index][1];
    const conlangWordDiv = this.DisplayConlangText(wordDiv, conlangWord);
    conlangWordDiv.classList.add("cfe-pointer-hover");
    wordDiv.createEl("p", { text: ":" });
    wordDiv.createEl("p", { text: definition });
    conlangWordDiv.onclick = async () => {
      try {
        await navigator.clipboard.writeText(conlangWord);
      } catch (err) {
        console.error("Failed to copy text: ", err);
      }
    };
  }
  async EditWord(snv, mainDiv, div, index) {
    div.empty();
    const buttonsDiv = div.createDiv("hbox");
    const modeButton = buttonsDiv.createEl("button", { text: "View" });
    modeButton.onclick = async () => {
      await this.DisplayWord(snv, mainDiv, div, index);
    };
    const deleteButton = buttonsDiv.createEl("button", { text: "Delete" });
    deleteButton.classList = "cfe-remove-button";
    deleteButton.onclick = async () => {
      this.words.splice(index, 1);
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    const wordDiv = div.createDiv("vbox");
    wordDiv.style.fontSize = "25px";
    wordDiv.createEl("p", { text: "Word in " + this.language });
    const conlangWord = this.words[index][0];
    const definition = this.words[index][1];
    const newWordInput = this.DisplayConlangEditor(wordDiv, conlangWord);
    wordDiv.createEl("p", { text: "Definition" });
    const definitionInput = wordDiv.createEl("input", { type: "text", value: definition });
    definitionInput.style.fontSize = "25px";
    const onSubmit = async () => {
      this.words[index] = [newWordInput.value, definitionInput.value];
      this.ReSort(index);
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    div.onkeydown = async (event) => {
      if (event.key === "Enter") {
        await onSubmit();
      }
    };
  }
  CreateNewWordEditor(snv, mainDiv, div) {
    div.createEl("p", { text: "Add New Word:" });
    div.createEl("p", { text: "Word in " + this.language });
    const newWordInput = this.DisplayConlangEditor(div);
    div.createEl("p", { text: "Definition" });
    const definitionInput = div.createEl("input", { type: "text", value: "" });
    const submitButton = div.createEl("button", { text: "submit" });
    const onSubmit = async () => {
      this.words.push([newWordInput.value, definitionInput.value]);
      this.ReSort(this.words.length - 1);
      await this.Save(snv);
      await this.Display(snv, mainDiv);
    };
    submitButton.onclick = onSubmit;
    div.onkeydown = async (event) => {
      if (event.key === "Enter") {
        await onSubmit();
      }
    };
  }
  DisplayConlangEditor(div, existingWord = "") {
    switch (this.language) {
      case "Hwayu":
      default:
        return Hwayu.CreateTextInput(div, existingWord, 25, false);
      case "Photolang":
        return PhotoLang.CreateTextInput(div, existingWord, 25);
    }
  }
  DisplayConlangText(div, existingWord = "") {
    switch (this.language) {
      case "Hwayu":
      default:
        return Hwayu.Display(div, existingWord, 25, false);
      case "Photolang":
        return PhotoLang.Display(div, existingWord, 25, null, null, true);
    }
  }
  async DisplayList(snv, div) {
    div.createEl("p", { text: "Search in " + this.language + "?" });
    const checkbox = div.createEl("input", { type: "checkbox" });
    checkbox.checked = this.searchInConlang;
    div.createEl("p", { text: "Search term" });
    const conlangSearch = this.DisplayConlangEditor(div, this.searchTerm);
    const englishSearch = div.createEl("input", { type: "text", value: this.searchTerm });
    let prevElement = checkbox.checked ? englishSearch : conlangSearch;
    let currentElement = checkbox.checked ? conlangSearch : englishSearch;
    prevElement.style.width = "100%";
    currentElement.style.width = "100%";
    this.searchTerm = prevElement.value;
    prevElement.style.display = "none";
    currentElement.value = this.searchTerm;
    currentElement.style.display = "";
    const resultsDiv = div.createDiv("cfe-dictionary-grid");
    const refreshResults = () => {
      this.searchTerm = currentElement.value;
      this.searchInConlang = checkbox.checked;
      resultsDiv.empty();
      for (let i = 0; i < this.words.length; i++) {
        if (this.words[i][checkbox.checked ? 0 : 1].contains(currentElement.value)) {
          const wordDiv = resultsDiv.createDiv("cfe-dictionary-word");
          this.DisplayWord(snv, div, wordDiv, i);
        }
      }
    };
    refreshResults();
    conlangSearch.oninput = refreshResults;
    englishSearch.oninput = refreshResults;
    checkbox.onchange = () => {
      resultsDiv.empty();
      prevElement = checkbox.checked ? englishSearch : conlangSearch;
      currentElement = checkbox.checked ? conlangSearch : englishSearch;
      this.searchTerm = prevElement.value;
      prevElement.style.display = "none";
      currentElement.value = this.searchTerm;
      currentElement.style.display = "";
      refreshResults();
    };
  }
  ReSort(indexOfChangedWord) {
    const changedWord = this.words.splice(indexOfChangedWord, 1)[0];
    let i = 0;
    let left = 0;
    let right = this.words.length - 1;
    while (left <= right) {
      const mid = Math.floor((left + right) / 2);
      if (this.words[mid][0] < changedWord[0]) {
        left = mid + 1;
        i = left;
      } else {
        right = mid - 1;
        i = mid;
      }
    }
    this.words.splice(i, 0, changedWord);
  }
};

// classes/story.ts
var _Story = class extends CFEFile {
  MakeVertical(el) {
    el.style.writingMode = "vertical-lr";
    el.style.textOrientation = "upright";
  }
  CreateTextInput(div, existingWord = "") {
    let input;
    switch (this.language) {
      case "Hwayu":
        return Hwayu.CreateTextInput(div, existingWord, this.fontSize, this.doVertical);
      case "Photolang":
        return PhotoLang.CreateTextInput(div, existingWord, this.fontSize);
      default:
        input = div.createEl("input", { type: "text", value: existingWord });
        input.style.fontSize = this.fontSize + "px";
        return input;
    }
  }
  DisplayLineEdit(div, line) {
    const input = this.CreateTextArea(div, line.content);
    const speaker = this.characters[line.speakerIndex];
    if (this.language !== "Photolang") {
      input.style.backgroundColor = speaker.backgroundColor;
      input.style.color = speaker.color;
    }
    if (this.doVertical) {
      this.MakeVertical(input);
    }
    return input;
  }
  CreateTextArea(div, existingWord = "") {
    let input;
    switch (this.language) {
      case "Hwayu":
        return Hwayu.CreateTextArea(div, existingWord, this.fontSize, this.doVertical);
      case "Photolang":
        return PhotoLang.CreateTextInput(div, existingWord, this.fontSize);
      default:
        input = div.createEl("textarea", { text: existingWord });
        input.style.fontSize = this.fontSize + "px";
        return input;
    }
  }
  DisplayText(div, fontSize = this.fontSize, existingWord = "") {
    switch (this.language) {
      case "Hwayu":
        return Hwayu.Display(div, existingWord, fontSize, this.doVertical);
      case "Photolang":
        return PhotoLang.Display(div, existingWord, fontSize, null, null, true);
      default: {
        const text = div.createEl("p", { text: existingWord });
        text.style.fontSize = fontSize + "px";
        return text;
      }
    }
  }
  static async CreateNewFileForLayer(snv, fileType, parentFolderID, name) {
    const newStoryFile = await super.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
    newStoryFile.currentPageIndex = 0;
    newStoryFile.pages = [];
    newStoryFile.characters = [];
    newStoryFile.language = "English";
    newStoryFile.doVertical = false;
    return newStoryFile;
  }
  async Display(snv, mainDiv) {
    await super.Display(snv, mainDiv);
    this.LoadStoryUI(snv, mainDiv.createDiv("vbox"));
  }
  LoadStoryUI(snv, mainDiv) {
    mainDiv.empty();
    mainDiv.createEl("p", { text: "Go to page number:" });
    const pageSelectDiv = mainDiv.createDiv("hbox");
    const pageNumberInput = pageSelectDiv.createEl("input", { type: "text", value: "" + (this.currentPageIndex + 1) });
    pageSelectDiv.createEl("p", { text: "/" + this.pages.length });
    const goButton = pageSelectDiv.createEl("button", { text: "Go" });
    goButton.onclick = () => {
      this.currentPageIndex = parseInt(pageNumberInput.value) - 1;
      this.LoadCurrentPageEdit(snv, mainDiv);
    };
    mainDiv.createEl("p", { text: "Font Size (in px):" });
    const fontSizeInput = mainDiv.createEl("input", { type: "text" });
    fontSizeInput.value = this.fontSize ? "" + this.fontSize : "17.5";
    fontSizeInput.onchange = async () => {
      this.fontSize = parseFloat(fontSizeInput.value);
      await this.Save(snv);
      this.LoadStoryUI(snv, mainDiv);
    };
    mainDiv.createEl("p", { text: "Language:" });
    const languageInput = mainDiv.createEl("select");
    for (let i = 0; i < _Story.knownLanguages.length; i++) {
      languageInput.createEl("option", { text: _Story.knownLanguages[i], value: _Story.knownLanguages[i] });
    }
    languageInput.value = this.language;
    languageInput.onchange = async () => {
      this.language = languageInput.value;
      await this.Save(snv);
      this.LoadStoryUI(snv, mainDiv);
    };
    mainDiv.createEl("p", { text: "Vertical Text" });
    const doVerticalBox = mainDiv.createEl("input", { type: "checkbox" });
    doVerticalBox.checked = this.doVertical;
    doVerticalBox.onclick = async () => {
      this.doVertical = doVerticalBox.checked;
      await this.Save(snv);
      this.LoadStoryUI(snv, mainDiv);
    };
    this.LoadCharacterEditorUI(snv, mainDiv);
  }
  LoadCharacterEditorUI(snv, div) {
    const charEditorDiv = div.createDiv();
    charEditorDiv.className = this.doVertical ? "hbox" : "vbox";
    for (let i = 0; i < this.characters.length; i++) {
      const currentIndex = i;
      const charDiv = charEditorDiv.createDiv();
      charDiv.className = this.doVertical ? "vbox" : "hbox";
      charDiv.createEl("p", { text: "Name: " });
      const nameInput = this.CreateTextInput(charDiv, this.characters[currentIndex].name);
      if (this.language !== "Photolang") {
        nameInput.style.backgroundColor = this.characters[currentIndex].backgroundColor;
        nameInput.style.color = this.characters[currentIndex].color;
      }
      nameInput.onchange = async () => {
        this.characters[currentIndex].name = nameInput.value;
        await this.Save(snv);
        this.LoadStoryUI(snv, div);
      };
      if (this.doVertical) {
        nameInput.style.height = "fit-content";
      } else {
        nameInput.style.width = "fit-content";
      }
      if (this.language !== "Photolang") {
        this.LoadCharacterColorSelectionUI(snv, div, charEditorDiv, currentIndex);
      }
    }
    const addCharButton = charEditorDiv.createEl("button", { text: "Add Character" });
    addCharButton.onclick = async () => {
      this.characters.push(new Character());
      await this.Save(snv);
      charEditorDiv.remove();
      this.LoadCharacterEditorUI(snv, div);
    };
  }
  LoadCharacterColorSelectionUI(snv, div, charEditorDiv, currentIndex) {
    const colorDiv = charEditorDiv.createDiv();
    colorDiv.className = this.doVertical ? "vbox" : "hbox";
    colorDiv.createEl("p", { text: "Text Color:" });
    const colorInput = colorDiv.createEl("input", { type: "color", value: this.characters[currentIndex].color });
    const swapButton = colorDiv.createEl("button", { text: "Swap" });
    colorInput.onchange = async () => {
      this.characters[currentIndex].color = colorInput.value;
      await this.Save(snv);
      charEditorDiv.remove();
      this.LoadCharacterEditorUI(snv, div);
    };
    colorDiv.createEl("p", { text: "Background Color:" });
    const backgroundInput = colorDiv.createEl("input", { type: "color", value: this.characters[currentIndex].backgroundColor });
    backgroundInput.onchange = async () => {
      this.characters[currentIndex].backgroundColor = backgroundInput.value;
      await this.Save(snv);
      charEditorDiv.remove();
      this.LoadCharacterEditorUI(snv, div);
    };
    swapButton.onclick = async () => {
      this.characters[currentIndex].backgroundColor = colorInput.value;
      if (this.language !== "Photolang") {
        this.characters[currentIndex].color = backgroundInput.value;
      }
      await this.Save(snv);
      charEditorDiv.remove();
      this.LoadCharacterEditorUI(snv, div);
    };
  }
  LoadPageSelector(snv, mainDiv) {
    const buttonsDiv = mainDiv.createDiv("hbox");
    const backButton = buttonsDiv.createEl("button", { text: "-" });
    const pageNumberInput = buttonsDiv.createEl("input", { type: "text", value: "" + (this.currentPageIndex + 1) });
    buttonsDiv.createEl("p", { text: "/" + this.pages.length });
    const nextButton = buttonsDiv.createEl("button", { text: "+" });
    const deleteButton = buttonsDiv.createEl("button", { text: "Delete Page" });
    deleteButton.className = "cfe-remove-button";
    const addButton = buttonsDiv.createEl("button", { text: "Add Page" });
    const editModeButton = buttonsDiv.createEl("button", { text: "Edit Mode" });
    const viewModeButton = buttonsDiv.createEl("button", { text: "View Mode" });
    const homeButton = buttonsDiv.createEl("button", { text: "Return to Story" });
    homeButton.onclick = async () => {
      await this.LoadStoryUI(snv, mainDiv);
    };
    editModeButton.onclick = async () => {
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
    viewModeButton.onclick = async () => {
      await this.LoadCurrentPageDisplayOnly(snv, mainDiv);
    };
    backButton.onclick = async () => {
      if (this.currentPageIndex > 0) {
        this.currentPageIndex--;
        await this.LoadCurrentPageEdit(snv, mainDiv);
      }
    };
    nextButton.onclick = async () => {
      if (this.currentPageIndex < this.pages.length) {
        this.currentPageIndex++;
        await this.LoadCurrentPageEdit(snv, mainDiv);
      }
    };
    pageNumberInput.onchange = async () => {
      this.currentPageIndex = parseInt(pageNumberInput.value) - 1;
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
    deleteButton.onclick = async () => {
      this.pages.splice(this.currentPageIndex, 1);
      await this.Save(snv);
      if (this.currentPageIndex !== 0) {
        this.currentPageIndex--;
      }
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
    addButton.onclick = async () => {
      const defaultPage = new Page();
      const thisPageFileID = this.pages[this.currentPageIndex].mediaFileID;
      if (thisPageFileID !== -1 && thisPageFileID < snv.sourceFolder.fileCount) {
        defaultPage.mediaFileID = thisPageFileID;
      }
      this.pages.splice(this.currentPageIndex + 1, 0, defaultPage);
      await this.Save(snv);
      this.currentPageIndex++;
      await this.LoadCurrentPageEdit(snv, mainDiv);
    };
  }
  async LoadCurrentPageEdit(snv, mainDiv) {
    mainDiv.empty();
    this.LoadPageSelector(snv, mainDiv);
    mainDiv.createEl("p", { text: "Media File ID:" });
    const mediaFileIDInput = mainDiv.createEl("input", { type: "text" });
    const panelDiv = mainDiv.createDiv("hbox");
    const outerMediaDiv = panelDiv.createDiv("vbox");
    const linesDiv = panelDiv.createDiv("vbox");
    const speakDiv = outerMediaDiv.createDiv();
    speakDiv.style.position = "absolute";
    speakDiv.style.top = "0px";
    speakDiv.style.left = "0px";
    const mediaWidthInput = outerMediaDiv.createEl("input", { type: "text" });
    mediaWidthInput.onchange = async () => {
      outerMediaDiv.style.width = mediaWidthInput.value + "%";
      linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
      this.pages[this.currentPageIndex].mediaSizePercentage = parseInt(mediaWidthInput.value);
      await this.Save(snv);
    };
    const mediaDiv = outerMediaDiv.createDiv("vbox");
    outerMediaDiv.style.width = "50%";
    mediaDiv.style.objectFit = "contain";
    linesDiv.style.width = "50%";
    linesDiv.style.maxHeight = "80vh";
    linesDiv.style.position = "sticky";
    linesDiv.style.top = "0%";
    if (this.currentPageIndex < this.pages.length) {
      const currentPage = this.pages[this.currentPageIndex];
      const mediaFileID = currentPage.mediaFileID;
      mediaFileIDInput.value = "" + currentPage.mediaFileID;
      if (mediaFileID > 0) {
        const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
        await mediaFile.DisplayMediaOnly(mediaDiv, snv);
      }
      if (this.pages[this.currentPageIndex].mediaSizePercentage) {
        mediaWidthInput.value = "" + this.pages[this.currentPageIndex].mediaSizePercentage;
        outerMediaDiv.style.width = mediaWidthInput.value + "%";
        linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
      } else {
        mediaWidthInput.value = "50";
        this.pages[this.currentPageIndex].mediaSizePercentage = 50;
        await this.Save(snv);
      }
    } else {
      const defaultPage = new Page();
      const lastPage = this.currentPageIndex - 1;
      if (lastPage >= 0 && this.currentPageIndex !== 0) {
        const lastPageFileID = this.pages[lastPage].mediaFileID;
        const lastPageSize = this.pages[lastPage].mediaSizePercentage;
        defaultPage.mediaSizePercentage = lastPageSize;
        mediaWidthInput.value = "" + lastPageSize;
        outerMediaDiv.style.width = mediaWidthInput.value + "%";
        linesDiv.style.width = 100 - parseInt(mediaWidthInput.value) + "%";
        if (lastPageFileID !== -1 && lastPageFileID < snv.sourceFolder.fileCount) {
          const mediaFileID = lastPageFileID + 1;
          defaultPage.mediaFileID = mediaFileID;
          mediaFileIDInput.value = "" + mediaFileID;
          if (mediaFileID > 0) {
            const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
            await mediaFile.DisplayMediaOnly(mediaDiv, snv);
          }
        }
      }
      this.pages.push(defaultPage);
      await this.Save(snv);
    }
    await this.LoadDialogueLinesEdit(snv, linesDiv, speakDiv);
    mediaFileIDInput.onchange = async () => {
      const currentPage = this.pages[this.currentPageIndex];
      currentPage.mediaFileID = parseInt(mediaFileIDInput.value);
      await this.Save(snv);
      const mediaFile = await CFEFileHandler.LoadFile(snv, currentPage.mediaFileID);
      await mediaFile.DisplayMediaOnly(mediaDiv, snv);
    };
  }
  async LoadCurrentPageDisplayOnly(snv, mainDiv) {
    mainDiv.empty();
    this.LoadPageSelector(snv, mainDiv);
    const panelDiv = mainDiv.createDiv("hbox");
    const outerMediaDiv = panelDiv.createDiv("vbox");
    const linesDiv = panelDiv.createDiv("vbox");
    const speakDiv = outerMediaDiv.createDiv();
    speakDiv.style.position = "absolute";
    speakDiv.style.top = "0px";
    speakDiv.style.left = "0px";
    const mediaDiv = outerMediaDiv.createDiv("vbox");
    outerMediaDiv.style.width = "50%";
    mediaDiv.style.objectFit = "contain";
    linesDiv.style.width = "50%";
    linesDiv.style.maxHeight = "80vh";
    linesDiv.style.position = "sticky";
    linesDiv.style.top = "0%";
    const currentPage = this.pages[this.currentPageIndex];
    const mediaFileID = currentPage.mediaFileID;
    if (mediaFileID > 0) {
      const mediaFile = await CFEFileHandler.LoadFile(snv, mediaFileID);
      await mediaFile.DisplayMediaOnly(mediaDiv, snv);
    }
    if (this.pages[this.currentPageIndex].mediaSizePercentage) {
      const width = this.pages[this.currentPageIndex].mediaSizePercentage;
      outerMediaDiv.style.width = width + "%";
      linesDiv.style.width = 100 - width + "%";
    }
    await this.LoadDialogueLinesDisplayOnly(linesDiv, speakDiv);
  }
  async LoadDialogueLinesEdit(snv, linesDiv, speakDiv) {
    linesDiv.empty();
    const existingLinesDiv = linesDiv.createDiv();
    existingLinesDiv.className = this.doVertical ? "hbox" : "vbox";
    if (this.doVertical) {
      existingLinesDiv.style.overflowX = "scroll";
    } else {
      existingLinesDiv.style.overflowY = "scroll";
    }
    for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
      const currentIndex = i;
      const currentLine = this.pages[this.currentPageIndex].lines[i];
      const speaker = this.characters[currentLine.speakerIndex];
      const lineDiv = existingLinesDiv.createDiv();
      lineDiv.className = this.doVertical ? "vbox" : "hbox";
      const deleteButton = lineDiv.createEl("button", { text: "-" });
      deleteButton.className = "cfe-remove-button";
      deleteButton.onclick = async () => {
        this.pages[this.currentPageIndex].lines.splice(currentIndex, 1);
        await this.Save(snv);
        await this.LoadDialogueLinesEdit(snv, linesDiv, speakDiv);
      };
      if (this.doVertical) {
        this.MakeVertical(deleteButton);
      }
      if (this.language === "Photolang") {
        const playButton = lineDiv.createEl("button", { text: "\u25B7" });
        playButton.onclick = () => {
          const popup = speakDiv.createDiv();
          popup.style.position = "absolute";
          popup.style.top = "0px";
          popup.style.left = "0px";
          const photoline = new PhotoLine(lineInput.value);
          photoline.Speak(popup, 200, [100, 250, 500], [0, 500], false);
        };
        if (this.doVertical) {
          this.MakeVertical(playButton);
        }
      }
      const charDropdownButton = lineDiv.createDiv();
      const charDropdownDiv = charDropdownButton.createDiv();
      charDropdownDiv.style.height = "fit-content";
      charDropdownDiv.style.width = "fit-content";
      charDropdownDiv.style.position = "relative";
      charDropdownButton.onclick = () => {
        const selectDiv = charDropdownDiv.createDiv();
        selectDiv.className = this.doVertical ? "hbox" : "vbox";
        selectDiv.style.position = "absolute";
        selectDiv.style.top = "0%";
        selectDiv.style.left = "0%";
        for (let i2 = 0; i2 < this.characters.length; i2++) {
          const currentCharIndex = i2;
          const currentChar = this.characters[currentCharIndex];
          const currentOption = selectDiv.createDiv();
          if (this.doVertical) {
            this.MakeVertical(currentOption);
          }
          if (this.language !== "Photolang") {
            currentOption.style.backgroundColor = currentChar.backgroundColor;
            currentOption.style.color = currentChar.color;
          }
          currentOption.style.zIndex = "2";
          this.DisplayText(currentOption, 25, currentChar.name);
          currentOption.onclick = async () => {
            this.pages[this.currentPageIndex].lines[currentIndex].speakerIndex = currentCharIndex;
            await this.Save(snv);
            this.LoadDialogueLinesEdit(snv, linesDiv, speakDiv);
          };
        }
      };
      const nameEl = this.DisplayText(charDropdownDiv, 25, this.characters[currentLine.speakerIndex].name);
      if (this.doVertical) {
        this.MakeVertical(nameEl);
      }
      if (this.language !== "Photolang") {
        nameEl.style.backgroundColor = speaker.backgroundColor;
        nameEl.style.color = speaker.color;
      }
      const lineInput = this.DisplayLineEdit(lineDiv, currentLine);
      if (this.doVertical) {
        lineInput.style.height = "100%";
        this.MakeVertical(lineInput);
      } else {
        lineInput.style.width = "100%";
      }
      lineInput.onchange = async () => {
        currentLine.content = lineInput.value;
        await this.Save(snv);
      };
    }
    const addButton = existingLinesDiv.createEl("button", { text: "+" });
    addButton.onclick = async () => {
      this.pages[this.currentPageIndex].lines.push(new DialogueLine(0));
      await this.Save(snv);
      await this.LoadDialogueLinesEdit(snv, linesDiv, speakDiv);
    };
  }
  // private async LoadDialogueLinesEdit(snv: SourceAndVault, linesDiv: HTMLDivElement) {
  // 	const existingLinesDiv = linesDiv.createDiv('hbox');
  // 	existingLinesDiv.style.overflowX = 'scroll';
  // 	const fontSize = '17.5px';
  // 	for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
  // 		const currentIndex = i;
  // 		const currentLine = this.pages[this.currentPageIndex].lines[i];
  // 		const speakerIndex = currentLine.speakerIndex;
  // 		const currentSpeaker = this.characters[speakerIndex];
  // 		const lineDiv = existingLinesDiv.createDiv('vbox');
  // 		const deleteButton = lineDiv.createEl('button', { text: '-' } );
  // 		deleteButton.className = 'cfe-remove-button';
  // 		deleteButton.style.writingMode = 'vertical-lr';
  // 		deleteButton.style.textOrientation = 'upright';
  // 		deleteButton.onclick = async () => {
  // 			this.pages[this.currentPageIndex].lines.splice(currentIndex, 1);
  // 			await this.Save(snv);
  // 			await this.LoadDialogueLinesEdit(snv, linesDiv);
  // 		}
  // 		const indexElement = lineDiv.createEl('p', { text: '' +  currentIndex } );
  // 		indexElement.style.color = currentSpeaker.color;
  // 		indexElement.style.fontFamily = 'HwayuReal';
  // 		indexElement.style.writingMode = 'vertical-lr';
  // 		indexElement.style.textOrientation = 'upright';
  // 		const charDropdownDiv = lineDiv.createDiv();
  // 		charDropdownDiv.style.position = 'relative';
  // 		const charDropdown = charDropdownDiv.createEl('button');
  // 		charDropdown.style.height = 'fit-content';
  // 		charDropdown.onclick = () => {
  // 			const selectDiv = charDropdownDiv.createDiv('hbox');
  // 			selectDiv.style.position = 'absolute';
  // 			selectDiv.style.top = '0%';
  // 			selectDiv.style.left = '0%';
  // 			for (let i = 0; i < this.characters.length; i++) {
  // 				const currentCharIndex = i;
  // 				const currentChar = this.characters[currentCharIndex];
  // 				const currentOption = selectDiv.createEl('button', { text: currentChar.name, value: '' + i } );
  // 				currentOption.style.color = currentChar.color;
  // 				currentOption.style.fontFamily = 'HwayuReal';
  // 				currentOption.style.backgroundColor = currentChar.backgroundColor;
  // 				currentOption.style.writingMode = 'vertical-lr';
  // 				currentOption.style.textOrientation = 'upright';
  // 				currentOption.style.height = 'fit-content';
  // 				currentOption.style.zIndex = '2';
  // 				currentOption.onclick = async () => {
  // 					this.pages[this.currentPageIndex].lines[currentIndex].speakerIndex = currentCharIndex;
  // 					const newSpeakerColor = this.characters[currentCharIndex].color;
  // 					const newBackgroundColor = this.characters[currentCharIndex].backgroundColor;
  // 					charDropdown.style.color = newSpeakerColor;
  // 					charDropdown.style.backgroundColor = newBackgroundColor;
  // 					charDropdown.textContent = this.characters[currentCharIndex].name;
  // 					lineInput.style.color = newSpeakerColor;
  // 					lineInput.style.backgroundColor = newBackgroundColor;
  // 					indexElement.style.color = newSpeakerColor;
  // 					await this.Save(snv);
  // 					selectDiv.remove();
  // 				}
  // 			}
  // 		}
  // 		charDropdown.textContent = this.characters[currentLine.speakerIndex].name;
  // 		charDropdown.style.color = currentSpeaker.color;
  // 		charDropdown.style.backgroundColor = currentSpeaker.backgroundColor;
  // 		charDropdown.style.fontFamily = 'HwayuReal';
  // 		charDropdown.style.writingMode = 'vertical-lr';
  // 		charDropdown.style.textOrientation = 'upright';
  // 		const lineInput = lineDiv.createEl('textarea');
  // 		lineInput.spellcheck = false;
  // 		lineInput.style.overflowX = 'scroll';
  // 		lineInput.style.writingMode = 'vertical-lr';
  // 		lineInput.style.textOrientation = 'upright';
  // 		lineInput.defaultValue = currentLine.content;
  // 		lineInput.style.color = currentSpeaker.color;
  // 		lineInput.style.backgroundColor = currentSpeaker.backgroundColor;
  // 		lineInput.style.fontFamily = 'HwayuReal';
  // 		lineInput.style.fontSize = fontSize;
  // 		lineInput.style.height = '100%';
  // 		lineInput.onchange = async () => {
  // 			this.pages[this.currentPageIndex].lines[currentIndex].content = lineInput.value;
  // 			await this.Save(snv);
  // 		}
  // 	}
  // 	const addButton = existingLinesDiv.createEl('button', { text: '+' } );
  // 	addButton.style.height = '100%';
  // 	addButton.onclick = async () => {
  // 		this.pages[this.currentPageIndex].lines.push(new DialogueLine(0));
  // 		await this.Save(snv);
  // 		await this.LoadDialogueLinesEdit(snv, linesDiv);
  // 	}
  // }
  async LoadDialogueLinesDisplayOnly(linesDiv, speakDiv) {
    linesDiv.empty();
    const existingLinesDiv = linesDiv.createDiv("vbox");
    existingLinesDiv.className = this.doVertical ? "hbox" : "vbox";
    if (this.doVertical) {
      existingLinesDiv.style.overflowX = "scroll";
    } else {
      existingLinesDiv.style.overflowY = "scroll";
    }
    for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
      const currentLine = this.pages[this.currentPageIndex].lines[i];
      const speaker = this.characters[currentLine.speakerIndex];
      if (this.language === "Photolang") {
        const playButton = existingLinesDiv.createEl("button", { text: "\u25B7" });
        playButton.onclick = () => {
          const popup = speakDiv.createDiv();
          popup.style.position = "absolute";
          popup.style.top = "0px";
          popup.style.left = "0px";
          const photoline = new PhotoLine(currentLine.content);
          photoline.Speak(popup, 200, [100, 250, 500], [0, 500], false);
        };
      }
      const nameDiv = existingLinesDiv.createDiv("");
      nameDiv.className = this.doVertical ? "vbox" : "hbox";
      const lineDiv = existingLinesDiv.createDiv("");
      lineDiv.className = this.doVertical ? "vbox" : "hbox";
      const nameEl = this.DisplayText(nameDiv, 25, speaker.name);
      if (this.language !== "Photolang") {
        nameEl.style.backgroundColor = speaker.backgroundColor;
        nameEl.style.color = speaker.color;
      }
      if (this.language === "Photolang") {
        const photoLine = new PhotoLine(currentLine.content);
        photoLine.DisplayStatic(lineDiv, 25, null, null);
      } else {
        const lineEl = this.DisplayText(lineDiv, 25, currentLine.content);
        lineEl.style.backgroundColor = speaker.backgroundColor;
        lineEl.style.color = speaker.color;
      }
    }
    if (this.language === "Photolang") {
      for (let i = 0; i < this.pages[this.currentPageIndex].lines.length; i++) {
        const currentLine = this.pages[this.currentPageIndex].lines[i];
        const nameDiv = speakDiv.createDiv();
        nameDiv.style.position = "absolute";
        nameDiv.style.top = "0px";
        nameDiv.style.left = "0px";
        const photoName = new PhotoLine(this.characters[currentLine.speakerIndex].name);
        await photoName.Speak(nameDiv, 100, [100, 250, 500], [0, 500], false);
        const popup = speakDiv.createDiv();
        popup.style.position = "absolute";
        popup.style.top = "0px";
        popup.style.left = "0px";
        const photoLine = new PhotoLine(currentLine.content);
        await photoLine.Speak(popup, 200, [100, 250, 500], [0, 500], false);
      }
    }
  }
};
var Story = _Story;
Story.knownLanguages = [
  "English",
  "Hwayu",
  "Photolang"
];
var Page = class {
  constructor() {
    this.mediaFileID = -1;
    this.lines = [];
    this.mediaSizePercentage = 50;
  }
};
var DialogueLine = class {
  constructor(speakerIndex) {
    this.speakerIndex = speakerIndex;
    this.content = "";
  }
};
var Character = class {
  constructor(name = "", color = "white", backgroundColor = "black") {
    this.name = name;
    this.color = color;
    this.backgroundColor = backgroundColor;
  }
};

// classes/cfe-file-handler.ts
var CFEFileHandler = class {
  static async CreateNew(snv, fileType, parentFolderID, name) {
    let newFile;
    switch (fileType) {
      case "Folder":
      default:
        newFile = await Folder.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
      case "Single Media File":
        newFile = await SingleMediaFile.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
      case "Variant Media File":
        newFile = await VariantMediaFile.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
      case "Playlist":
        newFile = await Playlist.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
      case "Story":
        newFile = await Story.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
      case "Source Folder Shortcut":
        newFile = await SourceFolderShortcut.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
      case "Conlang Dictionary":
        newFile = await ConlangDictionary.CreateNewFileForLayer(snv, fileType, parentFolderID, name);
        break;
    }
    await newFile.Save(snv);
    return newFile;
  }
  static async LoadFile(snv, fileID) {
    const sourceFolder = snv.sourceFolder;
    const vault = snv.vault;
    const tFile = vault.getFileByPath(sourceFolder.vaultPath + "/" + fileID + ".json");
    if (tFile === null) {
      throw Error("File could not be found at the path: " + sourceFolder.vaultPath + "/" + fileID + ".json");
    }
    const jsonData = await vault.cachedRead(tFile);
    const plainObject = JSON.parse(jsonData);
    switch (plainObject.fileType) {
      case "Folder":
      default:
        return await Object.assign(new Folder(), plainObject);
      case "Single Media File":
        return await Object.assign(new SingleMediaFile(), plainObject);
      case "Variant Media File":
        return await Object.assign(new VariantMediaFile(), plainObject);
      case "Playlist":
        return await Object.assign(new Playlist(), plainObject);
      case "Story":
        return await Object.assign(new Story(), plainObject);
      case "Source Folder Shortcut":
        return await Object.assign(new SourceFolderShortcut(), plainObject);
      case "Conlang Dictionary":
        return await Object.assign(new ConlangDictionary(), plainObject);
    }
  }
};
/**
 * All of the known file formats
 */
CFEFileHandler.KnownFileTypes = [
  "Folder",
  "Single Media File",
  "Variant Media File",
  "Playlist",
  "Story",
  "Source Folder Shortcut",
  "Conlang Dictionary"
];

// classes/snv.ts
var SourceAndVault = class {
  constructor(sourceFolder, vault) {
    this.sourceFolder = sourceFolder;
    this.vault = vault;
  }
};

// classes/source-folder.ts
var SourceFolder = class {
  constructor() {
    this.vaultPath = "";
    this.fileCount = 0;
  }
  async Display(container, vault) {
    const snv = new SourceAndVault(this, vault);
    const notExists = vault.getFileByPath(snv.sourceFolder.vaultPath + "/0.json") === null;
    if (notExists) {
      await CFEFileHandler.CreateNew(snv, "Folder", 0, "Root Folder");
    }
    const rootFolder = await CFEFileHandler.LoadFile(snv, 0);
    await SourceFolder.Save(snv);
    await rootFolder.Save(snv);
    await rootFolder.Display(snv, container);
  }
  static async CreateOrLoadSourceFolder(vaultPath, vault) {
    vaultPath = vaultPath.endsWith("/source.json") ? vaultPath.slice(0, -12) : vaultPath;
    const exists = vault.getFileByPath(vaultPath + "/source.json") !== null;
    let newSourceFolder;
    if (exists) {
      newSourceFolder = await this.LoadExistingSource(vaultPath, vault);
    } else {
      newSourceFolder = await this.CreateNewSourceFolder(vaultPath, vault);
    }
    return newSourceFolder;
  }
  static async CreateNewSourceFolder(vaultPath, vault) {
    const newSourceFolder = new SourceFolder();
    newSourceFolder.vaultPath = vaultPath;
    newSourceFolder.fileCount = 0;
    try {
      await vault.createFolder(vaultPath);
    } finally {
      const sourcePath = (0, import_obsidian3.normalizePath)(vaultPath + "/source.json");
      await vault.adapter.write(sourcePath, "0");
    }
    return newSourceFolder;
  }
  static async LoadExistingSource(vaultPath, vault) {
    const sourceTFile = vault.getFileByPath(vaultPath + "/source.json");
    if (sourceTFile === null) {
      new import_obsidian3.Notice("Source File could not be found at the path: " + vaultPath + "/source.json");
      throw Error("Source File could not be found at the path: " + vaultPath + "/source.json");
    }
    const jsonData = await vault.cachedRead(sourceTFile);
    const plainObject = await JSON.parse(jsonData);
    const newSourceFolder = Object.assign(new SourceFolder(), plainObject);
    newSourceFolder.vaultPath = vaultPath;
    await SourceFolder.Save(new SourceAndVault(newSourceFolder, vault));
    return newSourceFolder;
  }
  /**
   * Saves the new file count
   */
  static async Save(sourceAndVault) {
    const sourceFolder = sourceAndVault.sourceFolder;
    const vault = sourceAndVault.vault;
    const tFile = vault.getFileByPath(sourceFolder.vaultPath + "/source.json");
    if (tFile === null) {
      new import_obsidian3.Notice("Source File could not be found at the path: " + sourceFolder.vaultPath + "/source.json");
      throw Error("Source File could not be found at the path: " + sourceFolder.vaultPath + "/source.json");
    }
    const jsonData = JSON.stringify(sourceFolder);
    await vault.modify(tFile, jsonData);
  }
};

// classes/custom-explorer-view.ts
var VIEW_TYPE_CUSTOM_EXPLORER = "custom-explorer-view";
var CustomExplorerView = class extends import_obsidian4.ItemView {
  constructor(leaf, path) {
    super(leaf);
    this.defaultPath = path;
  }
  getViewType() {
    return VIEW_TYPE_CUSTOM_EXPLORER;
  }
  getDisplayText() {
    return "Example view";
  }
  async onOpen() {
    const wrapper = this.containerEl.children[1];
    wrapper.empty();
    const mainContainer = wrapper.createDiv("cfe-main-display");
    const homePage = mainContainer.createDiv("cfe-home-page");
    homePage.createEl("h4", { text: "Path to Source Folder:" });
    const existingSourcePathInput = homePage.createEl("input", { type: "text", value: this.defaultPath });
    existingSourcePathInput.style.width = "100%";
    const submitButton = homePage.createEl("button", { text: "submit" });
    const vault = this.app.vault;
    submitButton.onclick = async () => {
      const path = existingSourcePathInput.value;
      const sf = await SourceFolder.CreateOrLoadSourceFolder(path, vault);
      await sf.Display(mainContainer, vault);
    };
    homePage.onkeydown = async (keyPressEvent) => {
      if (keyPressEvent.key === "Enter") {
        const path = existingSourcePathInput.value;
        const sf = await SourceFolder.CreateOrLoadSourceFolder(path, vault);
        await sf.Display(mainContainer, vault);
      }
    };
  }
  async onClose() {
  }
};

// main.ts
var import_obsidian5 = require("obsidian");
var DEFAULT_SETTINGS = {
  defaultPath: "Source Folder"
};
var CFE = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerView(
      VIEW_TYPE_CUSTOM_EXPLORER,
      (leaf) => new CustomExplorerView(leaf, this.settings.defaultPath)
    );
    this.addRibbonIcon("folder", "Activate view", () => {
      this.activateView(VIEW_TYPE_CUSTOM_EXPLORER);
    });
    this.addCommand({
      id: "open-cfe-view",
      name: "Open Custom File Explorer View",
      callback: () => {
        this.activateView(VIEW_TYPE_CUSTOM_EXPLORER);
      }
    });
    this.addCommand({
      id: "sample-editor-command",
      name: "Sample editor command",
      editorCallback: (editor, view) => {
        console.log(editor.getSelection());
        editor.replaceSelection("Sample Editor Command");
      }
    });
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async activateView(view_type) {
    const { workspace } = this.app;
    let leaf = null;
    leaf = workspace.getLeaf("tab");
    if (leaf === null) {
      new import_obsidian5.Notice("Failed to create view: workspace leaf was null");
      return;
    }
    await leaf.setViewState({ type: view_type, active: true });
    workspace.revealLeaf(leaf);
  }
};
var SampleSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian5.Setting(containerEl).setName("Default Source Path").setDesc("The vault path to automatically fill in for the source path").addText((text) => text.setPlaceholder("Default Source Path").setValue(this.plugin.settings.defaultPath).onChange(async (value) => {
      this.plugin.settings.defaultPath = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjbGFzc2VzL2N1c3RvbS1leHBsb3Jlci12aWV3LnRzIiwgImNsYXNzZXMvc291cmNlLWZvbGRlci50cyIsICJjbGFzc2VzL2NmZS1maWxlLnRzIiwgImNsYXNzZXMvc2luZ2xlLW1lZGlhLWZpbGUudHMiLCAiY2xhc3Nlcy9yZWFsLWZpbGUudHMiLCAiY2xhc3Nlcy9mb2xkZXIudHMiLCAiY2xhc3Nlcy9wbGF5bGlzdC50cyIsICJjbGFzc2VzL3ZhcmlhbnQtbWVkaWEtZmlsZS50cyIsICJjbGFzc2VzL3NvdXJjZS1mb2xkZXItc2hvcnRjdXQudHMiLCAiY2xhc3Nlcy9jb25sYW5ncy9od2F5dS10ZXh0LnRzIiwgImNsYXNzZXMvY29ubGFuZ3MvcGhvdG9sYW5nLXRleHQudHMiLCAiY2xhc3Nlcy9jb25sYW5nLWRpY3Rpb25hcnkudHMiLCAiY2xhc3Nlcy9zdG9yeS50cyIsICJjbGFzc2VzL2NmZS1maWxlLWhhbmRsZXIudHMiLCAiY2xhc3Nlcy9zbnYudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEN1c3RvbUV4cGxvcmVyVmlldywgVklFV19UWVBFX0NVU1RPTV9FWFBMT1JFUiB9IGZyb20gJ2NsYXNzZXMvY3VzdG9tLWV4cGxvcmVyLXZpZXcnO1xyXG5pbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxyXG5cclxuaW50ZXJmYWNlIENGRUNldHRpbmdzIHtcclxuXHRkZWZhdWx0UGF0aDogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBDRkVDZXR0aW5ncyA9IHtcclxuXHRkZWZhdWx0UGF0aDogJ1NvdXJjZSBGb2xkZXInXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENGRSBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IENGRUNldHRpbmdzO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxyXG5cdFx0XHRWSUVXX1RZUEVfQ1VTVE9NX0VYUExPUkVSLFxyXG5cdFx0XHQobGVhZikgPT4gbmV3IEN1c3RvbUV4cGxvcmVyVmlldyhsZWFmLCB0aGlzLnNldHRpbmdzLmRlZmF1bHRQYXRoKVxyXG5cdFx0KTtcclxuXHJcblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ2ZvbGRlcicsICdBY3RpdmF0ZSB2aWV3JywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFjdGl2YXRlVmlldyhWSUVXX1RZUEVfQ1VTVE9NX0VYUExPUkVSKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdvcGVuLWNmZS12aWV3JyxcclxuXHRcdFx0bmFtZTogJ09wZW4gQ3VzdG9tIEZpbGUgRXhwbG9yZXIgVmlldycsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmF0ZVZpZXcoVklFV19UWVBFX0NVU1RPTV9FWFBMT1JFUik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0Ly8gVGhpcyBhZGRzIGFuIGVkaXRvciBjb21tYW5kIHRoYXQgY2FuIHBlcmZvcm0gc29tZSBvcGVyYXRpb24gb24gdGhlIGN1cnJlbnQgZWRpdG9yIGluc3RhbmNlXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ3NhbXBsZS1lZGl0b3ItY29tbWFuZCcsXHJcblx0XHRcdG5hbWU6ICdTYW1wbGUgZWRpdG9yIGNvbW1hbmQnLFxyXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xyXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKCdTYW1wbGUgRWRpdG9yIENvbW1hbmQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXHJcblx0XHQvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxyXG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiBjb25zb2xlLmxvZygnc2V0SW50ZXJ2YWwnKSwgNSAqIDYwICogMTAwMCkpO1xyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgYWN0aXZhdGVWaWV3KHZpZXdfdHlwZTogc3RyaW5nKSB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblxyXG5cdFx0bGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcclxuXHJcblx0XHRsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG5cdFx0aWYgKGxlYWYgPT09IG51bGwpIHtcclxuXHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBjcmVhdGUgdmlldzogd29ya3NwYWNlIGxlYWYgd2FzIG51bGxcIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogdmlld190eXBlLCBhY3RpdmU6IHRydWUgfSk7XHJcblxyXG5cdFx0Ly8gXCJSZXZlYWxcIiB0aGUgbGVhZiBpbiBjYXNlIGl0IGlzIGluIGEgY29sbGFwc2VkIHNpZGViYXJcclxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogQ0ZFO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDRkUpIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdEZWZhdWx0IFNvdXJjZSBQYXRoJylcclxuXHRcdFx0LnNldERlc2MoJ1RoZSB2YXVsdCBwYXRoIHRvIGF1dG9tYXRpY2FsbHkgZmlsbCBpbiBmb3IgdGhlIHNvdXJjZSBwYXRoJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdEZWZhdWx0IFNvdXJjZSBQYXRoJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFBhdGgpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFBhdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTb3VyY2VGb2xkZXIgfSBmcm9tICcuL3NvdXJjZS1mb2xkZXInO1xyXG5cclxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DVVNUT01fRVhQTE9SRVIgPSAnY3VzdG9tLWV4cGxvcmVyLXZpZXcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEN1c3RvbUV4cGxvcmVyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuXHRkZWZhdWx0UGF0aDogc3RyaW5nO1xyXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBhdGg6IHN0cmluZykge1xyXG5cdFx0c3VwZXIobGVhZik7XHJcblx0XHR0aGlzLmRlZmF1bHRQYXRoID0gcGF0aDtcclxuXHR9XHJcblxyXG5cdGdldFZpZXdUeXBlKCkge1xyXG5cdFx0cmV0dXJuIFZJRVdfVFlQRV9DVVNUT01fRVhQTE9SRVI7XHJcblx0fVxyXG5cclxuXHRnZXREaXNwbGF5VGV4dCgpIHtcclxuXHRcdHJldHVybiAnRXhhbXBsZSB2aWV3JztcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHdyYXBwZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xyXG5cdFx0d3JhcHBlci5lbXB0eSgpO1xyXG5cdFx0Y29uc3QgbWFpbkNvbnRhaW5lciA9IHdyYXBwZXIuY3JlYXRlRGl2KCdjZmUtbWFpbi1kaXNwbGF5Jyk7XHJcblx0XHRjb25zdCBob21lUGFnZSA9IG1haW5Db250YWluZXIuY3JlYXRlRGl2KCdjZmUtaG9tZS1wYWdlJyk7XHJcblx0XHRob21lUGFnZS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdQYXRoIHRvIFNvdXJjZSBGb2xkZXI6JyB9ICk7XHJcblx0XHRjb25zdCBleGlzdGluZ1NvdXJjZVBhdGhJbnB1dCA9IGhvbWVQYWdlLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogdGhpcy5kZWZhdWx0UGF0aCB9ICk7XHJcblx0XHRleGlzdGluZ1NvdXJjZVBhdGhJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGhvbWVQYWdlLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdzdWJtaXQnIH0gKTtcclxuXHRcdGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XHJcblx0XHRzdWJtaXRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgcGF0aCA9IGV4aXN0aW5nU291cmNlUGF0aElucHV0LnZhbHVlO1xyXG5cdFx0XHRjb25zdCBzZiA9IDxTb3VyY2VGb2xkZXI+IGF3YWl0IFNvdXJjZUZvbGRlci5DcmVhdGVPckxvYWRTb3VyY2VGb2xkZXIocGF0aCwgdmF1bHQpO1xyXG5cdFx0XHRhd2FpdCBzZi5EaXNwbGF5KG1haW5Db250YWluZXIsIHZhdWx0KTtcclxuXHRcdH1cclxuXHRcdGhvbWVQYWdlLm9ua2V5ZG93biA9IGFzeW5jIChrZXlQcmVzc0V2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChrZXlQcmVzc0V2ZW50LmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdGNvbnN0IHBhdGggPSBleGlzdGluZ1NvdXJjZVBhdGhJbnB1dC52YWx1ZTtcclxuXHRcdFx0XHRjb25zdCBzZiA9IGF3YWl0IFNvdXJjZUZvbGRlci5DcmVhdGVPckxvYWRTb3VyY2VGb2xkZXIocGF0aCwgdmF1bHQpO1xyXG5cdFx0XHRcdGF3YWl0IHNmLkRpc3BsYXkobWFpbkNvbnRhaW5lciwgdmF1bHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbkNsb3NlKCkge1xyXG5cdFx0Ly8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIE5vdGljZSwgVmF1bHQgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgQ0ZFRmlsZUhhbmRsZXIgfSBmcm9tIFwiLi9jZmUtZmlsZS1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU291cmNlRm9sZGVyIHtcclxuXHR2YXVsdFBhdGg6IHN0cmluZztcclxuXHRmaWxlQ291bnQ6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMudmF1bHRQYXRoID0gJyc7XHJcblx0XHR0aGlzLmZpbGVDb3VudCA9IDA7XHJcblx0fVxyXG5cclxuXHRhc3luYyBEaXNwbGF5KGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIHZhdWx0OiBWYXVsdCkge1xyXG5cdFx0Y29uc3Qgc252ID0gbmV3IFNvdXJjZUFuZFZhdWx0KHRoaXMsIHZhdWx0KTtcclxuXHRcdGNvbnN0IG5vdEV4aXN0cyA9IHZhdWx0LmdldEZpbGVCeVBhdGgoc252LnNvdXJjZUZvbGRlci52YXVsdFBhdGggKyAnLzAuanNvbicpID09PSBudWxsO1xyXG5cdFx0aWYgKG5vdEV4aXN0cykge1xyXG5cdFx0XHRhd2FpdCBDRkVGaWxlSGFuZGxlci5DcmVhdGVOZXcoc252LCAnRm9sZGVyJywgMCwgJ1Jvb3QgRm9sZGVyJyk7XHJcblx0XHR9XHJcblx0XHRjb25zdCByb290Rm9sZGVyID0gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCAwKTtcclxuXHRcdGF3YWl0IFNvdXJjZUZvbGRlci5TYXZlKHNudik7XHJcblx0XHRhd2FpdCByb290Rm9sZGVyLlNhdmUoc252KTtcclxuXHRcdGF3YWl0IHJvb3RGb2xkZXIuRGlzcGxheShzbnYsIGNvbnRhaW5lcik7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgYXN5bmMgQ3JlYXRlT3JMb2FkU291cmNlRm9sZGVyKHZhdWx0UGF0aDogc3RyaW5nLCB2YXVsdDogVmF1bHQpOiBQcm9taXNlPFNvdXJjZUZvbGRlcj4ge1xyXG5cdFx0dmF1bHRQYXRoID0gdmF1bHRQYXRoLmVuZHNXaXRoKCcvc291cmNlLmpzb24nKSA/IHZhdWx0UGF0aC5zbGljZSgwLCAtMTIpIDogdmF1bHRQYXRoO1xyXG5cdFx0Y29uc3QgZXhpc3RzID0gdmF1bHQuZ2V0RmlsZUJ5UGF0aCh2YXVsdFBhdGggKyAnL3NvdXJjZS5qc29uJykgIT09IG51bGw7XHJcblx0XHRsZXQgbmV3U291cmNlRm9sZGVyOiBTb3VyY2VGb2xkZXI7XHJcblx0XHRpZiAoZXhpc3RzKSB7XHJcblx0XHRcdG5ld1NvdXJjZUZvbGRlciA9IGF3YWl0IHRoaXMuTG9hZEV4aXN0aW5nU291cmNlKHZhdWx0UGF0aCwgdmF1bHQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmV3U291cmNlRm9sZGVyID0gYXdhaXQgdGhpcy5DcmVhdGVOZXdTb3VyY2VGb2xkZXIodmF1bHRQYXRoLCB2YXVsdCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbmV3U291cmNlRm9sZGVyO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgYXN5bmMgQ3JlYXRlTmV3U291cmNlRm9sZGVyKHZhdWx0UGF0aDogc3RyaW5nLCB2YXVsdDogVmF1bHQpOiBQcm9taXNlPFNvdXJjZUZvbGRlcj4ge1xyXG5cdFx0Y29uc3QgbmV3U291cmNlRm9sZGVyID0gbmV3IFNvdXJjZUZvbGRlcigpO1xyXG5cdFx0bmV3U291cmNlRm9sZGVyLnZhdWx0UGF0aCA9IHZhdWx0UGF0aDtcclxuXHRcdG5ld1NvdXJjZUZvbGRlci5maWxlQ291bnQgPSAwO1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgdmF1bHQuY3JlYXRlRm9sZGVyKHZhdWx0UGF0aCk7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRjb25zdCBzb3VyY2VQYXRoID0gbm9ybWFsaXplUGF0aCh2YXVsdFBhdGggKyAnL3NvdXJjZS5qc29uJyk7XHJcblx0XHRcdGF3YWl0IHZhdWx0LmFkYXB0ZXIud3JpdGUoc291cmNlUGF0aCwgJzAnKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBuZXdTb3VyY2VGb2xkZXI7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBhc3luYyBMb2FkRXhpc3RpbmdTb3VyY2UodmF1bHRQYXRoOiBzdHJpbmcsIHZhdWx0OiBWYXVsdCk6IFByb21pc2U8U291cmNlRm9sZGVyPiB7XHJcblx0XHRjb25zdCBzb3VyY2VURmlsZSA9IHZhdWx0LmdldEZpbGVCeVBhdGgodmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpO1xyXG5cdFx0aWYgKHNvdXJjZVRGaWxlID09PSBudWxsKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJTb3VyY2UgRmlsZSBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIHBhdGg6IFwiICsgdmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpO1xyXG5cdFx0XHR0aHJvdyBFcnJvcihcIlNvdXJjZSBGaWxlIGNvdWxkIG5vdCBiZSBmb3VuZCBhdCB0aGUgcGF0aDogXCIgKyB2YXVsdFBhdGggKyAnL3NvdXJjZS5qc29uJyk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBqc29uRGF0YSA9IGF3YWl0IHZhdWx0LmNhY2hlZFJlYWQoc291cmNlVEZpbGUpO1xyXG5cclxuXHRcdGNvbnN0IHBsYWluT2JqZWN0ID0gYXdhaXQgSlNPTi5wYXJzZShqc29uRGF0YSk7XHJcblx0XHRjb25zdCBuZXdTb3VyY2VGb2xkZXIgPSBPYmplY3QuYXNzaWduKG5ldyBTb3VyY2VGb2xkZXIoKSwgcGxhaW5PYmplY3QpO1xyXG5cdFx0bmV3U291cmNlRm9sZGVyLnZhdWx0UGF0aCA9IHZhdWx0UGF0aDtcclxuXHRcdGF3YWl0IFNvdXJjZUZvbGRlci5TYXZlKG5ldyBTb3VyY2VBbmRWYXVsdChuZXdTb3VyY2VGb2xkZXIsIHZhdWx0KSk7XHJcblx0XHRyZXR1cm4gbmV3U291cmNlRm9sZGVyO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2F2ZXMgdGhlIG5ldyBmaWxlIGNvdW50XHJcblx0ICovXHJcblx0c3RhdGljIGFzeW5jIFNhdmUoc291cmNlQW5kVmF1bHQ6IFNvdXJjZUFuZFZhdWx0KSB7XHJcblx0XHRjb25zdCBzb3VyY2VGb2xkZXIgPSBzb3VyY2VBbmRWYXVsdC5zb3VyY2VGb2xkZXI7XHJcblx0XHRjb25zdCB2YXVsdCA9IHNvdXJjZUFuZFZhdWx0LnZhdWx0O1xyXG5cclxuXHRcdC8vIEZpbmQgdGhlIGZpbGUgYW5kIGNoZWNrIHRoYXQgaXQgaXNuJ3QgbnVsbFxyXG5cdFx0Y29uc3QgdEZpbGUgPSB2YXVsdC5nZXRGaWxlQnlQYXRoKHNvdXJjZUZvbGRlci52YXVsdFBhdGggKyAnL3NvdXJjZS5qc29uJyk7XHJcblx0XHRpZiAodEZpbGUgPT09IG51bGwpIHtcclxuXHRcdFx0bmV3IE5vdGljZShcIlNvdXJjZSBGaWxlIGNvdWxkIG5vdCBiZSBmb3VuZCBhdCB0aGUgcGF0aDogXCIgKyBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpO1xyXG5cdFx0XHR0aHJvdyBFcnJvcihcIlNvdXJjZSBGaWxlIGNvdWxkIG5vdCBiZSBmb3VuZCBhdCB0aGUgcGF0aDogXCIgKyBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy9zb3VyY2UuanNvbicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoc291cmNlRm9sZGVyKTtcclxuXHRcdGF3YWl0IHZhdWx0Lm1vZGlmeSh0RmlsZSwganNvbkRhdGEpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5pbXBvcnQgeyBDRkVGaWxlSGFuZGxlciB9IGZyb20gXCIuL2NmZS1maWxlLWhhbmRsZXJcIjtcclxuaW1wb3J0IHsgU291cmNlRm9sZGVyIH0gZnJvbSBcIi4vc291cmNlLWZvbGRlclwiO1xyXG5pbXBvcnQgeyBGb2xkZXIgfSBmcm9tIFwiLi9mb2xkZXJcIjtcclxuXHJcbi8vI3JlZ2lvbiBGb3JtYXR0ZWQgRmlsZSBIYW5kbGVyXHJcbi8vI2VuZHJlZ2lvblxyXG5cclxuLy8jcmVnaW9uIEZpbGUgVHlwZXNcclxuLyoqXHJcbiAqIEFuIGludGVycHJldGF0aW9uIG9mIGpzb24gZmlsZXMgYXMgYSBcImZpbGVcIiBvZiBhIHNwZWNpZmljIFwiZmlsZSBmb3JtYXRcIlxyXG4gKiB0aGF0IGNhbiBiZSBpbnRlcnByZXRlZCBhbmQgZGlzcGxheWVkIGJ5IHRoZSBwbHVnaW4uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ0ZFRmlsZSB7XHJcblx0LyoqXHJcblx0ICogQSB1bmlxdWUgKHdpdGhpbiB0aGUgXCJzb3VyY2VcIiBvZiB0aGUgY3VycmVudCBleHBsb3JlcikgbnVtZXJpY2FsIGlkZW50aWZpZXIgZm9yIHRoZSBmaWxlXHJcblx0ICovXHJcblx0aWQ6IG51bWJlcjtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIHR5cGUgb2YgZmlsZVxyXG5cdCAqL1xyXG5cdGZpbGVUeXBlOiBzdHJpbmc7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBuYW1lIG9mIHRoZSBmaWxlIHdpdGhpbiB0aGUgc291cmNlXHJcblx0ICovXHJcblx0ZmlsZU5hbWU6IHN0cmluZztcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIElEIG9mIHRoZSBwYXJlbnQgZm9sZGVyXHJcblx0ICovXHJcblx0cGFyZW50Rm9sZGVySUQ6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgRklMRV9OQU1FX0lOUFVUX0lOREVYID0gMDtcclxuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBQQVJFTlRfRk9MREVSX0lEX0lOUFVUX0lOREVYID0gMTtcclxuXHJcblx0LyoqXHJcblx0ICogU0hPVUxEIE5PVCBCRSBDQUxMRUQgT1VUU0lERSBPRiBDRkVGaWxlSGFuZGxlci5cclxuXHQgKiBcclxuXHQgKiBVc2UgQ0ZFRmlsZUhhbmRsZXIuQ3JlYXRlTmV3KCkgaW5zdGVhZC5cclxuXHQgKiBcclxuXHQgKiBDSElMRCBDTEFTU0VTIFNIT1VMRCBOT1QgV1JJVEUgVE8gQSBGSUxFLiBUSElTIElTIERPTkUgSU5TSURFIE9GIENGRUZpbGVIYW5kbGVyXHJcblx0ICogXHJcblx0ICogQ0ZFRmlsZSBsYXllcjpcclxuXHQgKiBcclxuXHQgKiBzZXRzIHRoZSBzb3VyY2UsIGlkLCBmaWxlIHR5cGUsIGZpbGUgbmFtZSwgYW5kIHBhcmVudCBmb2xkZXIgaWQgb2YgdGhlIGZpbGUgb2JqZWN0LlxyXG5cdCAqL1xyXG5cdHN0YXRpYyBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252OiBTb3VyY2VBbmRWYXVsdCwgZmlsZVR5cGU6IHN0cmluZywgcGFyZW50Rm9sZGVySUQ6IG51bWJlciwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxDRkVGaWxlPiB7XHJcblx0XHRjb25zdCBzb3VyY2VGb2xkZXIgPSBzbnYuc291cmNlRm9sZGVyO1xyXG5cclxuXHRcdC8vIFNldCB0aGUgdmFsdWVzIG9mIHRoZSB1bmZpbmlzaGVkIGZpbGVcclxuXHRcdGNvbnN0IHVuZmluaXNoZWRGaWxlID0gbmV3IENGRUZpbGUoKTtcclxuXHRcdHVuZmluaXNoZWRGaWxlLmlkID0gc291cmNlRm9sZGVyLmZpbGVDb3VudDtcclxuXHRcdHVuZmluaXNoZWRGaWxlLmZpbGVUeXBlID0gZmlsZVR5cGU7XHJcblx0XHR1bmZpbmlzaGVkRmlsZS5maWxlTmFtZSA9IG5hbWU7XHJcblx0XHR1bmZpbmlzaGVkRmlsZS5wYXJlbnRGb2xkZXJJRCA9IHBhcmVudEZvbGRlcklEO1xyXG5cdFx0XHJcblx0XHQvLyBVcGRhdGUgdGhlIGZpbGUgY291bnRcclxuXHRcdHNvdXJjZUZvbGRlci5maWxlQ291bnQrKztcclxuXHRcdGF3YWl0IFNvdXJjZUZvbGRlci5TYXZlKHNudik7XHJcblxyXG5cdFx0Ly8gRmluZCB0aGUgcGFyZW50IGZvbGRlciBhbmQgYWRkIHRoaXMgZmlsZSB0byBpdFxyXG5cdFx0aWYgKHVuZmluaXNoZWRGaWxlLmlkICE9PSB1bmZpbmlzaGVkRmlsZS5wYXJlbnRGb2xkZXJJRCkge1xyXG5cdFx0XHRjb25zdCBwYXJlbnRGb2xkZXIgPSA8Rm9sZGVyPiAoYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCB1bmZpbmlzaGVkRmlsZS5wYXJlbnRGb2xkZXJJRCkpO1xyXG5cdFx0XHRwYXJlbnRGb2xkZXIuY29udGFpbmVkRmlsZUlEcy5wdXNoKHVuZmluaXNoZWRGaWxlLmlkKTtcclxuXHRcdFx0YXdhaXQgcGFyZW50Rm9sZGVyLlNhdmUoc252KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXR1cm4gdGhlIHVuZmluaXNoZWQgZmlsZSBzbyB0aGUgbmV4dCBsYXllciBjYW4gYWRkIHRvIGl0XHJcblx0XHRyZXR1cm4gdW5maW5pc2hlZEZpbGU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTSE9VTEQgTk9UIEJFIENBTExFRCBPVVRTSURFIE9GIENGRUZpbGVIYW5kbGVyLlxyXG5cdCAqIFxyXG5cdCAqIFVzZSBDRkVGaWxlSGFuZGxlci5EaXNwbGF5VGh1bWJuYWlsKCkgaW5zdGVhZC5cclxuXHQgKiBcclxuXHQgKiBDRkVGaWxlIGxheWVyOlxyXG5cdCAqIFxyXG5cdCAqIHNldHMgdGhlIHRodW1ibmFpbCBjb250YWluZXIncyBjc3MgY2xhc3MgdG8gJ2NmZS10aHVtYm5haWwnXHJcblx0ICogYW5kIGZ1bGx5IGRpc3BsYXlzIHRoZSBmaWxlIGlmIHRoZSB0aHVtYm5haWwgaXMgY2xpY2tlZC5cclxuXHQgKi9cclxuXHRhc3luYyBEaXNwbGF5VGh1bWJuYWlsKHNvdXJjZUFuZFZhdWx0OiBTb3VyY2VBbmRWYXVsdCwgdGh1bWJuYWlsRGl2OiBIVE1MRGl2RWxlbWVudCwgZGlzcGxheURpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdHRodW1ibmFpbERpdi5jbGFzc05hbWUgPSAnY2ZlLXRodW1ibmFpbCB2Ym94JztcclxuXHRcdHRodW1ibmFpbERpdi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXkoc291cmNlQW5kVmF1bHQsIGRpc3BsYXlEaXYpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgaWRUZXh0ID0gdGh1bWJuYWlsRGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0aWRUZXh0LnRleHRDb250ZW50ID0gJ0lEOiAnICsgdGhpcy5pZDtcclxuXHRcdGlkVGV4dC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xyXG5cdFx0Y29uc3QgZmlsZVRleHQgPSB0aHVtYm5haWxEaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRmaWxlVGV4dC50ZXh0Q29udGVudCA9ICdGaWxlIFR5cGU6ICcgKyB0aGlzLmZpbGVUeXBlO1xyXG5cdFx0ZmlsZVRleHQuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJztcclxuXHRcdGNvbnN0IG5hbWVUZXh0ID0gdGh1bWJuYWlsRGl2LmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0bmFtZVRleHQudGV4dENvbnRlbnQgPSAnRmlsZSBOYW1lOiAnICsgdGhpcy5maWxlTmFtZTtcclxuXHRcdG5hbWVUZXh0LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNIT1VMRCBOT1QgQkUgQ0FMTEVEIE9VVFNJREUgT0YgQ0ZFRmlsZUhhbmRsZXIuXHJcblx0ICogXHJcblx0ICogVXNlIENGRUZpbGVIYW5kbGVyLkRpc3BsYXkoKSBpbnN0ZWFkLlxyXG5cdCAqIFxyXG5cdCAqIENGRUZpbGUgbGF5ZXI6XHJcblx0ICogXHJcblx0ICogZW1wdGllcyB0aGUgZGlzcGxheSBjb250YWluZXIgcHJvdmlkZWQuXHJcblx0ICovXHJcblx0YXN5bmMgRGlzcGxheShzbnY6IFNvdXJjZUFuZFZhdWx0LCBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdGNvbnN0IGJhY2tCdXR0b24gPSBoZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0JhY2sgdG8gcGFyZW50IGZvbGRlcicgfSApO1xyXG5cdFx0aGVhZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnRmlsZSBJRDogJyArIHRoaXMuaWQgfSApXHJcblx0XHRoZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdGaWxlIE5hbWU6ICcgfSApXHJcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBoZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiB0aGlzLmZpbGVOYW1lIH0gKTtcclxuXHRcdGJhY2tCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVyID0gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCB0aGlzLnBhcmVudEZvbGRlcklEKTtcclxuXHRcdFx0aWYgKHBhcmVudEZvbGRlciAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdGF3YWl0IHBhcmVudEZvbGRlci5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0bmFtZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmZpbGVOYW1lID0gbmFtZUlucHV0LnZhbHVlO1xyXG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNIT1VMRCBOT1QgQkUgQ0FMTEVEIE9VVFNJREUgT0YgQ0ZFRmlsZUhhbmRsZXIuXHJcblx0ICogXHJcblx0ICogKGl0IGlzIHVubGlrZWx5IHRoaXMgbWV0aG9kIHdpbGwgZXZlciBiZSBvdmVycmlkZW4gYnkgY2hpbGQgY2xhc3NlcywgYnV0IG1ha2luZyB0aGlzICdpbmFjY2Vzc2libGUnIGlzIGZvciBjb25zaXN0ZW5jeSlcclxuXHQgKiBcclxuXHQgKiBVc2UgQ0ZFRmlsZUhhbmRsZXIuU2F2ZUZpbGUoKSBpbnN0ZWFkLlxyXG5cdCAqIFxyXG5cdCAqIEZvcm1hdHRlZCBGaWxlIGxheWVyOlxyXG5cdCAqIFxyXG5cdCAqIERlbGV0ZXMgdGhpcyBmaWxlIElEIGZyb20gdGhlIG9yaWdpbmFsIHBhcmVudCBmb2xkZXIsIGFkZHMgdGhpcyBmaWxlIHRvIHRoZSBuZXcgcGFyZW50IGZvbGRlciwgYW5kIGNoYW5nZXMgdGhlIHBhcmVudCBmb2xkZXIgSURcclxuXHQgKi9cclxuXHRhc3luYyBNb3ZlRmlsZShzb3VyY2VBbmRWYXVsdDogU291cmNlQW5kVmF1bHQsIG5ld1BhcmVudEZvbGRlcklEOiBudW1iZXIpIHtcclxuXHRcdC8vIERlbGV0ZSB0aGlzIGZpbGUgaWQgZnJvbSB0aGUgb3JpZ2luYWwgcGFyZW50IGZvbGRlclxyXG5cdFx0Y29uc3Qgb2xkUGFyZW50Rm9sZGVyID0gPEZvbGRlcj4gKGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNvdXJjZUFuZFZhdWx0LCB0aGlzLnBhcmVudEZvbGRlcklEKSk7XHJcblx0XHRjb25zdCBpbmRleE9mRmlsZSA9IG9sZFBhcmVudEZvbGRlci5jb250YWluZWRGaWxlSURzLmluZGV4T2YodGhpcy5pZCk7XHJcblx0XHRvbGRQYXJlbnRGb2xkZXIuY29udGFpbmVkRmlsZUlEcy5zcGxpY2UoaW5kZXhPZkZpbGUsIDEpO1xyXG5cdFx0b2xkUGFyZW50Rm9sZGVyLlNhdmUoc291cmNlQW5kVmF1bHQpOyAvLyB0aGlzIGNhbiBiZSBkb25lIGFzeW5jaHJvbm91c2x5IHdpdGhvdXQgYWZmZWN0aW5nIHRoZSBvdGhlcnNcclxuXHJcblx0XHQvLyBBZGQgdGhpcyBmaWxlIHRvIHRoZSBuZXcgcGFyZW50IGZvbGRlclxyXG5cdFx0Y29uc3QgbmV3UGFyZW50Rm9sZGVyID0gPEZvbGRlcj4gKGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNvdXJjZUFuZFZhdWx0LCBuZXdQYXJlbnRGb2xkZXJJRCkpO1xyXG5cdFx0bmV3UGFyZW50Rm9sZGVyLmNvbnRhaW5lZEZpbGVJRHMucHVzaCh0aGlzLmlkKTtcclxuXHRcdG5ld1BhcmVudEZvbGRlci5TYXZlKHNvdXJjZUFuZFZhdWx0KTsgLy8gdGhpcyBjYW4gYmUgZG9uZSBhc3luY2hyb25vdXNseSB3aXRob3V0IGFmZmVjdGluZyB0aGUgb3RoZXJzXHJcblxyXG5cdFx0dGhpcy5wYXJlbnRGb2xkZXJJRCA9IG5ld1BhcmVudEZvbGRlcklEO1xyXG5cdFx0dGhpcy5TYXZlKHNvdXJjZUFuZFZhdWx0KTsgLy8gdGhpcyBjYW4gYmUgZG9uZSBhc3luY2hyb25vdXNseSB3aXRob3V0IGFmZmVjdGluZyB0aGUgb3RoZXJzXHJcblx0fVxyXG5cclxuXHRhc3luYyBTYXZlKHNvdXJjZUFuZFZhdWx0OiBTb3VyY2VBbmRWYXVsdCkge1xyXG5cdFx0Y29uc3Qgc291cmNlRm9sZGVyID0gc291cmNlQW5kVmF1bHQuc291cmNlRm9sZGVyO1xyXG5cdFx0Y29uc3QgdmF1bHQgPSBzb3VyY2VBbmRWYXVsdC52YXVsdDtcclxuXHRcdGNvbnN0IGZpbGVQYXRoID0gc291cmNlRm9sZGVyLnZhdWx0UGF0aCArICcvJyArIHRoaXMuaWQgKyAnLmpzb24nO1xyXG5cdFx0Y29uc3QganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuXHRcdGNvbnN0IHRGaWxlID0gdmF1bHQuZ2V0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRpZiAodEZpbGUgPT09IG51bGwpIHtcclxuXHRcdFx0Y29uc3Qgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFx0YXdhaXQgdmF1bHQuYWRhcHRlci53cml0ZShub3JtYWxpemVkUGF0aCwganNvbkRhdGEpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRhd2FpdCB2YXVsdC5tb2RpZnkodEZpbGUsIGpzb25EYXRhKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XHJcbmltcG9ydCB7IFJlYWxGaWxlIH0gZnJvbSBcIi4vcmVhbC1maWxlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2luZ2xlTWVkaWFGaWxlIGV4dGVuZHMgUmVhbEZpbGUge1xyXG5cdFxyXG5cdHByaXZhdGUgZXh0ZW5zaW9uTmFtZTogc3RyaW5nO1xyXG5cdFxyXG5cdGdldCBtZWRpYVR5cGUoKTogc3RyaW5nIHtcclxuXHRcdHN3aXRjaCAodGhpcy5leHRlbnNpb25OYW1lKSB7XHJcblx0XHRcdGNhc2UgJ3BuZyc6XHJcblx0XHRcdGNhc2UgJ2pwZyc6XHJcblx0XHRcdGNhc2UgJ3dlYnAnOlxyXG5cdFx0XHRjYXNlICdoZWljJzpcclxuXHRcdFx0Y2FzZSAnZ2lmJzpcclxuXHRcdFx0XHRyZXR1cm4gJ0ltYWdlJztcclxuXHRcdFx0Y2FzZSAnbXA0JzpcclxuXHRcdFx0Y2FzZSAnTVA0JzpcclxuXHRcdFx0Y2FzZSAnbW92JzpcclxuXHRcdFx0Y2FzZSAnTU9WJzpcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gJ1ZpZGVvJztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG92ZXJyaWRlIGFzeW5jIGdldFNyYyhzbnY6IFNvdXJjZUFuZFZhdWx0KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuXHRcdGNvbnN0IG1lZGlhRmlsZSA9IGF3YWl0IHRoaXMuZ2V0VEZpbGUoc252KTtcclxuXHRcdGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgc252LnZhdWx0LnJlYWRCaW5hcnkobWVkaWFGaWxlKTtcclxuXHRcdGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYXJyYXlCdWZmZXJdKTtcclxuXHRcdGNvbnN0IG1lZGlhVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuXHRcdHJldHVybiBtZWRpYVVybDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgZ2V0VEZpbGUoc252OiBTb3VyY2VBbmRWYXVsdCk6IFByb21pc2U8VEZpbGU+IHtcclxuXHRcdGNvbnN0IG1lZGlhUGF0aCA9IGF3YWl0IHRoaXMuZ2V0UGF0aChzbnYpO1xyXG5cdFx0bGV0IG1lZGlhRmlsZSA9IHNudi52YXVsdC5nZXRGaWxlQnlQYXRoKG1lZGlhUGF0aCk7XHJcblx0XHRpZiAobWVkaWFGaWxlID09PSBudWxsKSB7XHJcblx0XHRcdG1lZGlhRmlsZSA9IHNudi52YXVsdC5nZXRGaWxlQnlQYXRoKG1lZGlhUGF0aCArICcuJyArIHRoaXMuZXh0ZW5zaW9uTmFtZSk7XHJcblx0XHRcdGlmIChtZWRpYUZpbGUgPT09IG51bGwpIHtcclxuXHRcdFx0XHR0aHJvdyBFcnJvcignRmlsZSBub3QgZm91bmQgYXQgcGF0aDogJyArIG1lZGlhUGF0aCArICcgb3IgJyArIG1lZGlhUGF0aCArICcuJyArIHRoaXMuZXh0ZW5zaW9uTmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0c252LnZhdWx0LnJlbmFtZShtZWRpYUZpbGUsIG1lZGlhUGF0aCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbWVkaWFGaWxlO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBnZXRQYXRoKHNudjogU291cmNlQW5kVmF1bHQpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdFx0Y29uc3Qgc291cmNlRm9sZGVyID0gc252LnNvdXJjZUZvbGRlcjtcclxuXHRcdHJldHVybiBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy8nICsgdGhpcy5pZCArICcgQWN0dWFsIEZpbGUnO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBmaWxlVHlwZTogc3RyaW5nLCBwYXJlbnRGb2xkZXJJRDogbnVtYmVyLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFNpbmdsZU1lZGlhRmlsZT4ge1xyXG5cdFx0Y29uc3QgbmV3TWVkaWFGaWxlID0gPFNpbmdsZU1lZGlhRmlsZT4gKGF3YWl0IHN1cGVyLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnYsIGZpbGVUeXBlLCBwYXJlbnRGb2xkZXJJRCwgbmFtZSkpO1xyXG5cdFx0bmV3TWVkaWFGaWxlLmV4dGVuc2lvbk5hbWUgPSAnJztcclxuXHRcdHJldHVybiBuZXdNZWRpYUZpbGU7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGF3YWl0IHN1cGVyLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cclxuXHRcdGNvbnN0IGltYWdlRGlzcGxheUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdGltYWdlRGlzcGxheUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NoYW5nZSBmaWxlJyB9ICk7XHJcblx0XHRjb25zdCBuZXdGaWxlSW5wdXQgPSBpbWFnZURpc3BsYXlDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnZmlsZScgfSApO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuRGlzcGxheU1lZGlhT25seShpbWFnZURpc3BsYXlDb250YWluZXIsIHNudik7XHJcblx0XHRcclxuXHRcdG5ld0ZpbGVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBvbGRGaWxlID0gYXdhaXQgdGhpcy5nZXRURmlsZShzbnYpO1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRhd2FpdCBzbnYudmF1bHQuZGVsZXRlKG9sZEZpbGUpO1xyXG5cdFx0XHRcdH0gZmluYWxseSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLlNhdmVOZXdGaWxlKHNudiwgbmV3RmlsZUlucHV0KTtcclxuXHRcdFx0XHRcdHRoaXMuRGlzcGxheShzbnYsIGNvbnRhaW5lcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIFNhdmVOZXdGaWxlKHNudjogU291cmNlQW5kVmF1bHQsIGZpbGVJbnB1dDogSFRNTElucHV0RWxlbWVudCkge1xyXG5cdFx0Y29uc3QgZmlsZUFycmF5ID0gZmlsZUlucHV0LmZpbGVzO1xyXG5cdFx0aWYgKGZpbGVBcnJheSA9PT0gbnVsbCkge1xyXG5cdFx0XHR0aHJvdyBFcnJvcihcIm5vIGZpbGUgd2FzIHNlbGVjdGVkXCIpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgbWVkaWFGaWxlID0gZmlsZUFycmF5WzBdO1xyXG5cdFx0YXdhaXQgdGhpcy5TZXRGaWxlVG8oc252LCBtZWRpYUZpbGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgU2V0RmlsZVRvKHNudjogU291cmNlQW5kVmF1bHQsIG1lZGlhRmlsZTogRmlsZSkge1xyXG5cdFx0Y29uc3QgcGFydHNPZlBhdGggPSBtZWRpYUZpbGUubmFtZS5zcGxpdCgnLicpO1xyXG5cdFx0Y29uc3QgZXh0ZW5zaW9uID0gcGFydHNPZlBhdGhbcGFydHNPZlBhdGgubGVuZ3RoIC0gMV07XHJcblx0XHR0aGlzLmZpbGVOYW1lID0gcGFydHNPZlBhdGhbMF07XHJcblx0XHR0aGlzLmV4dGVuc2lvbk5hbWUgPSBleHRlbnNpb247XHJcblx0XHRjb25zdCBwYXRoID0gc252LnNvdXJjZUZvbGRlci52YXVsdFBhdGggKyAnLycgKyB0aGlzLmlkICsgJyBBY3R1YWwgRmlsZSc7XHJcblx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgocGF0aCk7XHJcblx0XHRhd2FpdCBzbnYudmF1bHQuYWRhcHRlci53cml0ZUJpbmFyeShub3JtYWxpemVkUGF0aCwgYXdhaXQgbWVkaWFGaWxlLmFycmF5QnVmZmVyKCkpO1xyXG5cdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0fVxyXG5cclxuXHRhc3luYyBEaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2OiBIVE1MRGl2RWxlbWVudCwgc252OiBTb3VyY2VBbmRWYXVsdCkge1xyXG5cdFx0YXdhaXQgc3VwZXIuRGlzcGxheU1lZGlhT25seShtZWRpYURpdiwgc252KTtcclxuXHRcdGlmICh0aGlzLm1lZGlhVHlwZSA9PT0gJ0ltYWdlJykge1xyXG5cdFx0XHRjb25zdCBpbWFnZUVsZW1lbnQgPSBtZWRpYURpdi5jcmVhdGVFbCgnaW1nJyk7XHJcblx0XHRcdGltYWdlRWxlbWVudC5zcmMgPSBhd2FpdCB0aGlzLmdldFNyYyhzbnYpO1xyXG5cdFx0XHRpbWFnZUVsZW1lbnQuc3R5bGUub2JqZWN0Rml0ID0gJ2NvbnRhaW4nO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc3QgdmlkZW9FbGVtZW50ID0gbWVkaWFEaXYuY3JlYXRlRWwoJ3ZpZGVvJyk7XHJcblx0XHRcdHZpZGVvRWxlbWVudC5zcmMgPSBhd2FpdCB0aGlzLmdldFNyYyhzbnYpO1xyXG5cdFx0XHR2aWRlb0VsZW1lbnQuY29udHJvbHMgPSB0cnVlO1xyXG5cdFx0XHR2aWRlb0VsZW1lbnQubG9vcCA9IHRydWU7XHJcblx0XHRcdHZpZGVvRWxlbWVudC5hdXRvcGxheSA9IHRydWU7XHJcblx0XHRcdHZpZGVvRWxlbWVudC5zdHlsZS5vYmplY3RGaXQgPSAnY29udGFpbic7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZWFsRmlsZSBleHRlbmRzIENGRUZpbGUge1xyXG5cdGFic3RyYWN0IGdldFNyYyhzb3VyY2VBbmRWYXVsdDogU291cmNlQW5kVmF1bHQpOiBQcm9taXNlPHN0cmluZz47XHJcblx0YXN5bmMgRGlzcGxheU1lZGlhT25seShtZWRpYURpdjogSFRNTERpdkVsZW1lbnQsIHNudjogU291cmNlQW5kVmF1bHQpIHtcclxuXHRcdG1lZGlhRGl2LmVtcHR5KCk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgQ0ZFRmlsZUhhbmRsZXIgfSBmcm9tIFwiLi9jZmUtZmlsZS1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IFNpbmdsZU1lZGlhRmlsZSB9IGZyb20gXCIuL3NpbmdsZS1tZWRpYS1maWxlXCI7XHJcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XHJcblxyXG4vKipcclxuICogQSBjaGlsZCBjbGFzcyBvZiB0aGUgQ0ZFRmlsZSBjbGFzcy4gUmVwcmVzZW50cyBhIGZvbGRlciB3aXRoaW4gdGhlIFNvdXJjZUZvbGRlci5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBGb2xkZXIgZXh0ZW5kcyBDRkVGaWxlIHtcclxuXHQvKipcclxuXHQgKiBUaGUgSURzIG9mIGZpbGVzIGNvbnRhaW5lZCBpbiB0aGlzIGZvbGRlclxyXG5cdCAqL1xyXG5cdGNvbnRhaW5lZEZpbGVJRHM6IG51bWJlcltdO1xyXG5cclxuXHQvKipcclxuXHQgKiBAb3ZlcnJpZGUgRm9sZGVyIGxheWVyOlxyXG5cdCAqIFxyXG5cdCAqIGluaXRpYWxpemVzIHRoZSBjb250YWluZWQgZmlsZSBpZHMgYXJyYXkgZm9yIHRoZSBmb2xkZXIgb2JqZWN0XHJcblx0ICovXHJcblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBmaWxlVHlwZTogc3RyaW5nLCBwYXJlbnRGb2xkZXJJRDogbnVtYmVyLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEZvbGRlcj4ge1xyXG5cdFx0Y29uc3QgdW5maW5pc2hlZEZvbGRlciA9IDxGb2xkZXI+IChhd2FpdCBzdXBlci5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252LCBmaWxlVHlwZSwgcGFyZW50Rm9sZGVySUQsIG5hbWUpKTtcclxuXHRcdHVuZmluaXNoZWRGb2xkZXIuY29udGFpbmVkRmlsZUlEcyA9IFtdO1xyXG5cdFx0cmV0dXJuIHVuZmluaXNoZWRGb2xkZXI7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0XHRhd2FpdCBzdXBlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XHJcblx0XHRjb25zdCBjcmVhdGVCdXR0b25zRGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdGNvbnN0IG5ld0ZpbGVCdXR0b24gPSBjcmVhdGVCdXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDcmVhdGUgTmV3IEZpbGUnIH0gKTtcclxuXHRcdGNvbnN0IHBvcFVwQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoKTtcclxuXHRcdG5ld0ZpbGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5Mb2FkQ3JlYXRlRmlsZVVJKHNudiwgbWFpbkRpdiwgcG9wVXBDb250YWluZXIpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgbWVkaWFGaWxlc0J1dHRvbiA9IGNyZWF0ZUJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1VwbG9hZCBNdWx0aXBsZSBJbWFnZXMgLyBWaWRlb3MnIH0gKTtcclxuXHRcdG1lZGlhRmlsZXNCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5Mb2FkRmlsZVNlbGVjdGlvblVJKHNudiwgbWFpbkRpdiwgcG9wVXBDb250YWluZXIpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgZm9sZGVyRGlzcGxheUNvbnRhaW5lciA9IG1haW5EaXYuY3JlYXRlRGl2KCdjZmUtZ3JpZCcpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbnRhaW5lZEZpbGVJRHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgY29udGFpbmVkRmlsZSA9IGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgdGhpcy5jb250YWluZWRGaWxlSURzW2ldKTtcclxuXHRcdFx0aWYgKGNvbnRhaW5lZEZpbGUgIT09IG51bGwpIHtcclxuXHRcdFx0XHRhd2FpdCBjb250YWluZWRGaWxlLkRpc3BsYXlUaHVtYm5haWwoc252LCBmb2xkZXJEaXNwbGF5Q29udGFpbmVyLmNyZWF0ZURpdigpLCBtYWluRGl2KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwcml2YXRlIExvYWRDcmVhdGVGaWxlVUkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQsIGRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGRpdi5lbXB0eSgpO1xyXG5cdFx0Y29uc3QgcG9wdXBEaXYgPSBkaXYuY3JlYXRlRGl2KCdjZmUtcG9wdXAnKTtcclxuXHRcdGNvbnN0IHdyYXBwZXJEaXYgPSBwb3B1cERpdi5jcmVhdGVEaXYoKTtcclxuXHRcdHdyYXBwZXJEaXYuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG5cdFx0Y29uc3QgZXhpdEJ1dHRvbiA9IHdyYXBwZXJEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1gnLCBjbHM6ICdjZmUtcmVtb3ZlLWJ1dHRvbicgfSApO1xyXG5cdFx0ZXhpdEJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcblx0XHRleGl0QnV0dG9uLnN0eWxlLnRvcCA9ICcwJSc7XHJcblx0XHRleGl0QnV0dG9uLnN0eWxlLnJpZ2h0ID0gJzAlJztcclxuXHRcdFxyXG5cdFx0cG9wdXBEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdDaG9vc2UgYSBGaWxlIFR5cGUgdG8gY3JlYXRlOicgfSApO1xyXG5cdFx0Y29uc3QgZmlsZVR5cGVEcm9wZG93biA9IHBvcHVwRGl2LmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuXHRcdHBvcHVwRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnRmlsZSBOYW1lOicgfSApO1xyXG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gcG9wdXBEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnVW5uYW1lZCcgfSApO1xyXG5cdFx0cG9wdXBEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdQYXJlbnQgRm9sZGVyIElEOicgfSApO1xyXG5cdFx0Y29uc3QgcGFyZW50Rm9sZGVySURJbnB1dCA9IHBvcHVwRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJycgKyB0aGlzLmlkIH0gKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgQ0ZFRmlsZUhhbmRsZXIuS25vd25GaWxlVHlwZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3Qgb3B0aW9uID0gZmlsZVR5cGVEcm9wZG93bi5jcmVhdGVFbCgnb3B0aW9uJyk7XHJcblx0XHRcdG9wdGlvbi52YWx1ZSA9IENGRUZpbGVIYW5kbGVyLktub3duRmlsZVR5cGVzW2ldO1xyXG5cdFx0XHRvcHRpb24udGV4dCA9IENGRUZpbGVIYW5kbGVyLktub3duRmlsZVR5cGVzW2ldO1xyXG5cdFx0XHRmaWxlVHlwZURyb3Bkb3duLm9wdGlvbnMuYWRkKG9wdGlvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gcG9wdXBEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NyZWF0ZScgfSApO1xyXG5cclxuXHRcdGNvbnN0IG9uRXhpdCA9ICgpID0+IHtcclxuXHRcdFx0cG9wdXBEaXYucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBvblN1Ym1pdCA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0YXdhaXQgQ0ZFRmlsZUhhbmRsZXIuQ3JlYXRlTmV3KHNudiwgZmlsZVR5cGVEcm9wZG93bi52YWx1ZSwgcGFyc2VJbnQocGFyZW50Rm9sZGVySURJbnB1dC52YWx1ZSksIG5hbWVJbnB1dC52YWx1ZSk7XHJcblx0XHRcdGV4aXRCdXR0b24uY2xpY2soKTtcclxuXHRcdFx0Y29uc3QgcmVzZXR0ZWRGb2xkZXIgPSBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIHRoaXMuaWQpO1xyXG5cdFx0XHRhd2FpdCByZXNldHRlZEZvbGRlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XHJcblx0XHR9XHJcblx0XHRleGl0QnV0dG9uLm9uY2xpY2sgPSBvbkV4aXQ7XHJcblx0XHRzdWJtaXRCdXR0b24ub25jbGljayA9IG9uU3VibWl0O1xyXG5cclxuXHRcdHBvcHVwRGl2Lm9ua2V5ZG93biA9IGFzeW5jIChldmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0XHRcdG9uRXhpdCgpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xyXG5cdFx0XHRcdGF3YWl0IG9uU3VibWl0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgTG9hZEZpbGVTZWxlY3Rpb25VSShzbnY6IFNvdXJjZUFuZFZhdWx0LCBtYWluRGl2OiBIVE1MRGl2RWxlbWVudCwgZGl2OiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0ZGl2LmVtcHR5KCk7XHJcblx0XHRjb25zdCBwb3B1cERpdiA9IGRpdi5jcmVhdGVEaXYoJ2NmZS1wb3B1cCcpO1xyXG5cdFx0Y29uc3Qgd3JhcHBlckRpdiA9IHBvcHVwRGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0d3JhcHBlckRpdi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcblx0XHRwb3B1cERpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0Nob29zZSB5b3VyIGZpbGVzJyB9ICk7XHJcblx0XHRjb25zdCBmaWxlSW5wdXQgPSBwb3B1cERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJyB9ICk7XHJcblx0XHRmaWxlSW5wdXQubXVsdGlwbGUgPSB0cnVlO1xyXG5cdFx0cG9wdXBEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdQYXJlbnQgRm9sZGVyIElEOiAnIH0gKTtcclxuXHRcdGNvbnN0IHBhcmVudEZvbGRlcklESW5wdXQgPSBwb3B1cERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcnICsgdGhpcy5pZCB9ICk7XHJcblx0XHRjb25zdCBleGl0QnV0dG9uID0gd3JhcHBlckRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnWCcsIGNsczogJ2NmZS1yZW1vdmUtYnV0dG9uJyB9ICk7XHJcblx0XHRleGl0QnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHRcdGV4aXRCdXR0b24uc3R5bGUudG9wID0gJzAlJztcclxuXHRcdGV4aXRCdXR0b24uc3R5bGUucmlnaHQgPSAnMCUnO1xyXG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gcG9wdXBEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NyZWF0ZScgfSApO1xyXG5cdFx0XHJcblx0XHRjb25zdCBvbkV4aXQgPSAoKSA9PiB7XHJcblx0XHRcdHBvcHVwRGl2LnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3Qgb25TdWJtaXQgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IGZpbGVBcnJheSA9IGZpbGVJbnB1dC5maWxlcztcclxuXHRcdFx0Y29uc3QgcGFyZW50Rm9sZGVySUQgPSBwYXJzZUludChwYXJlbnRGb2xkZXJJRElucHV0LnZhbHVlKTtcclxuXHRcdFx0aWYgKGZpbGVBcnJheSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZUFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjZmVGaWxlID0gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuQ3JlYXRlTmV3KHNudiwgJ1NpbmdsZSBNZWRpYSBGaWxlJywgcGFyZW50Rm9sZGVySUQsIGZpbGVBcnJheVtpXS5uYW1lKTtcclxuXHRcdFx0XHRcdGNvbnN0IG1lZGlhRmlsZSA9IE9iamVjdC5hc3NpZ24obmV3IFNpbmdsZU1lZGlhRmlsZSgpLCBjZmVGaWxlKTtcclxuXHRcdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5TZXRGaWxlVG8oc252LCBmaWxlQXJyYXlbaV0pO1xyXG5cdFx0XHRcdFx0YXdhaXQgbWVkaWFGaWxlLlNhdmUoc252KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZXhpdEJ1dHRvbi5jbGljaygpO1xyXG5cdFx0XHRcdGNvbnN0IHJlc2V0dGVkRm9sZGVyID0gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCB0aGlzLmlkKTtcclxuXHRcdFx0XHRhd2FpdCByZXNldHRlZEZvbGRlci5EaXNwbGF5KHNudiwgbWFpbkRpdik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGV4aXRCdXR0b24ub25jbGljayA9IG9uRXhpdDtcclxuXHRcdHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gb25TdWJtaXQ7XHJcblxyXG5cdFx0cG9wdXBEaXYub25rZXlkb3duID0gYXN5bmMgKGV2ZW50KSA9PiB7XHJcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0b25FeGl0KCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0YXdhaXQgb25TdWJtaXQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQ0ZFRmlsZSB9IGZyb20gXCIuL2NmZS1maWxlXCI7XHJcbmltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBSZWFsRmlsZSB9IGZyb20gXCIuL3JlYWwtZmlsZVwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXlsaXN0IGV4dGVuZHMgQ0ZFRmlsZSB7XHJcblx0cHJpdmF0ZSBjdXJyZW50VmlkZW9JbmRleDogbnVtYmVyO1xyXG5cdHZpZGVvSURzOiBudW1iZXJbXTtcclxuXHJcblx0cHJpdmF0ZSB2aWRlb09yZGVyOiBzdHJpbmc7XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIGdldE5leHRWaWRlb0lESW5PcmRlcihwbGF5bGlzdDogUGxheWxpc3QpIHtcclxuXHRcdGxldCBuZXh0VmlkZW9JbmRleCA9IHBsYXlsaXN0LmN1cnJlbnRWaWRlb0luZGV4ICsgMTtcclxuXHRcdGlmIChuZXh0VmlkZW9JbmRleCA+PSBwbGF5bGlzdC52aWRlb0lEcy5sZW5ndGgpIHtcclxuXHRcdFx0bmV4dFZpZGVvSW5kZXggPSAwO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG5leHRWaWRlb0luZGV4O1xyXG5cdH1cclxuXHRwcml2YXRlIHN0YXRpYyBnZXROZXh0VmlkZW9JRFNodWZmbGVkKHBsYXlsaXN0OiBQbGF5bGlzdCkge1xyXG5cdFx0bGV0IG5leHRWaWRlb0luZGV4ID0gTWF0aC5yYW5kb20oKSAqIHBsYXlsaXN0LnZpZGVvSURzLmxlbmd0aDtcclxuXHRcdG5leHRWaWRlb0luZGV4ID0gTWF0aC5mbG9vcihuZXh0VmlkZW9JbmRleCk7XHJcblx0XHRyZXR1cm4gbmV4dFZpZGVvSW5kZXg7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHN0YXRpYyBhc3luYyBsb2FkTmV4dFZpZGVvKHNvdXJjZUFuZFZhdWx0OiBTb3VyY2VBbmRWYXVsdCwgcGxheWxpc3Q6IFBsYXlsaXN0LCB2aWRlb0VsZW1lbnQ6IEhUTUxWaWRlb0VsZW1lbnQpIHtcclxuXHRcdGlmIChwbGF5bGlzdC52aWRlb09yZGVyID09PSAnc2h1ZmZsZWQnKSB7XHJcblx0XHRcdHBsYXlsaXN0LmN1cnJlbnRWaWRlb0luZGV4ID0gUGxheWxpc3QuZ2V0TmV4dFZpZGVvSURTaHVmZmxlZChwbGF5bGlzdCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwbGF5bGlzdC5jdXJyZW50VmlkZW9JbmRleCA9IFBsYXlsaXN0LmdldE5leHRWaWRlb0lESW5PcmRlcihwbGF5bGlzdCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBuZXh0VmlkZW8gPSA8UmVhbEZpbGU+IChhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzb3VyY2VBbmRWYXVsdCwgcGxheWxpc3QudmlkZW9JRHNbcGxheWxpc3QuY3VycmVudFZpZGVvSW5kZXhdKSk7XHJcblxyXG5cdFx0dmlkZW9FbGVtZW50LnNyYyA9IGF3YWl0IG5leHRWaWRlby5nZXRTcmMoc291cmNlQW5kVmF1bHQpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBmaWxlVHlwZTogc3RyaW5nLCBwYXJlbnRGb2xkZXJJRDogbnVtYmVyLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFBsYXlsaXN0PiB7XHJcblx0XHRjb25zdCBuZXdQbGF5bGlzdEZpbGUgPSA8UGxheWxpc3Q+IChhd2FpdCBzdXBlci5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252LCBmaWxlVHlwZSwgcGFyZW50Rm9sZGVySUQsIG5hbWUpKTtcclxuXHRcdG5ld1BsYXlsaXN0RmlsZS52aWRlb0lEcyA9IFtdO1xyXG5cdFx0cmV0dXJuIG5ld1BsYXlsaXN0RmlsZTtcclxuXHR9XHJcblxyXG5cdG92ZXJyaWRlIGFzeW5jIERpc3BsYXkoc252OiBTb3VyY2VBbmRWYXVsdCwgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0YXdhaXQgc3VwZXIuRGlzcGxheShzbnYsIGNvbnRhaW5lcik7XHJcblx0XHR0aGlzLmN1cnJlbnRWaWRlb0luZGV4ID0gMDtcclxuXHRcdGNvbnN0IHZpZGVvRGlzcGxheUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NmZS1kaXNwbGF5LXZpZGVvJyk7XHJcblx0XHRjb25zdCB2aWRlb0VsZW1lbnQgPSB2aWRlb0Rpc3BsYXlDb250YWluZXIuY3JlYXRlRWwoJ3ZpZGVvJyk7XHJcblx0XHRjb25zdCBidXR0b25zQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignaGJveCcpO1xyXG5cdFx0Y29uc3QgaGlkZUJ1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ2hpZGUgdmlkZW8nIH0gKTtcclxuXHRcdGhpZGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0aWYgKGhpZGVCdXR0b24udGV4dENvbnRlbnQgPT09ICdoaWRlIHZpZGVvJykge1xyXG5cdFx0XHRcdGhpZGVCdXR0b24udGV4dENvbnRlbnQgPSAnc2hvdyB2aWRlbyc7XHJcblx0XHRcdFx0dmlkZW9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aGlkZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdoaWRlIHZpZGVvJztcclxuXHRcdFx0XHR2aWRlb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc3Qgc2h1ZmZsZUJ1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ3NodWZmbGUnIH0gKTtcclxuXHRcdHRoaXMudmlkZW9PcmRlciA9ICdpbiBvcmRlcic7XHJcblx0XHRzaHVmZmxlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdGlmIChzaHVmZmxlQnV0dG9uLnRleHRDb250ZW50ID09PSAnc2h1ZmZsZScpIHtcclxuXHRcdFx0XHRzaHVmZmxlQnV0dG9uLnRleHRDb250ZW50ID0gJ2dvIGluIG9yZGVyJztcclxuXHRcdFx0XHR0aGlzLnZpZGVvT3JkZXIgPSAnc2h1ZmZsZWQnO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHNodWZmbGVCdXR0b24udGV4dENvbnRlbnQgPSAnc2h1ZmZsZSc7XHJcblx0XHRcdFx0dGhpcy52aWRlb09yZGVyID0gJ2luIG9yZGVyJztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc3QgbmV4dEJ1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ25leHQgdmlkZW8nIH0gKTtcclxuXHRcdG5leHRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0YXdhaXQgUGxheWxpc3QubG9hZE5leHRWaWRlbyhzbnYsIHRoaXMsIHZpZGVvRWxlbWVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgZmlyc3RWaWRlbyA9IDxSZWFsRmlsZT4gKGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgdGhpcy52aWRlb0lEc1t0aGlzLmN1cnJlbnRWaWRlb0luZGV4XSkpO1xyXG5cdFx0XHR2aWRlb0VsZW1lbnQuc3JjID0gYXdhaXQgZmlyc3RWaWRlby5nZXRTcmMoc252KTtcclxuXHRcdFx0dmlkZW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcclxuXHRcdFx0dmlkZW9FbGVtZW50LmNvbnRyb2xzID0gdHJ1ZTtcclxuXHRcdFx0dmlkZW9FbGVtZW50Lm9udGltZXVwZGF0ZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRpZiAodmlkZW9FbGVtZW50LmVuZGVkKSB7XHJcblx0XHRcdFx0XHRhd2FpdCBQbGF5bGlzdC5sb2FkTmV4dFZpZGVvKHNudiwgdGhpcywgdmlkZW9FbGVtZW50KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NoYW5nZSBmaWxlcycgfSApO1xyXG5cdFx0XHRsZXQgY291bnQgPSAwO1xyXG5cdFx0XHRjb25zdCBtZWRpYUlESW5wdXREaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblx0XHRcdGNvbnN0IG5ld0ZpbGVCdXR0b24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FkZCBGaWxlJyB9ICk7XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52aWRlb0lEcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IGNvdW50O1xyXG5cdFx0XHRcdGNvdW50Kys7XHJcblx0XHRcdFx0Y29uc3QgbWVkaWFJRERpdiA9IG1lZGlhSURJbnB1dERpdi5jcmVhdGVEaXYoJ2hib3gnKTtcclxuXHRcdFx0XHRjb25zdCBpZElucHV0ID0gbWVkaWFJRERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6ICcnICsgdGhpcy52aWRlb0lEc1tjdXJyZW50SW5kZXhdIH0gKTtcclxuXHRcdFx0XHRjb25zdCBkZWxldGVCdXR0b24gPSBtZWRpYUlERGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdkZWxldGUnIH0gKTtcclxuXHRcdFx0XHRkZWxldGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0XHRcdG1lZGlhSUREaXYucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHR0aGlzLnZpZGVvSURzLnNwbGljZShjdXJyZW50SW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0dGhpcy5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWRJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudmlkZW9JRHNbY3VycmVudEluZGV4XSA9IHBhcnNlSW50KGlkSW5wdXQudmFsdWUpO1xyXG5cdFx0XHRcdFx0dGhpcy5TYXZlKHNudik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdG5ld0ZpbGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBjb3VudDtcclxuXHRcdFx0XHRjb3VudCsrO1xyXG5cdFx0XHRcdGNvbnN0IG1lZGlhSUREaXYgPSBtZWRpYUlESW5wdXREaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRcdFx0Y29uc3QgaWRJbnB1dCA9IG1lZGlhSUREaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcgfSApO1xyXG5cdFx0XHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IG1lZGlhSUREaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ2RlbGV0ZScgfSApO1xyXG5cdFx0XHRcdGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0bWVkaWFJRERpdi5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdHRoaXMudmlkZW9JRHMuc3BsaWNlKGN1cnJlbnRJbmRleCwgMSk7XHJcblx0XHRcdFx0XHR0aGlzLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZElucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy52aWRlb0lEc1tjdXJyZW50SW5kZXhdID0gcGFyc2VJbnQoaWRJbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0XHR0aGlzLlNhdmUoc252KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xyXG5pbXBvcnQgeyBSZWFsRmlsZSB9IGZyb20gXCIuL3JlYWwtZmlsZVwiO1xyXG5pbXBvcnQgeyBTaW5nbGVNZWRpYUZpbGUgfSBmcm9tIFwiLi9zaW5nbGUtbWVkaWEtZmlsZVwiO1xyXG5pbXBvcnQgeyBTb3VyY2VBbmRWYXVsdCB9IGZyb20gXCIuL3NudlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZhcmlhbnRNZWRpYUZpbGUgZXh0ZW5kcyBSZWFsRmlsZSB7XHJcblxyXG5cdHByaXZhdGUgdmFyaWFudElEczogbnVtYmVyW107XHJcblxyXG5cdGFzeW5jIGdldFNyYyhzbnY6IFNvdXJjZUFuZFZhdWx0LCBpbmRleDogbnVtYmVyIHwgbnVsbCA9IG51bGwpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdFx0aWYgKGluZGV4ID09PSBudWxsKSB7XHJcblx0XHRcdGluZGV4ID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSkgKiB0aGlzLnZhcmlhbnRJRHMubGVuZ3RoKTtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGNvbnRhaW5lZE1lZGlhID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCB0aGlzLnZhcmlhbnRJRHNbaW5kZXhdKTtcclxuXHRcdHJldHVybiBhd2FpdCBjb250YWluZWRNZWRpYS5nZXRTcmMoc252KTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBvdmVycmlkZSBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252OiBTb3VyY2VBbmRWYXVsdCwgZmlsZVR5cGU6IHN0cmluZywgcGFyZW50Rm9sZGVySUQ6IG51bWJlciwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxWYXJpYW50TWVkaWFGaWxlPiB7XHJcblx0XHRjb25zdCBuZXdNZWRpYUZpbGUgPSA8VmFyaWFudE1lZGlhRmlsZT4gKGF3YWl0IHN1cGVyLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnYsIGZpbGVUeXBlLCBwYXJlbnRGb2xkZXJJRCwgbmFtZSkpO1xyXG5cdFx0bmV3TWVkaWFGaWxlLnZhcmlhbnRJRHMgPSBbXTtcclxuXHRcdHJldHVybiBuZXdNZWRpYUZpbGU7XHJcblx0fVxyXG5cclxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGF3YWl0IHN1cGVyLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cclxuXHRcdGNvbnN0IGltYWdlRGlzcGxheUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdGltYWdlRGlzcGxheUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NoYW5nZSBmaWxlcycgfSApO1xyXG5cdFx0Y29uc3QgbWVkaWFJRElucHV0RGl2ID0gaW1hZ2VEaXNwbGF5Q29udGFpbmVyLmNyZWF0ZURpdigndmJveCcpO1xyXG5cdFx0Y29uc3QgbmV3RmlsZUJ1dHRvbiA9IGltYWdlRGlzcGxheUNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQWRkIEZpbGUnIH0gKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52YXJpYW50SURzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IGk7XHJcblx0XHRcdGNvbnN0IG1lZGlhSUREaXYgPSBtZWRpYUlESW5wdXREaXYuY3JlYXRlRGl2KCdoYm94Jyk7XHJcblx0XHRcdGNvbnN0IGlkSW5wdXQgPSBtZWRpYUlERGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJycgKyB0aGlzLnZhcmlhbnRJRHNbY3VycmVudEluZGV4XSB9ICk7XHJcblx0XHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IG1lZGlhSUREaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ2RlbGV0ZScgfSApO1xyXG5cdFx0XHRkZWxldGVCdXR0b24uY2xhc3NOYW1lID0gJ2NmZS1yZW1vdmUtYnV0dG9uJztcclxuXHRcdFx0ZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0bWVkaWFJRERpdi5yZW1vdmUoKTtcclxuXHRcdFx0XHR0aGlzLnZhcmlhbnRJRHMuc3BsaWNlKGN1cnJlbnRJbmRleCwgMSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZElucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMudmFyaWFudElEc1tjdXJyZW50SW5kZXhdID0gcGFyc2VJbnQoaWRJbnB1dC52YWx1ZSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5EaXNwbGF5KHNudiwgY29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0bmV3RmlsZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnZhcmlhbnRJRHMucHVzaCgtMSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xyXG5cdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXkoc252LCBjb250YWluZXIpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgbWVkaWFEaXYgPSBpbWFnZURpc3BsYXlDb250YWluZXIuY3JlYXRlRGl2KCd2Ym94Jyk7XHJcblx0XHRcclxuXHRcdGF3YWl0IHRoaXMuRGlzcGxheU1lZGlhT25seShtZWRpYURpdiwgc252KTtcclxuXHR9XHJcblx0YXN5bmMgRGlzcGxheU1lZGlhT25seShtZWRpYURpdjogSFRNTERpdkVsZW1lbnQsIHNudjogU291cmNlQW5kVmF1bHQsIGluZGV4ID0gLTEpIHtcclxuXHRcdC8vIFRoaXMgY2FsbCBpcyBub3QgbmVlZGVkIGJlY2F1c2UgY29udGFpbmVkTWVkaWEuRGlzcGxheU1lZGlhT25seSgpIGNhbGxzIGl0IGFueXdheVxyXG5cdFx0Ly8gYXdhaXQgc3VwZXIuRGlzcGxheU1lZGlhT25seVxyXG5cdFx0aWYgKGluZGV4ID09PSAtMSkge1xyXG5cdFx0XHRpbmRleCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkpICogdGhpcy52YXJpYW50SURzLmxlbmd0aCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBjb250YWluZWRNZWRpYSA9IDxTaW5nbGVNZWRpYUZpbGU+IGF3YWl0IENGRUZpbGVIYW5kbGVyLkxvYWRGaWxlKHNudiwgdGhpcy52YXJpYW50SURzW2luZGV4XSk7XHJcblx0XHRhd2FpdCBjb250YWluZWRNZWRpYS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQ0ZFRmlsZSB9IGZyb20gXCIuL2NmZS1maWxlXCI7XHJcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XHJcbmltcG9ydCB7IFNvdXJjZUZvbGRlciB9IGZyb20gXCIuL3NvdXJjZS1mb2xkZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBBIGNoaWxkIGNsYXNzIG9mIHRoZSBDRkVGaWxlIGNsYXNzLiBSZXByZXNlbnRzIGEgZm9sZGVyIHdpdGhpbiB0aGUgU291cmNlRm9sZGVyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNvdXJjZUZvbGRlclNob3J0Y3V0IGV4dGVuZHMgQ0ZFRmlsZSB7XHJcblx0LyoqXHJcblx0ICogVGhlIElEcyBvZiBmaWxlcyBjb250YWluZWQgaW4gdGhpcyBmb2xkZXJcclxuXHQgKi9cclxuXHRwYXRoVG9PdGhlclNvdXJjZTogc3RyaW5nO1xyXG5cclxuXHQvKipcclxuXHQgKiBAb3ZlcnJpZGUgRm9sZGVyIGxheWVyOlxyXG5cdCAqIFxyXG5cdCAqIGluaXRpYWxpemVzIHRoZSBjb250YWluZWQgZmlsZSBpZHMgYXJyYXkgZm9yIHRoZSBmb2xkZXIgb2JqZWN0XHJcblx0ICovXHJcblx0c3RhdGljIG92ZXJyaWRlIGFzeW5jIENyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBmaWxlVHlwZTogc3RyaW5nLCBwYXJlbnRGb2xkZXJJRDogbnVtYmVyLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFNvdXJjZUZvbGRlclNob3J0Y3V0PiB7XHJcblx0XHRjb25zdCB1bmZpbmlzaGVkRm9sZGVyID0gPFNvdXJjZUZvbGRlclNob3J0Y3V0PiAoYXdhaXQgc3VwZXIuQ3JlYXRlTmV3RmlsZUZvckxheWVyKHNudiwgZmlsZVR5cGUsIHBhcmVudEZvbGRlcklELCBuYW1lKSk7XHJcblx0XHR1bmZpbmlzaGVkRm9sZGVyLnBhdGhUb090aGVyU291cmNlID0gJyc7XHJcblx0XHRyZXR1cm4gdW5maW5pc2hlZEZvbGRlcjtcclxuXHR9XHJcblxyXG5cdG92ZXJyaWRlIGFzeW5jIERpc3BsYXkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcclxuXHRcdGF3YWl0IHN1cGVyLkRpc3BsYXkoc252LCBtYWluRGl2KTtcclxuXHRcdGNvbnN0IGlucHV0RGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcclxuXHRcdGlucHV0RGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnUGF0aCB0byBPdGhlciBTb3VyY2UgRm9sZGVyJyB9ICk7XHJcblx0XHRjb25zdCBwYXRoSW5wdXQgPSBpbnB1dERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JyB9ICk7XHJcblx0XHRjb25zdCBnb0J1dHRvbiA9IGlucHV0RGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHbycgfSApO1xyXG5cdFx0cGF0aElucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnBhdGhUb090aGVyU291cmNlID0gcGF0aElucHV0LnZhbHVlO1xyXG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcclxuXHRcdH1cclxuXHRcdGdvQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG90aGVyU291cmNlID0gYXdhaXQgU291cmNlRm9sZGVyLkNyZWF0ZU9yTG9hZFNvdXJjZUZvbGRlcih0aGlzLnBhdGhUb090aGVyU291cmNlLCBzbnYudmF1bHQpO1xyXG5cdFx0XHRvdGhlclNvdXJjZS5EaXNwbGF5KG1haW5EaXYsIHNudi52YXVsdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdH1cclxuIiwgImV4cG9ydCBjbGFzcyBId2F5dSB7XHJcblx0c3RhdGljIERpc3BsYXkoZGl2OiBIVE1MRGl2RWxlbWVudCwgdGV4dCA9ICcnLCBmb250U2l6ZSA9IDIwLCBpc1ZlcnRpY2FsID0gdHJ1ZSk6IEhUTUxFbGVtZW50IHtcclxuXHRcdGNvbnN0IHRleHRFbGVtZW50ID0gZGl2LmNyZWF0ZURpdigpO1xyXG5cdFx0dGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0dGV4dEVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IGlzVmVydGljYWwgPyAnSHdheXVSZWFsJyA6ICdId2F5dUhvcml6b250YWwnO1xyXG5cdFx0dGV4dEVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArICdweCc7XHJcblx0XHRpZiAoaXNWZXJ0aWNhbCkge1xyXG5cdFx0XHR0ZXh0RWxlbWVudC5zdHlsZS53cml0aW5nTW9kZSA9ICd2ZXJ0aWNhbC1scic7XHJcblx0XHRcdHRleHRFbGVtZW50LnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0JztcclxuXHRcdH1cclxuXHRcdHJldHVybiB0ZXh0RWxlbWVudDtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBDcmVhdGVUZXh0QXJlYShkaXY6IEhUTUxEaXZFbGVtZW50LCBleGlzdGluZ1RleHQgPSAnJywgZm9udFNpemUgPSAyMCwgaXNWZXJ0aWNhbCA9IHRydWUpOiBIVE1MVGV4dEFyZWFFbGVtZW50IHtcclxuXHRcdGNvbnN0IHRleHRBcmVhID0gZGl2LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgdGV4dDogZXhpc3RpbmdUZXh0IH0gKTtcclxuXHRcdHRleHRBcmVhLnN0eWxlLmZvbnRGYW1pbHkgPSBpc1ZlcnRpY2FsID8gJ0h3YXl1UmVhbCcgOiAnSHdheXVIb3Jpem9udGFsJztcclxuXHRcdHRleHRBcmVhLnN0eWxlLmZvbnRTaXplID0gZm9udFNpemUgKyAncHgnO1xyXG5cdFx0aWYgKGlzVmVydGljYWwpIHtcclxuXHRcdFx0dGV4dEFyZWEuc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xyXG5cdFx0XHR0ZXh0QXJlYS5zdHlsZS50ZXh0T3JpZW50YXRpb24gPSAndXByaWdodCc7XHJcblx0XHR9XHJcblx0XHR0ZXh0QXJlYS5zcGVsbGNoZWNrID0gZmFsc2U7XHJcblx0XHRyZXR1cm4gdGV4dEFyZWE7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgQ3JlYXRlVGV4dElucHV0KGRpdjogSFRNTERpdkVsZW1lbnQsIGV4aXN0aW5nVGV4dCA9ICcnLCBmb250U2l6ZSA9IDIwLCBpc1ZlcnRpY2FsID0gdHJ1ZSk6IEhUTUxJbnB1dEVsZW1lbnQge1xyXG5cdFx0Y29uc3QgdGV4dElucHV0ID0gZGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogZXhpc3RpbmdUZXh0IH0gKTtcclxuXHRcdHRleHRJbnB1dC5zdHlsZS5mb250RmFtaWx5ID0gaXNWZXJ0aWNhbCA/ICdId2F5dVJlYWwnIDogJ0h3YXl1SG9yaXpvbnRhbCc7XHJcblx0XHR0ZXh0SW5wdXQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArICdweCc7XHJcblx0XHRpZiAoaXNWZXJ0aWNhbCkge1xyXG5cdFx0XHR0ZXh0SW5wdXQuc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xyXG5cdFx0XHR0ZXh0SW5wdXQuc3R5bGUudGV4dE9yaWVudGF0aW9uID0gJ3VwcmlnaHQnO1xyXG5cdFx0fVxyXG5cdFx0dGV4dElucHV0LnNwZWxsY2hlY2sgPSBmYWxzZTtcclxuXHRcdHJldHVybiB0ZXh0SW5wdXQ7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgUGhvdG9MYW5nIHtcblx0c3RhdGljIERpc3BsYXkoZGl2OiBIVE1MRGl2RWxlbWVudCwgdGV4dCA9ICcnLCBmb250U2l6ZSA9IDEwLCBtb3ZlU3BlZWRzOiBudW1iZXJbXSB8IG51bGwgPSBudWxsLCBkdXJhdGlvbnM6IG51bWJlcltdIHwgbnVsbCA9IG51bGwsIGRvTG9vcCA9IGZhbHNlKTogSFRNTEVsZW1lbnQge1xuXHRcdGNvbnN0IGxpbmUgPSBuZXcgUGhvdG9MaW5lKHRleHQpO1xuXHRcdGlmICghbW92ZVNwZWVkcykge1xuXHRcdFx0bW92ZVNwZWVkcyA9IFsxMDAsIDI1MCwgNTAwXTtcblx0XHR9XG5cdFx0aWYgKCFkdXJhdGlvbnMpIHtcblx0XHRcdGR1cmF0aW9ucyA9IFswLCA1MDBdO1xuXHRcdH1cblx0XHRjb25zdCBkaXNwbGF5RGl2ID0gZGl2LmNyZWF0ZURpdigpO1xuXHRcdGxpbmUuU3BlYWsoZGlzcGxheURpdiwgZm9udFNpemUsIG1vdmVTcGVlZHMsIGR1cmF0aW9ucywgZG9Mb29wKTtcblx0XHRyZXR1cm4gZGlzcGxheURpdjtcblx0fVxuXHRzdGF0aWMgQ3JlYXRlVGV4dEFyZWEoZGl2OiBIVE1MRGl2RWxlbWVudCwgZXhpc3RpbmdUZXh0ID0gJycsIGZvbnRTaXplID0gMTcuNSk6IEhUTUxUZXh0QXJlYUVsZW1lbnQge1xuXHRcdGNvbnN0IHRleHRBcmVhID0gZGl2LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgdGV4dDogZXhpc3RpbmdUZXh0IH0gKTtcblx0XHR0ZXh0QXJlYS5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgJ3B4Jztcblx0XHR0ZXh0QXJlYS5zcGVsbGNoZWNrID0gZmFsc2U7XG5cdFx0cmV0dXJuIHRleHRBcmVhO1xuXHR9XG5cdHN0YXRpYyBDcmVhdGVUZXh0SW5wdXQoZGl2OiBIVE1MRGl2RWxlbWVudCwgZXhpc3RpbmdUZXh0ID0gJycsIGZvbnRTaXplID0gMTcuNSk6IFBob3RvTGFuZ0lucHV0IHtcblx0XHRyZXR1cm4gbmV3IFBob3RvTGFuZ0lucHV0KGRpdiwgZXhpc3RpbmdUZXh0LCBmb250U2l6ZSwgWzEwMCwgMjUwLCA1MDBdLCBbMCwgNTAwXSk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFBob3RvTGFuZ0lucHV0IHtcblx0bGluZTogUGhvdG9MaW5lO1xuXHRtYWluRGl2OiBIVE1MRGl2RWxlbWVudDtcblx0Z2V0IHZhbHVlKCkge1xuXHRcdHJldHVybiB0aGlzLmxpbmUudG9UZXh0KCk7XG5cdH1cblxuXHRzZXQgdmFsdWUobmV3VmFsKSB7XG5cdFx0dGhpcy5saW5lID0gbmV3IFBob3RvTGluZShuZXdWYWwpO1xuXHR9XG5cblx0Z2V0IHN0eWxlKCkge1xuXHRcdHJldHVybiB0aGlzLm1haW5EaXYuc3R5bGU7XG5cdH1cblxuXHRvbmNoYW5nZTogKCkgPT4gUHJvbWlzZTxudWxsPiB8IG51bGw7XG5cdG9uaW5wdXQ6ICgpID0+IFByb21pc2U8bnVsbD4gfCBudWxsO1xuXG5cdGNvbnN0cnVjdG9yKGRpdjogSFRNTERpdkVsZW1lbnQsIHZhbHVlOiBzdHJpbmcsIGZvbnRTaXplID0gMTcuNSwgbW92ZVNwZWVkczogbnVtYmVyW10sIGR1cmF0aW9uczogbnVtYmVyW10pIHtcblx0XHRjb25zdCBoYm94ID0gZGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdHRoaXMubWFpbkRpdiA9IGhib3g7XG5cdFx0dGhpcy5saW5lID0gbmV3IFBob3RvTGluZSh2YWx1ZSk7XG5cdFx0dGhpcy5EaXNwbGF5KGZvbnRTaXplLCBtb3ZlU3BlZWRzLCBkdXJhdGlvbnMpO1xuXHR9XG5cdHByaXZhdGUgRGlzcGxheShmb250U2l6ZSA9IDE3LjUsIG1vdmVTcGVlZHM6IG51bWJlcltdLCBkdXJhdGlvbnM6IG51bWJlcltdKSB7XG5cdFx0dGhpcy5tYWluRGl2LmVtcHR5KCk7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmUud29yZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGluZGV4ID0gaTtcblx0XHRcdGNvbnN0IHdvcmQgPSB0aGlzLmxpbmUud29yZHNbaV07XG5cdFx0XHRjb25zdCB3b3JkRGl2ID0gdGhpcy5tYWluRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdFx0Y29uc3QgZGVsZXRlQnV0dG9uID0gd29yZERpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnZGVsZXRlJyB9ICk7XG5cdFx0XHRkZWxldGVCdXR0b24uY2xhc3NOYW1lID0gJ2NmZS1yZW1vdmUtYnV0dG9uJztcblx0XHRcdHdvcmREaXYuc3R5bGUud2lkdGggPSAoZm9udFNpemUgKiAzLjI1KSArICdweCc7XG5cdFx0XHRjb25zdCBzcGVha0RpdiA9IHdvcmREaXYuY3JlYXRlRGl2KCk7XG5cdFx0XHRzcGVha0Rpdi5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplICsgJ3B4Jztcblx0XHRcdHNwZWFrRGl2LnN0eWxlLmZvbnRGYW1pbHkgPSAnUGhvdG9sYW5nJztcblx0XHRcdHNwZWFrRGl2LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcblx0XHRcdHNwZWFrRGl2LnN0eWxlLmhlaWdodCA9IChmb250U2l6ZSAqIDMuMjUpICsgJ3B4Jztcblx0XHRcdHNwZWFrRGl2LnN0eWxlLndpZHRoID0gKGZvbnRTaXplICogMy4yNSkgKyAncHgnO1xuXHRcdFx0d29yZC5TcGVhayhzcGVha0RpdiwgZm9udFNpemUsIG1vdmVTcGVlZHMsIGR1cmF0aW9ucywgdHJ1ZSk7XG5cdFx0XHRjb25zdCBpbnB1dCA9IHdvcmREaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiB3b3JkLnRvVGV4dCgpIH0gKTtcblx0XHRcdGlucHV0LnNwZWxsY2hlY2sgPSBmYWxzZTtcblx0XHRcdGlucHV0LnN0eWxlLmZvbnRTaXplID0gKGZvbnRTaXplICogMC41KSArICdweCc7XG5cdFx0XHRkZWxldGVCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5saW5lLndvcmRzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdHRoaXMuRGlzcGxheShmb250U2l6ZSwgbW92ZVNwZWVkcywgZHVyYXRpb25zKTtcblx0XHRcdH1cblx0XHRcdGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmxpbmUud29yZHNbaW5kZXhdID0gbmV3IFBob3RvV29yZChpbnB1dC52YWx1ZSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMub25jaGFuZ2UoKTtcblx0XHRcdH1cblx0XHRcdGlucHV0Lm9uaW5wdXQgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMubGluZS53b3Jkc1tpbmRleF0gPSBuZXcgUGhvdG9Xb3JkKGlucHV0LnZhbHVlKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5vbmlucHV0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IHRoaXMubWFpbkRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnKycgfSApO1xuXHRcdGFkZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5saW5lLndvcmRzLnB1c2gobmV3IFBob3RvV29yZCgnJykpO1xuXHRcdFx0dGhpcy5EaXNwbGF5KGZvbnRTaXplLCBtb3ZlU3BlZWRzLCBkdXJhdGlvbnMpO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgUGhvdG9MaW5lIHtcblx0d29yZHM6IFBob3RvV29yZFtdO1xuXG5cdHRvVGV4dCgpOiBzdHJpbmcge1xuXHRcdGxldCBvdXRwdXQgPSAnJztcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud29yZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdG91dHB1dCArPSB0aGlzLndvcmRzW2ldLnRvVGV4dCgpO1xuXHRcdFx0b3V0cHV0ICs9ICd8fHwnO1xuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0Y29uc3RydWN0b3IodGV4dENvbnRlbnQgPSAnJykge1xuXHRcdHRoaXMud29yZHMgPSBbXTtcblxuXHRcdGNvbnN0IHRleHRBcnJheSA9IHRleHRDb250ZW50LnNwbGl0KFwifHx8XCIpLmZpbHRlcigoYzogc3RyaW5nKSA9PiBjICE9PSBcIlwiKTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dEFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCB3b3JkVGV4dCA9IHRleHRBcnJheVtpXTtcblx0XHRcdGNvbnN0IG5ld1dvcmQgPSBuZXcgUGhvdG9Xb3JkKHdvcmRUZXh0KTtcblx0XHRcdHRoaXMud29yZHMucHVzaChuZXdXb3JkKTtcblx0XHR9XG5cblx0fVxuXG5cdGFzeW5jIFNwZWFrKGRpdjogSFRNTERpdkVsZW1lbnQsIHRleHRTaXplOiBudW1iZXIsIG1vdmVTcGVlZHM6IG51bWJlcltdLCBkdXJhdGlvbnM6IG51bWJlcltdLCBkb0xvb3AgPSBmYWxzZSkge1xuXHRcdGRpdi5zdHlsZS5mb250U2l6ZSA9IHRleHRTaXplICsgJ3B4Jztcblx0XHRkaXYuc3R5bGUuZm9udEZhbWlseSA9ICdQaG90b2xhbmcnO1xuXHRcdGRpdi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG5cdFx0ZGl2LnN0eWxlLmhlaWdodCA9ICh0ZXh0U2l6ZSAqIDMuMjUpICsgJ3B4Jztcblx0XHRkaXYuc3R5bGUud2lkdGggPSAodGV4dFNpemUgKiAzLjI1KSArICdweCc7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud29yZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHBob3Rvd29yZCA9IHRoaXMud29yZHNbaV07XG5cblx0XHRcdGF3YWl0IHBob3Rvd29yZC5TcGVhayhkaXYsIHRleHRTaXplLCBtb3ZlU3BlZWRzLCBkdXJhdGlvbnMsIGZhbHNlKTtcblx0XHRcdGF3YWl0IHNsZWVwKDIwMCk7XG5cdFx0XHRpZiAoZG9Mb29wICYmIGkgPT09IHRoaXMud29yZHMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRpID0gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGRpdi5yZW1vdmUoKTtcblx0fVxuXG5cdGFzeW5jIERpc3BsYXlTdGF0aWMoZGl2OiBIVE1MRGl2RWxlbWVudCwgdGV4dFNpemU6IG51bWJlciwgbW92ZVNwZWVkczogbnVtYmVyW10gfCBudWxsLCBkdXJhdGlvbnM6IG51bWJlcltdIHwgbnVsbCkge1xuXHRcdGlmICghbW92ZVNwZWVkcykge1xuXHRcdFx0bW92ZVNwZWVkcyA9IFsxMDAsIDI1MCwgNTAwXTtcblx0XHR9XG5cdFx0aWYgKCFkdXJhdGlvbnMpIHtcblx0XHRcdGR1cmF0aW9ucyA9IFswLCA1MDBdO1xuXHRcdH1cblx0XHRjb25zdCBsaW5lRGl2ID0gZGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53b3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3Qgd29yZERpdiA9IGxpbmVEaXYuY3JlYXRlRGl2KCk7XG5cdFx0XHR3b3JkRGl2LmNsYXNzTmFtZSA9ICdjZmUtcGhvdG9nbHlwaCc7XG5cdFx0XHR3b3JkRGl2LnN0eWxlLmZvbnRTaXplID0gdGV4dFNpemUgKyAncHgnO1xuXHRcdFx0d29yZERpdi5zdHlsZS5mb250RmFtaWx5ID0gJ1Bob3RvbGFuZyc7XG5cdFx0XHR3b3JkRGl2LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcblx0XHRcdHdvcmREaXYuc3R5bGUuaGVpZ2h0ID0gKHRleHRTaXplICogMy4yNSkgKyAncHgnO1xuXHRcdFx0d29yZERpdi5zdHlsZS53aWR0aCA9ICh0ZXh0U2l6ZSAqIDMuMjUpICsgJ3B4Jztcblx0XHRcdHRoaXMud29yZHNbaV0uU3BlYWsod29yZERpdiwgdGV4dFNpemUsIG1vdmVTcGVlZHMsIGR1cmF0aW9ucywgdHJ1ZSk7XG5cdFx0fVxuXHR9XG5cbn1cblxuZXhwb3J0IGNsYXNzIFBob3RvV29yZCB7XG5cdGdseXBoczogUGhvdG9HbHlwaFtdO1xuXG5cdHRvVGV4dCgpOiBzdHJpbmcge1xuXHRcdGxldCBvdXRwdXQgPSAnJztcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRvdXRwdXQgKz0gdGhpcy5nbHlwaHNbaV0udG9UZXh0KCk7XG5cdFx0XHRvdXRwdXQgKz0gJyAgICc7XG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcih0ZXh0Q29udGVudCA9ICcnKSB7XG5cdFx0dGhpcy5nbHlwaHMgPSBbXTtcblxuXHRcdGNvbnN0IHRleHRBcnJheSA9IHRleHRDb250ZW50LnNwbGl0KFwiICAgXCIpLmZpbHRlcigoYzogc3RyaW5nKSA9PiBjICE9PSBcIlwiKTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dEFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBnbHlwaFRleHQgPSB0ZXh0QXJyYXlbaV07XG5cdFx0XHRjb25zdCBuZXdHbHlwaCA9IG5ldyBQaG90b0dseXBoKGdseXBoVGV4dCk7XG5cdFx0XHR0aGlzLmdseXBocy5wdXNoKG5ld0dseXBoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBTcGVhayhkaXY6IEhUTUxEaXZFbGVtZW50LCB0ZXh0U2l6ZTogbnVtYmVyLCBtb3ZlU3BlZWRzOiBudW1iZXJbXSwgZHVyYXRpb25zOiBudW1iZXJbXSwgZG9Mb29wID0gZmFsc2UpIHtcblx0XHRjb25zdCB0ZXh0RGl2ID0gZGl2LmNyZWF0ZURpdigpO1xuXHRcdHRleHREaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHRcdHRleHREaXYuc3R5bGUuYm90dG9tID0gdGV4dFNpemUgKyAncHgnO1xuXHRcdHRleHREaXYuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJ2JvdHRvbSwgbGVmdCwgY29sb3InO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nbHlwaHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHBob3RvR2x5cGggPSB0aGlzLmdseXBoc1tpXTtcblxuXHRcdFx0dGV4dERpdi50ZXh0Q29udGVudCA9IHBob3RvR2x5cGguc2hhcGU7XG5cdFx0XHR0ZXh0RGl2LnN0eWxlLmxlZnQgPSAocGhvdG9HbHlwaC54ICogdGV4dFNpemUpICsgJ3B4Jztcblx0XHRcdHRleHREaXYuc3R5bGUuYm90dG9tID0gKHBob3RvR2x5cGgueSAqIHRleHRTaXplKSArICdweCc7XG5cdFx0XHR0ZXh0RGl2LnN0eWxlLmNvbG9yID0gcGhvdG9HbHlwaC5jb2xvcjtcblxuXHRcdFx0aWYgKGRvTG9vcCAmJiBpID09PSB0aGlzLmdseXBocy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdGkgPSAtMTtcblx0XHRcdH1cblx0XHRcdHRleHREaXYuc3R5bGUudHJhbnNpdGlvbiA9IG1vdmVTcGVlZHNbcGhvdG9HbHlwaC5tb3ZlU3BlZWRdICsgJ21zJztcblx0XHRcdGF3YWl0IHNsZWVwKG1vdmVTcGVlZHNbcGhvdG9HbHlwaC5tb3ZlU3BlZWRdICsgZHVyYXRpb25zW3Bob3RvR2x5cGguZHVyYXRpb25dKTtcblx0XHR9XG5cdFx0dGV4dERpdi5yZW1vdmUoKTtcblx0fVxuXG59XG5cbmV4cG9ydCBjbGFzcyBQaG90b0dseXBoIHtcblx0c2hhcGU6IHN0cmluZztcblx0eDogbnVtYmVyO1xuXHR5OiBudW1iZXI7XG5cdGh1ZTogbnVtYmVyO1xuXHRzYXR1cmF0aW9uOiBudW1iZXI7XG5cdHZhbHVlOiBudW1iZXI7XG5cdG9wYWNpdHk6IG51bWJlcjtcblx0bW92ZVNwZWVkOiBudW1iZXI7XG5cdGR1cmF0aW9uOiBudW1iZXI7XG5cdFxuXHRjb25zdHJ1Y3RvcihnbHlwaFRleHQ6IHN0cmluZykge1xuXHRcdGxldCBqID0gMDtcblx0XHRsZXQgc2tpcE5leHQgPSBmYWxzZTtcblxuXHRcdC8vIG1vdmUgc3BlZWRcblx0XHRzd2l0Y2ggKGdseXBoVGV4dFtqXSkge1xuXHRcdFx0Y2FzZSAnLic6XG5cdFx0XHRcdHRoaXMubW92ZVNwZWVkID0gMDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICctJzpcblx0XHRcdFx0dGhpcy5tb3ZlU3BlZWQgPSAxO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJz0nOlxuXHRcdFx0XHR0aGlzLm1vdmVTcGVlZCA9IDI7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRqKys7XG5cblx0XHQvLyBkdXJhdGlvblxuXHRcdHN3aXRjaCAoZ2x5cGhUZXh0W2pdKSB7XG5cdFx0XHRjYXNlICcuJzpcblx0XHRcdFx0dGhpcy5kdXJhdGlvbiA9IDA7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnLSc6XG5cdFx0XHRcdHRoaXMuZHVyYXRpb24gPSAxO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aisrO1xuXG5cdFx0Ly8gc2hhcGVcblx0XHR0aGlzLnNoYXBlID0gZ2x5cGhUZXh0W2pdO1xuXHRcdGorKztcblxuXHRcdC8vIGh1ZVxuXHRcdGxldCBodWUxID0gMDtcblx0XHRzd2l0Y2ggKGdseXBoVGV4dFtqXSkge1xuXHRcdFx0Y2FzZSAncic6XG5cdFx0XHRcdGh1ZTEgPSAwO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ28nOlxuXHRcdFx0XHRodWUxID0gNDA7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAneSc6XG5cdFx0XHRcdGh1ZTEgPSA2MDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdnJzpcblx0XHRcdFx0aHVlMSA9IDEyMDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdjJzpcblx0XHRcdFx0aHVlMSA9IDE4MDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdiJzpcblx0XHRcdFx0aHVlMSA9IDI0MDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdwJzpcblx0XHRcdFx0aHVlMSA9IDI3MDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICcuJzpcblx0XHRcdFx0dGhpcy5odWUgPSAwO1xuXHRcdFx0XHR0aGlzLnNhdHVyYXRpb24gPSAwO1xuXHRcdFx0XHRza2lwTmV4dCA9IHRydWU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRqKys7XG5cdFx0aWYgKCFza2lwTmV4dCkge1xuXHRcdFx0bGV0IGh1ZTIgPSAwO1xuXHRcdFx0c3dpdGNoIChnbHlwaFRleHRbal0pIHtcblx0XHRcdFx0Y2FzZSAncic6XG5cdFx0XHRcdFx0aHVlMiA9IDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ28nOlxuXHRcdFx0XHRcdGh1ZTIgPSA0MDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAneSc6XG5cdFx0XHRcdFx0aHVlMiA9IDYwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdnJzpcblx0XHRcdFx0XHRodWUyID0gMTIwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdjJzpcblx0XHRcdFx0XHRodWUyID0gMTgwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdiJzpcblx0XHRcdFx0XHRodWUyID0gMjQwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdwJzpcblx0XHRcdFx0XHRodWUyID0gMjcwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHRoaXMuaHVlID0gaHVlMTtcblx0XHRcdFx0XHRza2lwTmV4dCA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXNraXBOZXh0KSB7XG5cdFx0XHRcdGlmIChodWUxID09PSAwICYmIGh1ZTIgPT09IDI3MCB8fCBodWUxID09PSAyNzAgJiYgaHVlMiA9PT0gMCkge1xuXHRcdFx0XHRcdHRoaXMuaHVlID0gMzE1O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuaHVlID0gKGh1ZTEgKyBodWUyKSAvIDI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aisrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRza2lwTmV4dCA9IGZhbHNlO1xuXG5cdFx0Ly8gc2F0dXJhdGlvblxuXHRcdGNvbnN0IHNhdHVyYXRpb25UZXh0ID0gZ2x5cGhUZXh0W2pdO1xuXHRcdHN3aXRjaCAoc2F0dXJhdGlvblRleHQpIHtcblx0XHRcdGNhc2UgJzAnOlxuXHRcdFx0XHR0aGlzLnNhdHVyYXRpb24gPSAwO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzEnOlxuXHRcdFx0XHR0aGlzLnNhdHVyYXRpb24gPSAwLjI1O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzInOlxuXHRcdFx0XHR0aGlzLnNhdHVyYXRpb24gPSAwLjU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnMyc6XG5cdFx0XHRcdHRoaXMuc2F0dXJhdGlvbiA9IDAuNzU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnNCc6XG5cdFx0XHRcdHRoaXMuc2F0dXJhdGlvbiA9IDE7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRqKys7XG5cblx0XHQvLyB2YWx1ZVxuXHRcdGNvbnN0IHZhbHVlVGV4dCA9IGdseXBoVGV4dFtqXTtcblx0XHRzd2l0Y2ggKHZhbHVlVGV4dCkge1xuXHRcdFx0Y2FzZSAnMCc6XG5cdFx0XHRcdHRoaXMudmFsdWUgPSAwO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzEnOlxuXHRcdFx0XHR0aGlzLnZhbHVlID0gMC4xO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzInOlxuXHRcdFx0XHR0aGlzLnZhbHVlID0gMC4yO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzMnOlxuXHRcdFx0XHR0aGlzLnZhbHVlID0gMC41O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzQnOlxuXHRcdFx0XHR0aGlzLnZhbHVlID0gMTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdGorKztcblxuXHRcdC8vIG9wYWNpdHlcblx0XHRjb25zdCBvcGFjaXR5VGV4dCA9IGdseXBoVGV4dFtqXTtcblx0XHRzd2l0Y2ggKG9wYWNpdHlUZXh0KSB7XG5cdFx0XHRjYXNlICcuJzpcblx0XHRcdFx0dGhpcy5vcGFjaXR5ID0gMDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICctJzpcblx0XHRcdFx0dGhpcy5vcGFjaXR5ID0gMC41O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJz0nOlxuXHRcdFx0XHR0aGlzLm9wYWNpdHkgPSAxO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aisrO1xuXG5cdFx0Y29uc3QgbG9jYXRpb25JbmZvID0gZ2x5cGhUZXh0LnN1YnN0cmluZyhqKTtcblxuXHRcdC8vIGxvY2F0aW9uXG5cdFx0Ly8geFxuXHRcdGlmIChsb2NhdGlvbkluZm8uY29udGFpbnMoJzwnKSkge1xuXHRcdFx0dGhpcy54ID0gMDtcblx0XHR9IGVsc2UgaWYgKGxvY2F0aW9uSW5mby5jb250YWlucygnPicpKSB7XG5cdFx0XHR0aGlzLnggPSAyO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnggPSAxO1xuXHRcdH1cblx0XHQvLyB5XG5cdFx0aWYgKGxvY2F0aW9uSW5mby5jb250YWlucygndicpKSB7XG5cdFx0XHR0aGlzLnkgPSAwO1xuXHRcdH0gZWxzZSBpZiAobG9jYXRpb25JbmZvLmNvbnRhaW5zKCdeJykpIHtcblx0XHRcdHRoaXMueSA9IDI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMueSA9IDE7XG5cdFx0fVxuXHR9XG5cblx0dG9UZXh0KCk6IHN0cmluZyB7XG5cdFx0bGV0IG91dHB1dCA9ICcnO1xuXHRcdHN3aXRjaCAodGhpcy5tb3ZlU3BlZWQpIHtcblx0XHRcdGNhc2UgMDpcblx0XHRcdFx0b3V0cHV0ICs9ICcuJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdG91dHB1dCArPSAnLSc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHRvdXRwdXQgKz0gJz0nO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMuZHVyYXRpb24pIHtcblx0XHRcdGNhc2UgMDpcblx0XHRcdFx0b3V0cHV0ICs9ICcuJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdG91dHB1dCArPSAnLSc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdG91dHB1dCArPSB0aGlzLnNoYXBlO1xuXG5cdFx0c3dpdGNoICh0aGlzLmh1ZSkge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHRvdXRwdXQgKz0gJ3InO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMjA6XG5cdFx0XHRcdG91dHB1dCArPSAncm8nO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNDA6XG5cdFx0XHRcdG91dHB1dCArPSAnbyc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA1MDpcblx0XHRcdFx0b3V0cHV0ICs9ICd5byc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA2MDpcblx0XHRcdFx0b3V0cHV0ICs9ICd5byc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA5MDpcblx0XHRcdFx0b3V0cHV0ICs9ICd5Zyc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxMjA6XG5cdFx0XHRcdG91dHB1dCArPSAnZyc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxNTA6XG5cdFx0XHRcdG91dHB1dCArPSAnY2cnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMTgwOlxuXHRcdFx0XHRvdXRwdXQgKz0gJ2MnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMjEwOlxuXHRcdFx0XHRvdXRwdXQgKz0gJ2NiJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDI0MDpcblx0XHRcdFx0b3V0cHV0ICs9ICdiJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDI1NTpcblx0XHRcdFx0b3V0cHV0ICs9ICdicCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAyNzA6XG5cdFx0XHRcdG91dHB1dCArPSAncCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAzMTU6XG5cdFx0XHRcdG91dHB1dCArPSAncHInO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMuc2F0dXJhdGlvbikge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHRvdXRwdXQgKz0gJzAnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMC4yNTpcblx0XHRcdFx0b3V0cHV0ICs9ICcxJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDAuNTpcblx0XHRcdFx0b3V0cHV0ICs9ICcyJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDAuNzU6XG5cdFx0XHRcdG91dHB1dCArPSAnMyc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRvdXRwdXQgKz0gJzQnO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMudmFsdWUpIHtcblx0XHRcdGNhc2UgMDpcblx0XHRcdFx0b3V0cHV0ICs9ICcwJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDAuMTpcblx0XHRcdFx0b3V0cHV0ICs9ICcxJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDAuMjpcblx0XHRcdFx0b3V0cHV0ICs9ICcyJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDAuNTpcblx0XHRcdFx0b3V0cHV0ICs9ICczJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdG91dHB1dCArPSAnNCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAodGhpcy5vcGFjaXR5KSB7XG5cdFx0XHRjYXNlIDA6XG5cdFx0XHRcdG91dHB1dCArPSAnLic7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAwLjU6XG5cdFx0XHRcdG91dHB1dCArPSAnLSc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRvdXRwdXQgKz0gJz0nO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMueCkge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHRvdXRwdXQgKz0gJzwnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0b3V0cHV0ICs9ICc+Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0c3dpdGNoICh0aGlzLnkpIHtcblx0XHRcdGNhc2UgMDpcblx0XHRcdFx0b3V0cHV0ICs9ICd2Jztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDI6XG5cdFx0XHRcdG91dHB1dCArPSAnXic7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0Z2V0IGNvbG9yKCkge1xuXHRcdC8vIGhzdiB2YWx1ZXMgYXJlIGluIFswLCAxXVxuXHRcdGxldCBsaWdodG5lc3MgPSAoMiAtIHRoaXMuc2F0dXJhdGlvbikgKiB0aGlzLnZhbHVlIC8gMjtcblx0XHRsZXQgbmV3UyA9IHRoaXMuc2F0dXJhdGlvbiAqIHRoaXMudmFsdWUgLyAobGlnaHRuZXNzIDwgMSA/IGxpZ2h0bmVzcyAqIDIgOiAyIC0gbGlnaHRuZXNzICogMik7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgbGlnaHRuZXNzIGlzIDAgb3IgMSwgd2hpY2ggcmVzdWx0cyBpbiBzYXR1cmF0aW9uIGJlaW5nIDBcblx0XHRpZiAobGlnaHRuZXNzID09PSAwIHx8IGxpZ2h0bmVzcyA9PT0gMSkge1xuXHRcdFx0bmV3UyA9IDA7XG5cdFx0fVxuXG5cdFx0bGlnaHRuZXNzICo9IDEwMDtcblx0XHRuZXdTICo9IDEwMDtcblxuXHRcdHJldHVybiAnaHNsYSgnICsgdGhpcy5odWUgKyAnLCcgKyBuZXdTICsgJyUsJyArIGxpZ2h0bmVzcyArICclLCcgKyB0aGlzLm9wYWNpdHkgKyAnKSc7XG5cdH1cblxuXHREaXNwbGF5U3RhdGljKGRpdjogSFRNTERpdkVsZW1lbnQsIHRleHRTaXplOiBudW1iZXIpIHtcblx0XHRjb25zdCBvdXRlckRpdiA9IGRpdi5jcmVhdGVEaXYoKTtcblx0XHRvdXRlckRpdi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG5cdFx0b3V0ZXJEaXYuc3R5bGUud2lkdGggPSAodGV4dFNpemUgKiAzLjI1KSArICdweCc7XG5cdFx0b3V0ZXJEaXYuc3R5bGUuaGVpZ2h0ID0gKHRleHRTaXplICogMy4yNSkgKyAncHgnO1xuXHRcdG91dGVyRGl2LmNsYXNzTmFtZSA9ICdjZmUtcGhvdG9nbHlwaCc7XG5cdFx0Y29uc3QgZ2x5cGhEaXYgPSBvdXRlckRpdi5jcmVhdGVEaXYoKTtcblx0XHRnbHlwaERpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdFx0Z2x5cGhEaXYudGV4dENvbnRlbnQgPSB0aGlzLnNoYXBlO1xuXHRcdGdseXBoRGl2LnN0eWxlLmxlZnQgPSAodGhpcy54ICogdGV4dFNpemUpICsgJ3B4Jztcblx0XHRnbHlwaERpdi5zdHlsZS5ib3R0b20gPSAodGhpcy55ICogdGV4dFNpemUpICsgJ3B4Jztcblx0XHRnbHlwaERpdi5zdHlsZS5jb2xvciA9IHRoaXMuY29sb3I7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcbmltcG9ydCB7IEh3YXl1IH0gZnJvbSBcIi4vY29ubGFuZ3MvaHdheXUtdGV4dFwiO1xuaW1wb3J0IHsgUGhvdG9MYW5nIH0gZnJvbSBcIi4vY29ubGFuZ3MvcGhvdG9sYW5nLXRleHRcIjtcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XG5cbmV4cG9ydCBjbGFzcyBDb25sYW5nRGljdGlvbmFyeSBleHRlbmRzIENGRUZpbGUge1xuXG5cdGxhbmd1YWdlOiBzdHJpbmc7XG5cdHdvcmRzOiBbc3RyaW5nLCBzdHJpbmddW107XG5cdHNlYXJjaFRlcm06IHN0cmluZztcblx0c2VhcmNoSW5Db25sYW5nOiBib29sZWFuO1xuXG5cdHN0YXRpYyBvdmVycmlkZSBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252OiBTb3VyY2VBbmRWYXVsdCwgZmlsZVR5cGU6IHN0cmluZywgcGFyZW50Rm9sZGVySUQ6IG51bWJlciwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxDb25sYW5nRGljdGlvbmFyeT4ge1xuXHRcdGNvbnN0IHVuZmluaXNoZWREaWN0aW9uYXJ5ID0gPENvbmxhbmdEaWN0aW9uYXJ5PiBhd2FpdCBzdXBlci5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252LCBmaWxlVHlwZSwgcGFyZW50Rm9sZGVySUQsIG5hbWUpO1xuXHRcdHVuZmluaXNoZWREaWN0aW9uYXJ5Lmxhbmd1YWdlID0gJ0h3YXl1Jztcblx0XHR1bmZpbmlzaGVkRGljdGlvbmFyeS53b3JkcyA9IFtdO1xuXHRcdHVuZmluaXNoZWREaWN0aW9uYXJ5LnNlYXJjaFRlcm0gPSAnJztcblx0XHR1bmZpbmlzaGVkRGljdGlvbmFyeS5zZWFyY2hJbkNvbmxhbmcgPSBmYWxzZTtcblx0XHRyZXR1cm4gdW5maW5pc2hlZERpY3Rpb25hcnk7XG5cdH1cblxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgc3VwZXIuRGlzcGxheShzbnYsIG1haW5EaXYpO1xuXG5cdFx0Y29uc3QgbGFuZ3VhZ2VEcm9wZG93biA9IG1haW5EaXYuY3JlYXRlRWwoJ3NlbGVjdCcpO1xuXHRcdGxhbmd1YWdlRHJvcGRvd24uY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0h3YXl1JywgdmFsdWU6ICdId2F5dScgfSApO1xuXHRcdGxhbmd1YWdlRHJvcGRvd24uY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ1Bob3RvbGFuZycsIHZhbHVlOiAnUGhvdG9sYW5nJyB9ICk7XG5cdFx0bGFuZ3VhZ2VEcm9wZG93bi52YWx1ZSA9IHRoaXMubGFuZ3VhZ2U7XG5cblx0XHRjb25zdCBhZGRXb3JkRGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHRhd2FpdCB0aGlzLkNyZWF0ZU5ld1dvcmRFZGl0b3Ioc252LCBtYWluRGl2LCBhZGRXb3JkRGl2KTtcblxuXHRcdGxhbmd1YWdlRHJvcGRvd24ub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLmxhbmd1YWdlID0gbGFuZ3VhZ2VEcm9wZG93bi52YWx1ZTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0YXdhaXQgdGhpcy5EaXNwbGF5KHNudiwgbWFpbkRpdik7XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5EaXNwbGF5TGlzdChzbnYsIG1haW5EaXYpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBEaXNwbGF5V29yZChzbnY6IFNvdXJjZUFuZFZhdWx0LCBtYWluRGl2OiBIVE1MRGl2RWxlbWVudCwgZGl2OiBIVE1MRGl2RWxlbWVudCwgaW5kZXg6IG51bWJlcikge1xuXHRcdGRpdi5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgbW9kZUJ1dHRvbiA9IGRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRWRpdCcgfSApO1xuXHRcdG1vZGVCdXR0b24uc3R5bGUudG9wID0gJzAnO1xuXHRcdG1vZGVCdXR0b24uc3R5bGUucmlnaHQgPSAnMCc7XG5cdFx0bW9kZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5FZGl0V29yZChzbnYsIG1haW5EaXYsIGRpdiwgaW5kZXgpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHdvcmREaXYgPSBkaXYuY3JlYXRlRGl2KCdoYm94Jyk7XG5cdFx0d29yZERpdi5zdHlsZS5nYXAgPSAnMSUnO1xuXHRcdHdvcmREaXYuc3R5bGUuZm9udFNpemUgPSAnMjVweCc7XG5cdFx0Y29uc3QgY29ubGFuZ1dvcmQgPSB0aGlzLndvcmRzW2luZGV4XVswXTtcblx0XHRjb25zdCBkZWZpbml0aW9uID0gdGhpcy53b3Jkc1tpbmRleF1bMV07XG5cdFx0Y29uc3QgY29ubGFuZ1dvcmREaXYgPSB0aGlzLkRpc3BsYXlDb25sYW5nVGV4dCh3b3JkRGl2LCBjb25sYW5nV29yZCk7XG5cdFx0Y29ubGFuZ1dvcmREaXYuY2xhc3NMaXN0LmFkZCgnY2ZlLXBvaW50ZXItaG92ZXInKTtcblx0XHR3b3JkRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnOicgfSApO1xuXHRcdHdvcmREaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGRlZmluaXRpb24gfSApO1xuXG5cdFx0Y29ubGFuZ1dvcmREaXYub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvbmxhbmdXb3JkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29weSB0ZXh0OiAnLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgRWRpdFdvcmQoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQsIGRpdjogSFRNTERpdkVsZW1lbnQsIGluZGV4OiBudW1iZXIpIHtcblx0XHRkaXYuZW1wdHkoKTtcblx0XHRjb25zdCBidXR0b25zRGl2ID0gZGl2LmNyZWF0ZURpdignaGJveCcpO1xuXG5cdFx0Y29uc3QgbW9kZUJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1ZpZXcnIH0gKTtcblx0XHRtb2RlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLkRpc3BsYXlXb3JkKHNudiwgbWFpbkRpdiwgZGl2LCBpbmRleCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVsZXRlQnV0dG9uID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRGVsZXRlJyB9ICk7XG5cdFx0ZGVsZXRlQnV0dG9uLmNsYXNzTGlzdCA9ICdjZmUtcmVtb3ZlLWJ1dHRvbic7XG5cdFx0ZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLndvcmRzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdGF3YWl0IHRoaXMuRGlzcGxheShzbnYsIG1haW5EaXYpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHdvcmREaXYgPSBkaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XG5cdFx0d29yZERpdi5zdHlsZS5mb250U2l6ZSA9ICcyNXB4Jztcblx0XHR3b3JkRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnV29yZCBpbiAnICsgdGhpcy5sYW5ndWFnZSB9ICk7XG5cdFx0Y29uc3QgY29ubGFuZ1dvcmQgPSB0aGlzLndvcmRzW2luZGV4XVswXTtcblx0XHRjb25zdCBkZWZpbml0aW9uID0gdGhpcy53b3Jkc1tpbmRleF1bMV07XG5cdFx0Y29uc3QgbmV3V29yZElucHV0ID0gdGhpcy5EaXNwbGF5Q29ubGFuZ0VkaXRvcih3b3JkRGl2LCBjb25sYW5nV29yZCk7XG5cblx0XHR3b3JkRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnRGVmaW5pdGlvbicgfSApO1xuXHRcdGNvbnN0IGRlZmluaXRpb25JbnB1dCA9IHdvcmREaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiBkZWZpbml0aW9uIH0gKTtcblx0XHRkZWZpbml0aW9uSW5wdXQuc3R5bGUuZm9udFNpemUgPSAnMjVweCc7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMud29yZHNbaW5kZXhdID0gW25ld1dvcmRJbnB1dC52YWx1ZSwgZGVmaW5pdGlvbklucHV0LnZhbHVlXTtcblx0XHRcdHRoaXMuUmVTb3J0KGluZGV4KTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0YXdhaXQgdGhpcy5EaXNwbGF5KHNudiwgbWFpbkRpdik7XG5cdFx0fVxuXG5cdFx0ZGl2Lm9ua2V5ZG93biA9IGFzeW5jIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRhd2FpdCBvblN1Ym1pdCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgQ3JlYXRlTmV3V29yZEVkaXRvcihzbnY6IFNvdXJjZUFuZFZhdWx0LCBtYWluRGl2OiBIVE1MRGl2RWxlbWVudCwgZGl2OiBIVE1MRGl2RWxlbWVudCkge1xuXHRcdGRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0FkZCBOZXcgV29yZDonIH0gKTtcblx0XHRkaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdXb3JkIGluICcgKyB0aGlzLmxhbmd1YWdlIH0gKTtcblx0XHRjb25zdCBuZXdXb3JkSW5wdXQgPSB0aGlzLkRpc3BsYXlDb25sYW5nRWRpdG9yKGRpdik7XG5cblx0XHRkaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdEZWZpbml0aW9uJyB9ICk7XG5cdFx0Y29uc3QgZGVmaW5pdGlvbklucHV0ID0gZGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCB2YWx1ZTogJycgfSApO1xuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnc3VibWl0JyB9ICk7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMud29yZHMucHVzaChbbmV3V29yZElucHV0LnZhbHVlLCBkZWZpbml0aW9uSW5wdXQudmFsdWVdKTtcblx0XHRcdHRoaXMuUmVTb3J0KHRoaXMud29yZHMubGVuZ3RoIC0gMSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdGF3YWl0IHRoaXMuRGlzcGxheShzbnYsIG1haW5EaXYpO1xuXHRcdH1cblxuXHRcdHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gb25TdWJtaXQ7XG5cdFx0ZGl2Lm9ua2V5ZG93biA9IGFzeW5jIChldmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRhd2FpdCBvblN1Ym1pdCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgRGlzcGxheUNvbmxhbmdFZGl0b3IoZGl2OiBIVE1MRGl2RWxlbWVudCwgZXhpc3RpbmdXb3JkID0gJycpIHtcblx0XHRzd2l0Y2godGhpcy5sYW5ndWFnZSkge1xuXHRcdFx0Y2FzZSAnSHdheXUnOlxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIEh3YXl1LkNyZWF0ZVRleHRJbnB1dChkaXYsIGV4aXN0aW5nV29yZCwgMjUsIGZhbHNlKTtcblx0XHRcdGNhc2UgJ1Bob3RvbGFuZyc6XG5cdFx0XHRcdHJldHVybiBQaG90b0xhbmcuQ3JlYXRlVGV4dElucHV0KGRpdiwgZXhpc3RpbmdXb3JkLCAyNSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBEaXNwbGF5Q29ubGFuZ1RleHQoZGl2OiBIVE1MRGl2RWxlbWVudCwgZXhpc3RpbmdXb3JkID0gJycpIHtcblx0XHRzd2l0Y2godGhpcy5sYW5ndWFnZSkge1xuXHRcdFx0Y2FzZSAnSHdheXUnOlxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIEh3YXl1LkRpc3BsYXkoZGl2LCBleGlzdGluZ1dvcmQsIDI1LCBmYWxzZSk7XG5cdFx0XHRjYXNlICdQaG90b2xhbmcnOlxuXHRcdFx0XHRyZXR1cm4gUGhvdG9MYW5nLkRpc3BsYXkoZGl2LCBleGlzdGluZ1dvcmQsIDI1LCBudWxsLCBudWxsLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIERpc3BsYXlMaXN0KHNudjogU291cmNlQW5kVmF1bHQsIGRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRkaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdTZWFyY2ggaW4gJyArIHRoaXMubGFuZ3VhZ2UgKyAnPycgfSApO1xuXHRcdFxuXHRcdGNvbnN0IGNoZWNrYm94ID0gZGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9ICk7XG5cdFx0Y2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VhcmNoSW5Db25sYW5nO1xuXG5cdFx0ZGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnU2VhcmNoIHRlcm0nIH0gKTtcblx0XHRcblx0XHRjb25zdCBjb25sYW5nU2VhcmNoID0gdGhpcy5EaXNwbGF5Q29ubGFuZ0VkaXRvcihkaXYsIHRoaXMuc2VhcmNoVGVybSk7XG5cdFx0Y29uc3QgZW5nbGlzaFNlYXJjaCA9IGRpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JywgdmFsdWU6IHRoaXMuc2VhcmNoVGVybSB9ICk7XG5cdFx0XG5cdFx0bGV0IHByZXZFbGVtZW50ID0gY2hlY2tib3guY2hlY2tlZCA/IGVuZ2xpc2hTZWFyY2ggOiBjb25sYW5nU2VhcmNoO1xuXHRcdGxldCBjdXJyZW50RWxlbWVudCA9IGNoZWNrYm94LmNoZWNrZWQgPyBjb25sYW5nU2VhcmNoIDogZW5nbGlzaFNlYXJjaDtcblxuXHRcdHByZXZFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXHRcdGN1cnJlbnRFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXG5cdFx0dGhpcy5zZWFyY2hUZXJtID0gcHJldkVsZW1lbnQudmFsdWU7XG5cdFx0XG5cdFx0cHJldkVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRjdXJyZW50RWxlbWVudC52YWx1ZSA9IHRoaXMuc2VhcmNoVGVybTtcblx0XHRjdXJyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0XG5cdFx0Y29uc3QgcmVzdWx0c0RpdiA9IGRpdi5jcmVhdGVEaXYoJ2NmZS1kaWN0aW9uYXJ5LWdyaWQnKTtcblx0XHRcblx0XHRjb25zdCByZWZyZXNoUmVzdWx0cyA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2VhcmNoVGVybSA9IGN1cnJlbnRFbGVtZW50LnZhbHVlO1xuXHRcdFx0dGhpcy5zZWFyY2hJbkNvbmxhbmcgPSBjaGVja2JveC5jaGVja2VkO1xuXHRcdFx0cmVzdWx0c0Rpdi5lbXB0eSgpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLndvcmRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmICh0aGlzLndvcmRzW2ldW2NoZWNrYm94LmNoZWNrZWQgPyAwIDogMV0uY29udGFpbnMoY3VycmVudEVsZW1lbnQudmFsdWUpKSB7XG5cdFx0XHRcdFx0Y29uc3Qgd29yZERpdiA9IHJlc3VsdHNEaXYuY3JlYXRlRGl2KCdjZmUtZGljdGlvbmFyeS13b3JkJyk7XG5cdFx0XHRcdFx0dGhpcy5EaXNwbGF5V29yZChzbnYsIGRpdiwgd29yZERpdiwgaSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZWZyZXNoUmVzdWx0cygpO1xuXG5cdFx0Y29ubGFuZ1NlYXJjaC5vbmlucHV0ID0gcmVmcmVzaFJlc3VsdHM7XG5cdFx0ZW5nbGlzaFNlYXJjaC5vbmlucHV0ID0gcmVmcmVzaFJlc3VsdHM7XG5cblx0XHRjaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdHJlc3VsdHNEaXYuZW1wdHkoKTtcblxuXHRcdFx0cHJldkVsZW1lbnQgPSBjaGVja2JveC5jaGVja2VkID8gZW5nbGlzaFNlYXJjaCA6IGNvbmxhbmdTZWFyY2g7XG5cdFx0XHRjdXJyZW50RWxlbWVudCA9IGNoZWNrYm94LmNoZWNrZWQgPyBjb25sYW5nU2VhcmNoIDogZW5nbGlzaFNlYXJjaDtcblx0XHRcdHRoaXMuc2VhcmNoVGVybSA9IHByZXZFbGVtZW50LnZhbHVlO1xuXG5cdFx0XHRwcmV2RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0Y3VycmVudEVsZW1lbnQudmFsdWUgPSB0aGlzLnNlYXJjaFRlcm07XG5cdFx0XHRjdXJyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0XHRcblx0XHRcdHJlZnJlc2hSZXN1bHRzKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBSZVNvcnQoaW5kZXhPZkNoYW5nZWRXb3JkOiBudW1iZXIpIHtcblx0XHRjb25zdCBjaGFuZ2VkV29yZCA9IHRoaXMud29yZHMuc3BsaWNlKGluZGV4T2ZDaGFuZ2VkV29yZCwgMSlbMF07XG5cdFx0bGV0IGkgPSAwO1xuXHRcdGxldCBsZWZ0ID0gMDtcblx0XHRsZXQgcmlnaHQgPSB0aGlzLndvcmRzLmxlbmd0aCAtIDE7XG5cdFx0XG5cdFx0d2hpbGUgKGxlZnQgPD0gcmlnaHQpIHtcblx0XHRcdGNvbnN0IG1pZCA9IE1hdGguZmxvb3IoKGxlZnQgKyByaWdodCkgLyAyKTtcblx0XHRcdGlmICh0aGlzLndvcmRzW21pZF1bMF0gPCBjaGFuZ2VkV29yZFswXSkge1xuXHRcdFx0XHRsZWZ0ID0gbWlkICsgMTtcblx0XHRcdFx0aSA9IGxlZnQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyaWdodCA9IG1pZCAtIDE7XG5cdFx0XHRcdGkgPSBtaWQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy53b3Jkcy5zcGxpY2UoaSwgMCwgY2hhbmdlZFdvcmQpO1xuXHR9XG5cbn1cbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcbmltcG9ydCB7IENGRUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vY2ZlLWZpbGUtaGFuZGxlclwiO1xuaW1wb3J0IHsgU2luZ2xlTWVkaWFGaWxlIH0gZnJvbSBcIi4vc2luZ2xlLW1lZGlhLWZpbGVcIjtcbmltcG9ydCB7IFNvdXJjZUFuZFZhdWx0IH0gZnJvbSBcIi4vc252XCI7XG5pbXBvcnQgeyBQaG90b0xhbmcsIFBob3RvTGFuZ0lucHV0LCBQaG90b0xpbmUgfSBmcm9tIFwiLi9jb25sYW5ncy9waG90b2xhbmctdGV4dFwiO1xuaW1wb3J0IHsgSHdheXUgfSBmcm9tIFwiLi9jb25sYW5ncy9od2F5dS10ZXh0XCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9yeSBleHRlbmRzIENGRUZpbGUge1xuXHRwcml2YXRlIGN1cnJlbnRQYWdlSW5kZXg6IG51bWJlcjtcblx0cHJpdmF0ZSBwYWdlczogUGFnZVtdO1xuXHRwcml2YXRlIGNoYXJhY3RlcnM6IENoYXJhY3RlcltdO1xuXHRwcml2YXRlIGxhbmd1YWdlOiBzdHJpbmc7XG5cdHByaXZhdGUgZG9WZXJ0aWNhbDogYm9vbGVhbjtcblx0cHJpdmF0ZSBmb250U2l6ZTogbnVtYmVyO1xuXG5cdHByaXZhdGUgc3RhdGljIGtub3duTGFuZ3VhZ2VzID0gW1xuXHRcdCdFbmdsaXNoJyxcblx0XHQnSHdheXUnLFxuXHRcdCdQaG90b2xhbmcnXG5cdF1cblxuXHRwcml2YXRlIE1ha2VWZXJ0aWNhbChlbDogSFRNTEVsZW1lbnQgfCBQaG90b0xhbmdJbnB1dCkge1xuXHRcdGVsLnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0XHRlbC5zdHlsZS50ZXh0T3JpZW50YXRpb24gPSAndXByaWdodCc7XG5cdH1cblxuXHRwcml2YXRlIENyZWF0ZVRleHRJbnB1dChkaXY6IEhUTUxEaXZFbGVtZW50LCBleGlzdGluZ1dvcmQgPSAnJykge1xuXHRcdGxldCBpbnB1dDtcblx0XHRzd2l0Y2godGhpcy5sYW5ndWFnZSkge1xuXHRcdFx0Y2FzZSAnSHdheXUnOlxuXHRcdFx0XHRyZXR1cm4gSHdheXUuQ3JlYXRlVGV4dElucHV0KGRpdiwgZXhpc3RpbmdXb3JkLCB0aGlzLmZvbnRTaXplLCB0aGlzLmRvVmVydGljYWwpO1xuXHRcdFx0Y2FzZSAnUGhvdG9sYW5nJzpcblx0XHRcdFx0cmV0dXJuIFBob3RvTGFuZy5DcmVhdGVUZXh0SW5wdXQoZGl2LCBleGlzdGluZ1dvcmQsIHRoaXMuZm9udFNpemUpO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aW5wdXQgPSBkaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiBleGlzdGluZ1dvcmQgfSApO1xuXHRcdFx0XHRpbnB1dC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuZm9udFNpemUgKyAncHgnO1xuXHRcdFx0XHRyZXR1cm4gaW5wdXQ7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBEaXNwbGF5TGluZUVkaXQoZGl2OiBIVE1MRGl2RWxlbWVudCwgbGluZTogRGlhbG9ndWVMaW5lKSB7XG5cdFx0Y29uc3QgaW5wdXQgPSB0aGlzLkNyZWF0ZVRleHRBcmVhKGRpdiwgbGluZS5jb250ZW50KTtcblx0XHRjb25zdCBzcGVha2VyID0gdGhpcy5jaGFyYWN0ZXJzW2xpbmUuc3BlYWtlckluZGV4XTtcblx0XHRpZiAodGhpcy5sYW5ndWFnZSAhPT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdGlucHV0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNwZWFrZXIuYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0aW5wdXQuc3R5bGUuY29sb3IgPSBzcGVha2VyLmNvbG9yO1xuXHRcdH1cblx0XHRpZiAodGhpcy5kb1ZlcnRpY2FsKSB7XG5cdFx0XHR0aGlzLk1ha2VWZXJ0aWNhbChpbnB1dCk7XG5cdFx0fVxuXHRcdHJldHVybiBpbnB1dDtcblx0fVxuXG5cdHByaXZhdGUgQ3JlYXRlVGV4dEFyZWEoZGl2OiBIVE1MRGl2RWxlbWVudCwgZXhpc3RpbmdXb3JkID0gJycpIHtcblx0XHRsZXQgaW5wdXQ7XG5cdFx0c3dpdGNoKHRoaXMubGFuZ3VhZ2UpIHtcblx0XHRcdGNhc2UgJ0h3YXl1Jzpcblx0XHRcdFx0cmV0dXJuIEh3YXl1LkNyZWF0ZVRleHRBcmVhKGRpdiwgZXhpc3RpbmdXb3JkLCB0aGlzLmZvbnRTaXplLCB0aGlzLmRvVmVydGljYWwpO1xuXHRcdFx0Y2FzZSAnUGhvdG9sYW5nJzpcblx0XHRcdFx0cmV0dXJuIFBob3RvTGFuZy5DcmVhdGVUZXh0SW5wdXQoZGl2LCBleGlzdGluZ1dvcmQsIHRoaXMuZm9udFNpemUpO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aW5wdXQgPSBkaXYuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyB0ZXh0OiBleGlzdGluZ1dvcmQgfSApO1xuXHRcdFx0XHRpbnB1dC5zdHlsZS5mb250U2l6ZSA9IHRoaXMuZm9udFNpemUgKyAncHgnO1xuXHRcdFx0XHRyZXR1cm4gaW5wdXQ7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBEaXNwbGF5VGV4dChkaXY6IEhUTUxEaXZFbGVtZW50LCBmb250U2l6ZSA9IHRoaXMuZm9udFNpemUsIGV4aXN0aW5nV29yZCA9ICcnKSB7XG5cdFx0c3dpdGNoKHRoaXMubGFuZ3VhZ2UpIHtcblx0XHRcdGNhc2UgJ0h3YXl1Jzpcblx0XHRcdFx0cmV0dXJuIEh3YXl1LkRpc3BsYXkoZGl2LCBleGlzdGluZ1dvcmQsIGZvbnRTaXplLCB0aGlzLmRvVmVydGljYWwpO1xuXHRcdFx0Y2FzZSAnUGhvdG9sYW5nJzpcblx0XHRcdFx0cmV0dXJuIFBob3RvTGFuZy5EaXNwbGF5KGRpdiwgZXhpc3RpbmdXb3JkLCBmb250U2l6ZSwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG5cdFx0XHRkZWZhdWx0OiB7XG5cdFx0XHRcdGNvbnN0IHRleHQgPSBkaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGV4aXN0aW5nV29yZCB9ICk7XG5cdFx0XHRcdHRleHQuc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZSArICdweCc7XG5cdFx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBvdmVycmlkZSBhc3luYyBDcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252OiBTb3VyY2VBbmRWYXVsdCwgZmlsZVR5cGU6IHN0cmluZywgcGFyZW50Rm9sZGVySUQ6IG51bWJlciwgbmFtZTogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGNvbnN0IG5ld1N0b3J5RmlsZSA9IDxTdG9yeT4gKGF3YWl0IHN1cGVyLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnYsIGZpbGVUeXBlLCBwYXJlbnRGb2xkZXJJRCwgbmFtZSkpO1xuXHRcdG5ld1N0b3J5RmlsZS5jdXJyZW50UGFnZUluZGV4ID0gMDtcblx0XHRuZXdTdG9yeUZpbGUucGFnZXMgPSBbXTtcblx0XHRuZXdTdG9yeUZpbGUuY2hhcmFjdGVycyA9IFtdO1xuXHRcdG5ld1N0b3J5RmlsZS5sYW5ndWFnZSA9ICdFbmdsaXNoJztcblx0XHRuZXdTdG9yeUZpbGUuZG9WZXJ0aWNhbCA9IGZhbHNlO1xuXHRcdHJldHVybiBuZXdTdG9yeUZpbGU7XG5cdH1cblxuXHRvdmVycmlkZSBhc3luYyBEaXNwbGF5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdFx0YXdhaXQgc3VwZXIuRGlzcGxheShzbnYsIG1haW5EaXYpO1xuXHRcdHRoaXMuTG9hZFN0b3J5VUkoc252LCBtYWluRGl2LmNyZWF0ZURpdigndmJveCcpKTtcblx0fVxuXG5cdHByaXZhdGUgTG9hZFN0b3J5VUkoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRtYWluRGl2LmVtcHR5KCk7XG5cdFx0bWFpbkRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0dvIHRvIHBhZ2UgbnVtYmVyOicgfSApO1xuXHRcdGNvbnN0IHBhZ2VTZWxlY3REaXYgPSBtYWluRGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdGNvbnN0IHBhZ2VOdW1iZXJJbnB1dCA9IHBhZ2VTZWxlY3REaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggKyAxKSB9ICk7XG5cdFx0cGFnZVNlbGVjdERpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJycgKyAnLycgKyB0aGlzLnBhZ2VzLmxlbmd0aCB9ICk7XG5cdFx0Y29uc3QgZ29CdXR0b24gPSBwYWdlU2VsZWN0RGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHbycgfSApO1xuXHRcdGdvQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmN1cnJlbnRQYWdlSW5kZXggPSBwYXJzZUludChwYWdlTnVtYmVySW5wdXQudmFsdWUpIC0gMTtcblx0XHRcdHRoaXMuTG9hZEN1cnJlbnRQYWdlRWRpdChzbnYsIG1haW5EaXYpO1xuXHRcdH1cblxuXHRcdG1haW5EaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdGb250IFNpemUgKGluIHB4KTonIH0gKTtcblx0XHRjb25zdCBmb250U2l6ZUlucHV0ID0gbWFpbkRpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JyB9ICk7XG5cdFx0Zm9udFNpemVJbnB1dC52YWx1ZSA9IHRoaXMuZm9udFNpemUgPyAnJyArIHRoaXMuZm9udFNpemUgOiAnMTcuNSc7XG5cdFx0Zm9udFNpemVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMuZm9udFNpemUgPSBwYXJzZUZsb2F0KGZvbnRTaXplSW5wdXQudmFsdWUpO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR0aGlzLkxvYWRTdG9yeVVJKHNudiwgbWFpbkRpdik7XG5cdFx0fVxuXG5cdFx0bWFpbkRpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0xhbmd1YWdlOicgfSApO1xuXHRcdGNvbnN0IGxhbmd1YWdlSW5wdXQgPSBtYWluRGl2LmNyZWF0ZUVsKCdzZWxlY3QnKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IFN0b3J5Lmtub3duTGFuZ3VhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsYW5ndWFnZUlucHV0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6IFN0b3J5Lmtub3duTGFuZ3VhZ2VzW2ldLCB2YWx1ZTogU3Rvcnkua25vd25MYW5ndWFnZXNbaV0gfSApO1xuXHRcdH1cblx0XHRsYW5ndWFnZUlucHV0LnZhbHVlID0gdGhpcy5sYW5ndWFnZTtcblx0XHRsYW5ndWFnZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlSW5wdXQudmFsdWU7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdHRoaXMuTG9hZFN0b3J5VUkoc252LCBtYWluRGl2KTtcblx0XHR9XG5cblx0XHRtYWluRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnVmVydGljYWwgVGV4dCcgfSApO1xuXHRcdGNvbnN0IGRvVmVydGljYWxCb3ggPSBtYWluRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9ICk7XG5cdFx0ZG9WZXJ0aWNhbEJveC5jaGVja2VkID0gdGhpcy5kb1ZlcnRpY2FsO1xuXHRcdGRvVmVydGljYWxCb3gub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMuZG9WZXJ0aWNhbCA9IGRvVmVydGljYWxCb3guY2hlY2tlZDtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0dGhpcy5Mb2FkU3RvcnlVSShzbnYsIG1haW5EaXYpO1xuXHRcdH1cblxuXHRcdHRoaXMuTG9hZENoYXJhY3RlckVkaXRvclVJKHNudiwgbWFpbkRpdik7XG5cdH1cblxuXHRwcml2YXRlIExvYWRDaGFyYWN0ZXJFZGl0b3JVSShzbnY6IFNvdXJjZUFuZFZhdWx0LCBkaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdFx0Y29uc3QgY2hhckVkaXRvckRpdiA9IGRpdi5jcmVhdGVEaXYoKTtcblx0XHRjaGFyRWRpdG9yRGl2LmNsYXNzTmFtZSA9IHRoaXMuZG9WZXJ0aWNhbCA/ICdoYm94JyA6ICd2Ym94Jztcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhcmFjdGVycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gaTtcblx0XHRcdGNvbnN0IGNoYXJEaXYgPSBjaGFyRWRpdG9yRGl2LmNyZWF0ZURpdigpO1xuXHRcdFx0Y2hhckRpdi5jbGFzc05hbWUgPSB0aGlzLmRvVmVydGljYWwgPyAndmJveCcgOiAnaGJveCc7XG5cblx0XHRcdGNoYXJEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdOYW1lOiAnIH0gKTtcblx0XHRcdGNvbnN0IG5hbWVJbnB1dCA9IHRoaXMuQ3JlYXRlVGV4dElucHV0KGNoYXJEaXYsIHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLm5hbWUpO1xuXHRcdFx0aWYgKHRoaXMubGFuZ3VhZ2UgIT09ICdQaG90b2xhbmcnKSB7XG5cdFx0XHRcdG5hbWVJbnB1dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5iYWNrZ3JvdW5kQ29sb3I7XG5cdFx0XHRcdG5hbWVJbnB1dC5zdHlsZS5jb2xvciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yO1xuXHRcdFx0fVxuXHRcdFx0bmFtZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5uYW1lID0gbmFtZUlucHV0LnZhbHVlO1xuXHRcdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdFx0dGhpcy5Mb2FkU3RvcnlVSShzbnYsIGRpdik7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5kb1ZlcnRpY2FsKSB7XG5cdFx0XHRcdG5hbWVJbnB1dC5zdHlsZS5oZWlnaHQgPSAnZml0LWNvbnRlbnQnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmFtZUlucHV0LnN0eWxlLndpZHRoID0gJ2ZpdC1jb250ZW50Jztcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLmxhbmd1YWdlICE9PSAnUGhvdG9sYW5nJykge1xuXHRcdFx0XHR0aGlzLkxvYWRDaGFyYWN0ZXJDb2xvclNlbGVjdGlvblVJKHNudiwgZGl2LCBjaGFyRWRpdG9yRGl2LCBjdXJyZW50SW5kZXgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBhZGRDaGFyQnV0dG9uID0gY2hhckVkaXRvckRpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQWRkIENoYXJhY3RlcicgfSApO1xuXHRcdGFkZENoYXJCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMuY2hhcmFjdGVycy5wdXNoKG5ldyBDaGFyYWN0ZXIoKSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdGNoYXJFZGl0b3JEaXYucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLkxvYWRDaGFyYWN0ZXJFZGl0b3JVSShzbnYsIGRpdik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBMb2FkQ2hhcmFjdGVyQ29sb3JTZWxlY3Rpb25VSShzbnY6IFNvdXJjZUFuZFZhdWx0LCBkaXY6IEhUTUxEaXZFbGVtZW50LCBjaGFyRWRpdG9yRGl2OiBIVE1MRGl2RWxlbWVudCwgY3VycmVudEluZGV4OiBudW1iZXIpIHtcblx0XHRjb25zdCBjb2xvckRpdiA9IGNoYXJFZGl0b3JEaXYuY3JlYXRlRGl2KCk7XG5cdFx0Y29sb3JEaXYuY2xhc3NOYW1lID0gdGhpcy5kb1ZlcnRpY2FsID8gJ3Zib3gnIDogJ2hib3gnO1xuXG5cdFx0Y29sb3JEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUZXh0IENvbG9yOicgfSApO1xuXHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBjb2xvckRpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjb2xvcicsIHZhbHVlOiB0aGlzLmNoYXJhY3RlcnNbY3VycmVudEluZGV4XS5jb2xvciB9ICk7XG5cdFx0Y29uc3Qgc3dhcEJ1dHRvbiA9IGNvbG9yRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTd2FwJyB9ICk7XG5cdFx0Y29sb3JJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yID0gY29sb3JJbnB1dC52YWx1ZTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0Y2hhckVkaXRvckRpdi5yZW1vdmUoKTtcblx0XHRcdHRoaXMuTG9hZENoYXJhY3RlckVkaXRvclVJKHNudiwgZGl2KTtcblx0XHR9XG5cdFx0Y29sb3JEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdCYWNrZ3JvdW5kIENvbG9yOicgfSApO1xuXHRcdGNvbnN0IGJhY2tncm91bmRJbnB1dCA9IGNvbG9yRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NvbG9yJywgdmFsdWU6IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmJhY2tncm91bmRDb2xvciB9ICk7XG5cdFx0YmFja2dyb3VuZElucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRJbmRleF0uYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZElucHV0LnZhbHVlO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHRjaGFyRWRpdG9yRGl2LnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5Mb2FkQ2hhcmFjdGVyRWRpdG9yVUkoc252LCBkaXYpO1xuXHRcdH1cblx0XHRzd2FwQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0dGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRJbmRleF0uYmFja2dyb3VuZENvbG9yID0gY29sb3JJbnB1dC52YWx1ZTtcblx0XHRpZiAodGhpcy5sYW5ndWFnZSAhPT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50SW5kZXhdLmNvbG9yID0gYmFja2dyb3VuZElucHV0LnZhbHVlO1xuXHRcdH1cblx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRjaGFyRWRpdG9yRGl2LnJlbW92ZSgpO1xuXHRcdHRoaXMuTG9hZENoYXJhY3RlckVkaXRvclVJKHNudiwgZGl2KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIExvYWRQYWdlU2VsZWN0b3Ioc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRjb25zdCBidXR0b25zRGl2ID0gbWFpbkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0XHRjb25zdCBiYWNrQnV0dG9uID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnLScgfSApO1xuXHRcdGNvbnN0IHBhZ2VOdW1iZXJJbnB1dCA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAndGV4dCcsIHZhbHVlOiAnJyArICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggKyAxKSB9ICk7XG5cdFx0YnV0dG9uc0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogJycgKyAnLycgKyB0aGlzLnBhZ2VzLmxlbmd0aCB9ICk7XG5cdFx0Y29uc3QgbmV4dEJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcblx0XHRjb25zdCBkZWxldGVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEZWxldGUgUGFnZScgfSApO1xuXHRcdGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAnY2ZlLXJlbW92ZS1idXR0b24nO1xuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FkZCBQYWdlJyB9ICk7XG5cdFx0Y29uc3QgZWRpdE1vZGVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdFZGl0IE1vZGUnIH0gKTtcblx0XHRjb25zdCB2aWV3TW9kZUJ1dHRvbiA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1ZpZXcgTW9kZScgfSApO1xuXHRcdGNvbnN0IGhvbWVCdXR0b24gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdSZXR1cm4gdG8gU3RvcnknIH0gKTtcblx0XHRob21lQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRTdG9yeVVJKHNudiwgbWFpbkRpdik7XG5cdFx0fVxuXHRcdGVkaXRNb2RlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZUVkaXQoc252LCBtYWluRGl2KTtcblx0XHR9XG5cdFx0dmlld01vZGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuTG9hZEN1cnJlbnRQYWdlRGlzcGxheU9ubHkoc252LCBtYWluRGl2KTtcblx0XHR9XG5cdFx0YmFja0J1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFBhZ2VJbmRleCA+IDApIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4LS07XG5cdFx0XHRcdGF3YWl0IHRoaXMuTG9hZEN1cnJlbnRQYWdlRWRpdChzbnYsIG1haW5EaXYpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRuZXh0QnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5jdXJyZW50UGFnZUluZGV4IDwgdGhpcy5wYWdlcy5sZW5ndGgpIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4Kys7XG5cdFx0XHRcdGF3YWl0IHRoaXMuTG9hZEN1cnJlbnRQYWdlRWRpdChzbnYsIG1haW5EaXYpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRwYWdlTnVtYmVySW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLmN1cnJlbnRQYWdlSW5kZXggPSBwYXJzZUludChwYWdlTnVtYmVySW5wdXQudmFsdWUpIC0gMTtcblx0XHRcdGF3YWl0IHRoaXMuTG9hZEN1cnJlbnRQYWdlRWRpdChzbnYsIG1haW5EaXYpO1xuXHRcdH1cblx0XHRkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMucGFnZXMuc3BsaWNlKHRoaXMuY3VycmVudFBhZ2VJbmRleCwgMSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggIT09IDApIHtcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZUluZGV4LS07XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWRDdXJyZW50UGFnZUVkaXQoc252LG1haW5EaXYpO1xuXHRcdH1cblx0XHRhZGRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGRlZmF1bHRQYWdlID0gbmV3IFBhZ2UoKTtcblx0XHRcdGNvbnN0IHRoaXNQYWdlRmlsZUlEID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhRmlsZUlEO1xuXHRcdFx0aWYgKHRoaXNQYWdlRmlsZUlEICE9PSAtMSAmJiB0aGlzUGFnZUZpbGVJRCA8IHNudi5zb3VyY2VGb2xkZXIuZmlsZUNvdW50KSB7XG5cdFx0XHRcdGRlZmF1bHRQYWdlLm1lZGlhRmlsZUlEID0gdGhpc1BhZ2VGaWxlSUQ7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnBhZ2VzLnNwbGljZSh0aGlzLmN1cnJlbnRQYWdlSW5kZXggKyAxLCAwLCBkZWZhdWx0UGFnZSk7XG5cdFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0XHRcdHRoaXMuY3VycmVudFBhZ2VJbmRleCsrO1xuXHRcdFx0YXdhaXQgdGhpcy5Mb2FkQ3VycmVudFBhZ2VFZGl0KHNudixtYWluRGl2KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIExvYWRDdXJyZW50UGFnZUVkaXQoc252OiBTb3VyY2VBbmRWYXVsdCwgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQpIHtcblx0XHRtYWluRGl2LmVtcHR5KCk7XG5cdFx0dGhpcy5Mb2FkUGFnZVNlbGVjdG9yKHNudiwgbWFpbkRpdik7XG5cblx0XHRtYWluRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTWVkaWEgRmlsZSBJRDonIH0gKTtcblx0XHRjb25zdCBtZWRpYUZpbGVJRElucHV0ID0gbWFpbkRpdi5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICd0ZXh0JyB9ICk7XG5cdFx0XG5cdFx0Y29uc3QgcGFuZWxEaXYgPSBtYWluRGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdGNvbnN0IG91dGVyTWVkaWFEaXYgPSBwYW5lbERpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHRjb25zdCBsaW5lc0RpdiA9IHBhbmVsRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXG5cdFx0Y29uc3Qgc3BlYWtEaXYgPSBvdXRlck1lZGlhRGl2LmNyZWF0ZURpdigpO1xuXHRcdHNwZWFrRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRzcGVha0Rpdi5zdHlsZS50b3AgPSAnMHB4Jztcblx0XHRzcGVha0Rpdi5zdHlsZS5sZWZ0ID0gJzBweCc7XG5cblx0XHRjb25zdCBtZWRpYVdpZHRoSW5wdXQgPSBvdXRlck1lZGlhRGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnIH0gKTtcblx0XHRtZWRpYVdpZHRoSW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRvdXRlck1lZGlhRGl2LnN0eWxlLndpZHRoID0gbWVkaWFXaWR0aElucHV0LnZhbHVlICsgJyUnO1xuXHRcdFx0bGluZXNEaXYuc3R5bGUud2lkdGggPSAxMDAgLSBwYXJzZUludChtZWRpYVdpZHRoSW5wdXQudmFsdWUpICsgJyUnO1xuXHRcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2UgPSBwYXJzZUludChtZWRpYVdpZHRoSW5wdXQudmFsdWUpO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbWVkaWFEaXYgPSBvdXRlck1lZGlhRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSAnNTAlJztcblx0XHRtZWRpYURpdi5zdHlsZS5vYmplY3RGaXQgPSAnY29udGFpbic7XG5cdFx0bGluZXNEaXYuc3R5bGUud2lkdGggPSAnNTAlJztcblx0XHRsaW5lc0Rpdi5zdHlsZS5tYXhIZWlnaHQgPSAnODB2aCc7XG5cdFx0bGluZXNEaXYuc3R5bGUucG9zaXRpb24gPSAnc3RpY2t5Jztcblx0XHRsaW5lc0Rpdi5zdHlsZS50b3AgPSAnMCUnO1xuXG5cdFx0aWYgKHRoaXMuY3VycmVudFBhZ2VJbmRleCA8IHRoaXMucGFnZXMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBjdXJyZW50UGFnZSA9IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XTtcblx0XHRcdGNvbnN0IG1lZGlhRmlsZUlEID0gY3VycmVudFBhZ2UubWVkaWFGaWxlSUQ7XG5cdFx0XHRtZWRpYUZpbGVJRElucHV0LnZhbHVlID0gJycgKyBjdXJyZW50UGFnZS5tZWRpYUZpbGVJRDtcblx0XHRcdGlmIChtZWRpYUZpbGVJRCA+IDApIHtcblx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCBtZWRpYUZpbGVJRCk7XG5cdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlKSB7XG5cdFx0XHRcdG1lZGlhV2lkdGhJbnB1dC52YWx1ZSA9ICcnICsgdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2U7XG5cdFx0XHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSBtZWRpYVdpZHRoSW5wdXQudmFsdWUgKyAnJSc7XG5cdFx0XHRcdGxpbmVzRGl2LnN0eWxlLndpZHRoID0gMTAwIC0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKSArICclJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1lZGlhV2lkdGhJbnB1dC52YWx1ZSA9ICc1MCc7XG5cdFx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5tZWRpYVNpemVQZXJjZW50YWdlID0gNTA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBkZWZhdWx0UGFnZSA9IG5ldyBQYWdlKCk7XG5cdFx0XHRjb25zdCBsYXN0UGFnZSA9IHRoaXMuY3VycmVudFBhZ2VJbmRleCAtIDE7XG5cdFx0XHRpZiAobGFzdFBhZ2UgPj0gMCAmJiB0aGlzLmN1cnJlbnRQYWdlSW5kZXggIT09IDApIHtcblx0XHRcdFx0Y29uc3QgbGFzdFBhZ2VGaWxlSUQgPSB0aGlzLnBhZ2VzW2xhc3RQYWdlXS5tZWRpYUZpbGVJRDtcblx0XHRcdFx0Y29uc3QgbGFzdFBhZ2VTaXplID0gdGhpcy5wYWdlc1tsYXN0UGFnZV0ubWVkaWFTaXplUGVyY2VudGFnZTtcblx0XHRcdFx0ZGVmYXVsdFBhZ2UubWVkaWFTaXplUGVyY2VudGFnZSA9IGxhc3RQYWdlU2l6ZTtcblx0XHRcdFx0bWVkaWFXaWR0aElucHV0LnZhbHVlID0gJycgKyBsYXN0UGFnZVNpemU7XG5cdFx0XHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSBtZWRpYVdpZHRoSW5wdXQudmFsdWUgKyAnJSc7XG5cdFx0XHRcdGxpbmVzRGl2LnN0eWxlLndpZHRoID0gMTAwIC0gcGFyc2VJbnQobWVkaWFXaWR0aElucHV0LnZhbHVlKSArICclJztcblx0XHRcdFx0aWYgKGxhc3RQYWdlRmlsZUlEICE9PSAtMSAmJiBsYXN0UGFnZUZpbGVJRCA8IHNudi5zb3VyY2VGb2xkZXIuZmlsZUNvdW50KSB7XG5cdFx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlSUQgPSBsYXN0UGFnZUZpbGVJRCArIDE7XG5cdFx0XHRcdFx0ZGVmYXVsdFBhZ2UubWVkaWFGaWxlSUQgPSBtZWRpYUZpbGVJRDtcblx0XHRcdFx0XHRtZWRpYUZpbGVJRElucHV0LnZhbHVlID0gJycgKyBtZWRpYUZpbGVJRDtcblx0XHRcdFx0XHRpZiAobWVkaWFGaWxlSUQgPiAwKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBtZWRpYUZpbGUgPSA8U2luZ2xlTWVkaWFGaWxlPiBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIG1lZGlhRmlsZUlEKTtcblx0XHRcdFx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5wYWdlcy5wdXNoKGRlZmF1bHRQYWdlKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdH1cblx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2LCBzcGVha0Rpdik7XG5cdFx0bWVkaWFGaWxlSURJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGN1cnJlbnRQYWdlID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdO1xuXHRcdFx0Y3VycmVudFBhZ2UubWVkaWFGaWxlSUQgPSBwYXJzZUludChtZWRpYUZpbGVJRElucHV0LnZhbHVlKTtcblx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0Y29uc3QgbWVkaWFGaWxlID0gPFNpbmdsZU1lZGlhRmlsZT4gYXdhaXQgQ0ZFRmlsZUhhbmRsZXIuTG9hZEZpbGUoc252LCBjdXJyZW50UGFnZS5tZWRpYUZpbGVJRCk7XG5cdFx0XHRhd2FpdCBtZWRpYUZpbGUuRGlzcGxheU1lZGlhT25seShtZWRpYURpdiwgc252KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIExvYWRDdXJyZW50UGFnZURpc3BsYXlPbmx5KHNudjogU291cmNlQW5kVmF1bHQsIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdFx0bWFpbkRpdi5lbXB0eSgpO1xuXG5cdFx0dGhpcy5Mb2FkUGFnZVNlbGVjdG9yKHNudiwgbWFpbkRpdik7XG5cdFx0XG5cdFx0Y29uc3QgcGFuZWxEaXYgPSBtYWluRGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHRcdGNvbnN0IG91dGVyTWVkaWFEaXYgPSBwYW5lbERpdi5jcmVhdGVEaXYoJ3Zib3gnKTtcblx0XHRjb25zdCBsaW5lc0RpdiA9IHBhbmVsRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdFxuXHRcdGNvbnN0IHNwZWFrRGl2ID0gb3V0ZXJNZWRpYURpdi5jcmVhdGVEaXYoKTtcblx0XHRzcGVha0Rpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdFx0c3BlYWtEaXYuc3R5bGUudG9wID0gJzBweCc7XG5cdFx0c3BlYWtEaXYuc3R5bGUubGVmdCA9ICcwcHgnO1xuXG5cdFx0Y29uc3QgbWVkaWFEaXYgPSBvdXRlck1lZGlhRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHRcdG91dGVyTWVkaWFEaXYuc3R5bGUud2lkdGggPSAnNTAlJztcblx0XHRtZWRpYURpdi5zdHlsZS5vYmplY3RGaXQgPSAnY29udGFpbic7XG5cdFx0bGluZXNEaXYuc3R5bGUud2lkdGggPSAnNTAlJztcblx0XHRsaW5lc0Rpdi5zdHlsZS5tYXhIZWlnaHQgPSAnODB2aCc7XG5cdFx0bGluZXNEaXYuc3R5bGUucG9zaXRpb24gPSAnc3RpY2t5Jztcblx0XHRsaW5lc0Rpdi5zdHlsZS50b3AgPSAnMCUnO1xuXG5cdFx0Y29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF07XG5cdFx0Y29uc3QgbWVkaWFGaWxlSUQgPSBjdXJyZW50UGFnZS5tZWRpYUZpbGVJRDtcblx0XHRpZiAobWVkaWFGaWxlSUQgPiAwKSB7XG5cdFx0XHRjb25zdCBtZWRpYUZpbGUgPSA8U2luZ2xlTWVkaWFGaWxlPiBhd2FpdCBDRkVGaWxlSGFuZGxlci5Mb2FkRmlsZShzbnYsIG1lZGlhRmlsZUlEKTtcblx0XHRcdGF3YWl0IG1lZGlhRmlsZS5EaXNwbGF5TWVkaWFPbmx5KG1lZGlhRGl2LCBzbnYpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2UpIHtcblx0XHRcdGNvbnN0IHdpZHRoID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLm1lZGlhU2l6ZVBlcmNlbnRhZ2U7XG5cdFx0XHRvdXRlck1lZGlhRGl2LnN0eWxlLndpZHRoID0gd2lkdGggKyAnJSc7XG5cdFx0XHRsaW5lc0Rpdi5zdHlsZS53aWR0aCA9IDEwMCAtIHdpZHRoICsgJyUnO1xuXHRcdH1cblx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRGlzcGxheU9ubHkobGluZXNEaXYsIHNwZWFrRGl2KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgTG9hZERpYWxvZ3VlTGluZXNFZGl0KHNudjogU291cmNlQW5kVmF1bHQsIGxpbmVzRGl2OiBIVE1MRGl2RWxlbWVudCwgc3BlYWtEaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdFx0bGluZXNEaXYuZW1wdHkoKTtcblxuXHRcdGNvbnN0IGV4aXN0aW5nTGluZXNEaXYgPSBsaW5lc0Rpdi5jcmVhdGVEaXYoKTtcblx0XHRleGlzdGluZ0xpbmVzRGl2LmNsYXNzTmFtZSA9IHRoaXMuZG9WZXJ0aWNhbCA/ICdoYm94JyA6ICd2Ym94Jztcblx0XHRpZiAodGhpcy5kb1ZlcnRpY2FsKSB7XG5cdFx0XHRleGlzdGluZ0xpbmVzRGl2LnN0eWxlLm92ZXJmbG93WCA9ICdzY3JvbGwnO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRleGlzdGluZ0xpbmVzRGl2LnN0eWxlLm92ZXJmbG93WSA9ICdzY3JvbGwnO1xuXHRcdH1cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gaTtcblx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2ldO1xuXHRcdFx0Y29uc3Qgc3BlYWtlciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50TGluZS5zcGVha2VySW5kZXhdO1xuXG5cdFx0XHRjb25zdCBsaW5lRGl2ID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVEaXYoKTtcblx0XHRcdGxpbmVEaXYuY2xhc3NOYW1lID0gdGhpcy5kb1ZlcnRpY2FsID8gJ3Zib3gnIDogJ2hib3gnO1xuXG5cdFx0XHRjb25zdCBkZWxldGVCdXR0b24gPSBsaW5lRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICctJyB9ICk7XG5cdFx0XHRkZWxldGVCdXR0b24uY2xhc3NOYW1lID0gJ2NmZS1yZW1vdmUtYnV0dG9uJztcblx0XHRcdGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubGluZXMuc3BsaWNlKGN1cnJlbnRJbmRleCwgMSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2LCBzcGVha0Rpdik7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5kb1ZlcnRpY2FsKSB7XG5cdFx0XHRcdHRoaXMuTWFrZVZlcnRpY2FsKGRlbGV0ZUJ1dHRvbik7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLmxhbmd1YWdlID09PSAnUGhvdG9sYW5nJykge1xuXHRcdFx0XHRjb25zdCBwbGF5QnV0dG9uID0gbGluZURpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHUyNUI3JyB9ICk7XG5cdFx0XHRcdHBsYXlCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBwb3B1cCA9IHNwZWFrRGl2LmNyZWF0ZURpdigpO1xuXHRcdFx0XHRcdHBvcHVwLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRcdFx0XHRwb3B1cC5zdHlsZS50b3AgPSAnMHB4Jztcblx0XHRcdFx0XHRwb3B1cC5zdHlsZS5sZWZ0ID0gJzBweCc7XG5cdFx0XHRcdFx0Y29uc3QgcGhvdG9saW5lID0gbmV3IFBob3RvTGluZShsaW5lSW5wdXQudmFsdWUpO1xuXHRcdFx0XHRcdHBob3RvbGluZS5TcGVhayhwb3B1cCwgMjAwLCBbMTAwLCAyNTAsIDUwMF0sIFswLCA1MDBdLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRoaXMuZG9WZXJ0aWNhbCkge1xuXHRcdFx0XHRcdHRoaXMuTWFrZVZlcnRpY2FsKHBsYXlCdXR0b24pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGNoYXJEcm9wZG93bkJ1dHRvbiA9IGxpbmVEaXYuY3JlYXRlRGl2KCk7XG5cdFx0XHRjb25zdCBjaGFyRHJvcGRvd25EaXYgPSBjaGFyRHJvcGRvd25CdXR0b24uY3JlYXRlRGl2KCk7XG5cdFx0XHRjaGFyRHJvcGRvd25EaXYuc3R5bGUuaGVpZ2h0ID0gJ2ZpdC1jb250ZW50Jztcblx0XHRcdGNoYXJEcm9wZG93bkRpdi5zdHlsZS53aWR0aCA9ICdmaXQtY29udGVudCc7XG5cdFx0XHRjaGFyRHJvcGRvd25EaXYuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuXHRcdFx0Y2hhckRyb3Bkb3duQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlbGVjdERpdiA9IGNoYXJEcm9wZG93bkRpdi5jcmVhdGVEaXYoKTtcblx0XHRcdFx0c2VsZWN0RGl2LmNsYXNzTmFtZSA9IHRoaXMuZG9WZXJ0aWNhbCA/ICdoYm94JyA6ICd2Ym94Jztcblx0XHRcdFx0c2VsZWN0RGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRcdFx0c2VsZWN0RGl2LnN0eWxlLnRvcCA9ICcwJSc7XG5cdFx0XHRcdHNlbGVjdERpdi5zdHlsZS5sZWZ0ID0gJzAlJztcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q2hhckluZGV4ID0gaTtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50Q2hhciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50Q2hhckluZGV4XTtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50T3B0aW9uID0gc2VsZWN0RGl2LmNyZWF0ZURpdigpO1xuXHRcdFx0XHRcdGlmICh0aGlzLmRvVmVydGljYWwpIHtcblx0XHRcdFx0XHRcdHRoaXMuTWFrZVZlcnRpY2FsKGN1cnJlbnRPcHRpb24pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5sYW5ndWFnZSAhPT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRPcHRpb24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VycmVudENoYXIuYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0XHRcdFx0Y3VycmVudE9wdGlvbi5zdHlsZS5jb2xvciA9IGN1cnJlbnRDaGFyLmNvbG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLnpJbmRleCA9ICcyJztcblx0XHRcdFx0XHR0aGlzLkRpc3BsYXlUZXh0KGN1cnJlbnRPcHRpb24sIDI1LCBjdXJyZW50Q2hhci5uYW1lKTtcblx0XHRcdFx0XHRjdXJyZW50T3B0aW9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubGluZXNbY3VycmVudEluZGV4XS5zcGVha2VySW5kZXggPSBjdXJyZW50Q2hhckluZGV4O1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHRcdFx0XHR0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2LCBzcGVha0Rpdik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IG5hbWVFbCA9IHRoaXMuRGlzcGxheVRleHQoY2hhckRyb3Bkb3duRGl2LCAyNSwgdGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRMaW5lLnNwZWFrZXJJbmRleF0ubmFtZSk7XG5cdFx0XHRpZiAodGhpcy5kb1ZlcnRpY2FsKSB7XG5cdFx0XHRcdHRoaXMuTWFrZVZlcnRpY2FsKG5hbWVFbCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5sYW5ndWFnZSAhPT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdFx0bmFtZUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNwZWFrZXIuYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0XHRuYW1lRWwuc3R5bGUuY29sb3IgPSBzcGVha2VyLmNvbG9yO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBsaW5lSW5wdXQgPSB0aGlzLkRpc3BsYXlMaW5lRWRpdChsaW5lRGl2LCBjdXJyZW50TGluZSk7XG5cdFx0XHRpZiAodGhpcy5kb1ZlcnRpY2FsKSB7XG5cdFx0XHRcdGxpbmVJbnB1dC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG5cdFx0XHRcdHRoaXMuTWFrZVZlcnRpY2FsKGxpbmVJbnB1dCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsaW5lSW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cdFx0XHR9XG5cblx0XHRcdGxpbmVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y3VycmVudExpbmUuY29udGVudCA9IGxpbmVJbnB1dC52YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGV4aXN0aW5nTGluZXNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcblx0XHRhZGRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5wdXNoKG5ldyBEaWFsb2d1ZUxpbmUoMCkpO1xuXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdFx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2LCBzcGVha0Rpdik7XG5cdFx0fVxuXHR9XG5cblx0Ly8gcHJpdmF0ZSBhc3luYyBMb2FkRGlhbG9ndWVMaW5lc0VkaXQoc252OiBTb3VyY2VBbmRWYXVsdCwgbGluZXNEaXY6IEhUTUxEaXZFbGVtZW50KSB7XG5cdC8vIFx0Y29uc3QgZXhpc3RpbmdMaW5lc0RpdiA9IGxpbmVzRGl2LmNyZWF0ZURpdignaGJveCcpO1xuXHQvLyBcdGV4aXN0aW5nTGluZXNEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG5cdC8vIFx0Y29uc3QgZm9udFNpemUgPSAnMTcuNXB4Jztcblx0Ly8gXHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHQvLyBcdFx0Y29uc3QgY3VycmVudEluZGV4ID0gaTtcblx0Ly8gXHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2ldO1xuXHQvLyBcdFx0Y29uc3Qgc3BlYWtlckluZGV4ID0gY3VycmVudExpbmUuc3BlYWtlckluZGV4O1xuXHQvLyBcdFx0Y29uc3QgY3VycmVudFNwZWFrZXIgPSB0aGlzLmNoYXJhY3RlcnNbc3BlYWtlckluZGV4XTtcblx0Ly8gXHRcdGNvbnN0IGxpbmVEaXYgPSBleGlzdGluZ0xpbmVzRGl2LmNyZWF0ZURpdigndmJveCcpO1xuXHQvLyBcdFx0Y29uc3QgZGVsZXRlQnV0dG9uID0gbGluZURpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnLScgfSApO1xuXHQvLyBcdFx0ZGVsZXRlQnV0dG9uLmNsYXNzTmFtZSA9ICdjZmUtcmVtb3ZlLWJ1dHRvbic7XG5cdC8vIFx0XHRkZWxldGVCdXR0b24uc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xuXHQvLyBcdFx0ZGVsZXRlQnV0dG9uLnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0Ly8gXHRcdGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHQvLyBcdFx0XHR0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubGluZXMuc3BsaWNlKGN1cnJlbnRJbmRleCwgMSk7XG5cdC8vIFx0XHRcdGF3YWl0IHRoaXMuU2F2ZShzbnYpO1xuXHQvLyBcdFx0XHRhd2FpdCB0aGlzLkxvYWREaWFsb2d1ZUxpbmVzRWRpdChzbnYsIGxpbmVzRGl2KTtcblx0Ly8gXHRcdH1cblx0Ly8gXHRcdGNvbnN0IGluZGV4RWxlbWVudCA9IGxpbmVEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICcnICsgIGN1cnJlbnRJbmRleCB9ICk7XG5cdC8vIFx0XHRpbmRleEVsZW1lbnQuc3R5bGUuY29sb3IgPSBjdXJyZW50U3BlYWtlci5jb2xvcjtcblx0Ly8gXHRcdGluZGV4RWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gJ0h3YXl1UmVhbCc7XG5cdC8vIFx0XHRpbmRleEVsZW1lbnQuc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xuXHQvLyBcdFx0aW5kZXhFbGVtZW50LnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0Ly8gXHRcdGNvbnN0IGNoYXJEcm9wZG93bkRpdiA9IGxpbmVEaXYuY3JlYXRlRGl2KCk7XG5cdC8vIFx0XHRjaGFyRHJvcGRvd25EaXYuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuXHQvLyBcdFx0Y29uc3QgY2hhckRyb3Bkb3duID0gY2hhckRyb3Bkb3duRGl2LmNyZWF0ZUVsKCdidXR0b24nKTtcblx0Ly8gXHRcdGNoYXJEcm9wZG93bi5zdHlsZS5oZWlnaHQgPSAnZml0LWNvbnRlbnQnO1xuXHQvLyBcdFx0Y2hhckRyb3Bkb3duLm9uY2xpY2sgPSAoKSA9PiB7XG5cdC8vIFx0XHRcdGNvbnN0IHNlbGVjdERpdiA9IGNoYXJEcm9wZG93bkRpdi5jcmVhdGVEaXYoJ2hib3gnKTtcblx0Ly8gXHRcdFx0c2VsZWN0RGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0Ly8gXHRcdFx0c2VsZWN0RGl2LnN0eWxlLnRvcCA9ICcwJSc7XG5cdC8vIFx0XHRcdHNlbGVjdERpdi5zdHlsZS5sZWZ0ID0gJzAlJztcblx0Ly8gXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHtcblx0Ly8gXHRcdFx0XHRjb25zdCBjdXJyZW50Q2hhckluZGV4ID0gaTtcblx0Ly8gXHRcdFx0XHRjb25zdCBjdXJyZW50Q2hhciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50Q2hhckluZGV4XTtcblx0Ly8gXHRcdFx0XHRjb25zdCBjdXJyZW50T3B0aW9uID0gc2VsZWN0RGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6IGN1cnJlbnRDaGFyLm5hbWUsIHZhbHVlOiAnJyArIGkgfSApO1xuXHQvLyBcdFx0XHRcdGN1cnJlbnRPcHRpb24uc3R5bGUuY29sb3IgPSBjdXJyZW50Q2hhci5jb2xvcjtcblx0Ly8gXHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLmZvbnRGYW1pbHkgPSAnSHdheXVSZWFsJztcblx0Ly8gXHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGN1cnJlbnRDaGFyLmJhY2tncm91bmRDb2xvcjtcblx0Ly8gXHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLndyaXRpbmdNb2RlID0gJ3ZlcnRpY2FsLWxyJztcblx0Ly8gXHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0Ly8gXHRcdFx0XHRjdXJyZW50T3B0aW9uLnN0eWxlLmhlaWdodCA9ICdmaXQtY29udGVudCc7XG5cdC8vIFx0XHRcdFx0Y3VycmVudE9wdGlvbi5zdHlsZS56SW5kZXggPSAnMic7XG5cdC8vIFx0XHRcdFx0Y3VycmVudE9wdGlvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHQvLyBcdFx0XHRcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2N1cnJlbnRJbmRleF0uc3BlYWtlckluZGV4ID0gY3VycmVudENoYXJJbmRleDtcblx0Ly8gXHRcdFx0XHRcdGNvbnN0IG5ld1NwZWFrZXJDb2xvciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50Q2hhckluZGV4XS5jb2xvcjtcblx0Ly8gXHRcdFx0XHRcdGNvbnN0IG5ld0JhY2tncm91bmRDb2xvciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50Q2hhckluZGV4XS5iYWNrZ3JvdW5kQ29sb3I7XG5cdC8vIFx0XHRcdFx0XHRjaGFyRHJvcGRvd24uc3R5bGUuY29sb3IgPSBuZXdTcGVha2VyQ29sb3I7XG5cdC8vIFx0XHRcdFx0XHRjaGFyRHJvcGRvd24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbmV3QmFja2dyb3VuZENvbG9yO1xuXHQvLyBcdFx0XHRcdFx0Y2hhckRyb3Bkb3duLnRleHRDb250ZW50ID0gdGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRDaGFySW5kZXhdLm5hbWU7XG5cdC8vIFx0XHRcdFx0XHRsaW5lSW5wdXQuc3R5bGUuY29sb3IgPSBuZXdTcGVha2VyQ29sb3I7XG5cdC8vIFx0XHRcdFx0XHRsaW5lSW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbmV3QmFja2dyb3VuZENvbG9yO1xuXHQvLyBcdFx0XHRcdFx0aW5kZXhFbGVtZW50LnN0eWxlLmNvbG9yID0gbmV3U3BlYWtlckNvbG9yO1xuXHQvLyBcdFx0XHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdC8vIFx0XHRcdFx0XHRzZWxlY3REaXYucmVtb3ZlKCk7XG5cdC8vIFx0XHRcdFx0fVxuXHQvLyBcdFx0XHR9XG5cdC8vIFx0XHR9XG5cdC8vIFx0XHRjaGFyRHJvcGRvd24udGV4dENvbnRlbnQgPSB0aGlzLmNoYXJhY3RlcnNbY3VycmVudExpbmUuc3BlYWtlckluZGV4XS5uYW1lO1xuXHQvLyBcdFx0Y2hhckRyb3Bkb3duLnN0eWxlLmNvbG9yID0gY3VycmVudFNwZWFrZXIuY29sb3I7XG5cdC8vIFx0XHRjaGFyRHJvcGRvd24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VycmVudFNwZWFrZXIuYmFja2dyb3VuZENvbG9yO1xuXHQvLyBcdFx0Y2hhckRyb3Bkb3duLnN0eWxlLmZvbnRGYW1pbHkgPSAnSHdheXVSZWFsJztcblx0Ly8gXHRcdGNoYXJEcm9wZG93bi5zdHlsZS53cml0aW5nTW9kZSA9ICd2ZXJ0aWNhbC1scic7XG5cdC8vIFx0XHRjaGFyRHJvcGRvd24uc3R5bGUudGV4dE9yaWVudGF0aW9uID0gJ3VwcmlnaHQnO1xuXHQvLyBcdFx0Y29uc3QgbGluZUlucHV0ID0gbGluZURpdi5jcmVhdGVFbCgndGV4dGFyZWEnKTtcblx0Ly8gXHRcdGxpbmVJbnB1dC5zcGVsbGNoZWNrID0gZmFsc2U7XG5cdC8vIFx0XHRsaW5lSW5wdXQuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG5cdC8vIFx0XHRsaW5lSW5wdXQuc3R5bGUud3JpdGluZ01vZGUgPSAndmVydGljYWwtbHInO1xuXHQvLyBcdFx0bGluZUlucHV0LnN0eWxlLnRleHRPcmllbnRhdGlvbiA9ICd1cHJpZ2h0Jztcblx0Ly8gXHRcdGxpbmVJbnB1dC5kZWZhdWx0VmFsdWUgPSBjdXJyZW50TGluZS5jb250ZW50O1xuXHQvLyBcdFx0bGluZUlucHV0LnN0eWxlLmNvbG9yID0gY3VycmVudFNwZWFrZXIuY29sb3I7XG5cdC8vIFx0XHRsaW5lSW5wdXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3VycmVudFNwZWFrZXIuYmFja2dyb3VuZENvbG9yO1xuXHQvLyBcdFx0bGluZUlucHV0LnN0eWxlLmZvbnRGYW1pbHkgPSAnSHdheXVSZWFsJztcblx0Ly8gXHRcdGxpbmVJbnB1dC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xuXHQvLyBcdFx0bGluZUlucHV0LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcblx0Ly8gXHRcdGxpbmVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcblx0Ly8gXHRcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2N1cnJlbnRJbmRleF0uY29udGVudCA9IGxpbmVJbnB1dC52YWx1ZTtcblx0Ly8gXHRcdFx0YXdhaXQgdGhpcy5TYXZlKHNudik7XG5cdC8vIFx0XHR9XG5cdC8vIFx0fVxuXHQvLyBcdGNvbnN0IGFkZEJ1dHRvbiA9IGV4aXN0aW5nTGluZXNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJysnIH0gKTtcblx0Ly8gXHRhZGRCdXR0b24uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuXHQvLyBcdGFkZEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHQvLyBcdFx0dGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzLnB1c2gobmV3IERpYWxvZ3VlTGluZSgwKSk7XG5cdC8vIFx0XHRhd2FpdCB0aGlzLlNhdmUoc252KTtcblx0Ly8gXHRcdGF3YWl0IHRoaXMuTG9hZERpYWxvZ3VlTGluZXNFZGl0KHNudiwgbGluZXNEaXYpO1xuXHQvLyBcdH1cblx0Ly8gfVxuXG5cdHByaXZhdGUgYXN5bmMgTG9hZERpYWxvZ3VlTGluZXNEaXNwbGF5T25seShsaW5lc0RpdjogSFRNTERpdkVsZW1lbnQsIHNwZWFrRGl2OiBIVE1MRGl2RWxlbWVudCkge1xuXHRcdGxpbmVzRGl2LmVtcHR5KCk7XG5cblx0XHRjb25zdCBleGlzdGluZ0xpbmVzRGl2ID0gbGluZXNEaXYuY3JlYXRlRGl2KCd2Ym94Jyk7XG5cdFx0ZXhpc3RpbmdMaW5lc0Rpdi5jbGFzc05hbWUgPSB0aGlzLmRvVmVydGljYWwgPyAnaGJveCcgOiAndmJveCcgO1xuXHRcdGlmICh0aGlzLmRvVmVydGljYWwpIHtcblx0XHRcdGV4aXN0aW5nTGluZXNEaXYuc3R5bGUub3ZlcmZsb3dYID0gJ3Njcm9sbCc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGV4aXN0aW5nTGluZXNEaXYuc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XG5cdFx0fVxuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhZ2VzW3RoaXMuY3VycmVudFBhZ2VJbmRleF0ubGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGN1cnJlbnRMaW5lID0gdGhpcy5wYWdlc1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLmxpbmVzW2ldO1xuXHRcdFx0Y29uc3Qgc3BlYWtlciA9IHRoaXMuY2hhcmFjdGVyc1tjdXJyZW50TGluZS5zcGVha2VySW5kZXhdO1xuXHRcdFx0XG5cdFx0XHRpZiAodGhpcy5sYW5ndWFnZSA9PT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdFx0Y29uc3QgcGxheUJ1dHRvbiA9IGV4aXN0aW5nTGluZXNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1MjVCNycgfSApO1xuXHRcdFx0XHRwbGF5QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcG9wdXAgPSBzcGVha0Rpdi5jcmVhdGVEaXYoKTtcblx0XHRcdFx0XHRwb3B1cC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdFx0XHRcdFx0cG9wdXAuc3R5bGUudG9wID0gJzBweCc7XG5cdFx0XHRcdFx0cG9wdXAuc3R5bGUubGVmdCA9ICcwcHgnO1xuXHRcdFx0XHRcdGNvbnN0IHBob3RvbGluZSA9IG5ldyBQaG90b0xpbmUoY3VycmVudExpbmUuY29udGVudCk7XG5cdFx0XHRcdFx0cGhvdG9saW5lLlNwZWFrKHBvcHVwLCAyMDAsIFsxMDAsIDI1MCwgNTAwXSwgWzAsIDUwMF0sIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBuYW1lRGl2ID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVEaXYoJycpO1xuXHRcdFx0bmFtZURpdi5jbGFzc05hbWUgPSB0aGlzLmRvVmVydGljYWwgPyAndmJveCcgOiAnaGJveCc7XG5cdFx0XHRjb25zdCBsaW5lRGl2ID0gZXhpc3RpbmdMaW5lc0Rpdi5jcmVhdGVEaXYoJycpO1xuXHRcdFx0bGluZURpdi5jbGFzc05hbWUgPSB0aGlzLmRvVmVydGljYWwgPyAndmJveCcgOiAnaGJveCc7XG5cblx0XHRcdGNvbnN0IG5hbWVFbCA9IHRoaXMuRGlzcGxheVRleHQobmFtZURpdiwgMjUsIHNwZWFrZXIubmFtZSk7XG5cdFx0XHRpZiAodGhpcy5sYW5ndWFnZSAhPT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdFx0bmFtZUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHNwZWFrZXIuYmFja2dyb3VuZENvbG9yO1xuXHRcdFx0XHRuYW1lRWwuc3R5bGUuY29sb3IgPSBzcGVha2VyLmNvbG9yO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAodGhpcy5sYW5ndWFnZSA9PT0gJ1Bob3RvbGFuZycpIHtcblx0XHRcdFx0Y29uc3QgcGhvdG9MaW5lID0gbmV3IFBob3RvTGluZShjdXJyZW50TGluZS5jb250ZW50KTtcblx0XHRcdFx0cGhvdG9MaW5lLkRpc3BsYXlTdGF0aWMobGluZURpdiwgMjUsIG51bGwsIG51bGwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgbGluZUVsID0gdGhpcy5EaXNwbGF5VGV4dChsaW5lRGl2LCAyNSwgY3VycmVudExpbmUuY29udGVudCk7XG5cdFx0XHRcdGxpbmVFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzcGVha2VyLmJhY2tncm91bmRDb2xvcjtcblx0XHRcdFx0bGluZUVsLnN0eWxlLmNvbG9yID0gc3BlYWtlci5jb2xvcjtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHRoaXMubGFuZ3VhZ2UgPT09ICdQaG90b2xhbmcnKSB7XG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50TGluZSA9IHRoaXMucGFnZXNbdGhpcy5jdXJyZW50UGFnZUluZGV4XS5saW5lc1tpXTtcblxuXHRcdFx0XHRjb25zdCBuYW1lRGl2ID0gc3BlYWtEaXYuY3JlYXRlRGl2KCk7XG5cdFx0XHRcdG5hbWVEaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHRcdFx0XHRuYW1lRGl2LnN0eWxlLnRvcCA9ICcwcHgnO1xuXHRcdFx0XHRuYW1lRGl2LnN0eWxlLmxlZnQgPSAnMHB4Jztcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHBob3RvTmFtZSA9IG5ldyBQaG90b0xpbmUodGhpcy5jaGFyYWN0ZXJzW2N1cnJlbnRMaW5lLnNwZWFrZXJJbmRleF0ubmFtZSk7XG5cdFx0XHRcdGF3YWl0IHBob3RvTmFtZS5TcGVhayhuYW1lRGl2LCAxMDAsIFsxMDAsIDI1MCwgNTAwXSwgWzAsIDUwMF0sIGZhbHNlKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHBvcHVwID0gc3BlYWtEaXYuY3JlYXRlRGl2KCk7XG5cdFx0XHRcdHBvcHVwLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRcdFx0cG9wdXAuc3R5bGUudG9wID0gJzBweCc7XG5cdFx0XHRcdHBvcHVwLnN0eWxlLmxlZnQgPSAnMHB4JztcblxuXHRcdFx0XHRjb25zdCBwaG90b0xpbmUgPSBuZXcgUGhvdG9MaW5lKGN1cnJlbnRMaW5lLmNvbnRlbnQpO1xuXHRcdFx0XHRhd2FpdCBwaG90b0xpbmUuU3BlYWsocG9wdXAsIDIwMCwgWzEwMCwgMjUwLCA1MDBdLCBbMCwgNTAwXSwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG59XG5cbmNsYXNzIFBhZ2Uge1xuXHRtZWRpYUZpbGVJRDogbnVtYmVyO1xuXHRsaW5lczogRGlhbG9ndWVMaW5lW107XG5cdG1lZGlhU2l6ZVBlcmNlbnRhZ2U6IG51bWJlcjtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5tZWRpYUZpbGVJRCA9IC0xO1xuXHRcdHRoaXMubGluZXMgPSBbXTtcblx0XHR0aGlzLm1lZGlhU2l6ZVBlcmNlbnRhZ2UgPSA1MDtcblx0fVxufVxuXG5jbGFzcyBEaWFsb2d1ZUxpbmUge1xuXHRzcGVha2VySW5kZXg6IG51bWJlcjtcblx0Y29udGVudDogc3RyaW5nO1xuXHRjb25zdHJ1Y3RvcihzcGVha2VySW5kZXg6IG51bWJlcikge1xuXHRcdHRoaXMuc3BlYWtlckluZGV4ID0gc3BlYWtlckluZGV4O1xuXHRcdHRoaXMuY29udGVudCA9ICcnO1xuXHR9XG59XG5cbmNsYXNzIENoYXJhY3RlciB7XG5cdG5hbWU6IHN0cmluZztcblx0Y29sb3I6IHN0cmluZztcblx0YmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG5cdGNvbnN0cnVjdG9yKG5hbWUgPSAnJywgY29sb3IgPSAnd2hpdGUnLCBiYWNrZ3JvdW5kQ29sb3IgPSAnYmxhY2snKSB7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLmNvbG9yID0gY29sb3I7XG5cdFx0dGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBDRkVGaWxlIH0gZnJvbSBcIi4vY2ZlLWZpbGVcIjtcclxuaW1wb3J0IHsgRm9sZGVyIH0gZnJvbSBcIi4vZm9sZGVyXCI7XHJcbmltcG9ydCB7IFBsYXlsaXN0IH0gZnJvbSBcIi4vcGxheWxpc3RcIjtcclxuaW1wb3J0IHsgU2luZ2xlTWVkaWFGaWxlIH0gZnJvbSBcIi4vc2luZ2xlLW1lZGlhLWZpbGVcIjtcclxuaW1wb3J0IHsgU291cmNlQW5kVmF1bHQgfSBmcm9tIFwiLi9zbnZcIjtcclxuaW1wb3J0IHsgVmFyaWFudE1lZGlhRmlsZSB9IGZyb20gXCIuL3ZhcmlhbnQtbWVkaWEtZmlsZVwiO1xyXG5pbXBvcnQgeyBTb3VyY2VGb2xkZXJTaG9ydGN1dCB9IGZyb20gXCIuL3NvdXJjZS1mb2xkZXItc2hvcnRjdXRcIjtcclxuaW1wb3J0IHsgQ29ubGFuZ0RpY3Rpb25hcnkgfSBmcm9tIFwiLi9jb25sYW5nLWRpY3Rpb25hcnlcIjtcclxuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9zdG9yeVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENGRUZpbGVIYW5kbGVyIHtcclxuXHJcblx0LyoqXHJcblx0ICogQWxsIG9mIHRoZSBrbm93biBmaWxlIGZvcm1hdHNcclxuXHQgKi9cclxuXHRzdGF0aWMgS25vd25GaWxlVHlwZXM6IHN0cmluZ1tdID0gW1xyXG5cdFx0J0ZvbGRlcicsXHJcblx0XHQnU2luZ2xlIE1lZGlhIEZpbGUnLFxyXG5cdFx0J1ZhcmlhbnQgTWVkaWEgRmlsZScsXHJcblx0XHQnUGxheWxpc3QnLFxyXG5cdFx0J1N0b3J5JyxcclxuXHRcdCdTb3VyY2UgRm9sZGVyIFNob3J0Y3V0JyxcclxuXHRcdCdDb25sYW5nIERpY3Rpb25hcnknXHJcblx0XVxyXG5cclxuXHRzdGF0aWMgYXN5bmMgQ3JlYXRlTmV3KHNudjogU291cmNlQW5kVmF1bHQsIGZpbGVUeXBlOiBzdHJpbmcsIHBhcmVudEZvbGRlcklEOiBudW1iZXIsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8Q0ZFRmlsZT4ge1xyXG5cdFx0bGV0IG5ld0ZpbGU6IENGRUZpbGU7XHJcblx0XHRzd2l0Y2goZmlsZVR5cGUpIHtcclxuXHRcdFx0Y2FzZSAnRm9sZGVyJzpcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRuZXdGaWxlID0gYXdhaXQgRm9sZGVyLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnYsIGZpbGVUeXBlLCBwYXJlbnRGb2xkZXJJRCwgbmFtZSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ1NpbmdsZSBNZWRpYSBGaWxlJzpcclxuXHRcdFx0XHRuZXdGaWxlID0gYXdhaXQgU2luZ2xlTWVkaWFGaWxlLkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnYsIGZpbGVUeXBlLCBwYXJlbnRGb2xkZXJJRCwgbmFtZSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ1ZhcmlhbnQgTWVkaWEgRmlsZSc6XHJcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IFZhcmlhbnRNZWRpYUZpbGUuQ3JlYXRlTmV3RmlsZUZvckxheWVyKHNudiwgZmlsZVR5cGUsIHBhcmVudEZvbGRlcklELCBuYW1lKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnUGxheWxpc3QnOlxyXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCBQbGF5bGlzdC5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252LCBmaWxlVHlwZSwgcGFyZW50Rm9sZGVySUQsIG5hbWUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdTdG9yeSc6XHJcblx0XHRcdFx0bmV3RmlsZSA9IGF3YWl0IFN0b3J5LkNyZWF0ZU5ld0ZpbGVGb3JMYXllcihzbnYsIGZpbGVUeXBlLCBwYXJlbnRGb2xkZXJJRCwgbmFtZSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ1NvdXJjZSBGb2xkZXIgU2hvcnRjdXQnOlxyXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCBTb3VyY2VGb2xkZXJTaG9ydGN1dC5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252LCBmaWxlVHlwZSwgcGFyZW50Rm9sZGVySUQsIG5hbWUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdDb25sYW5nIERpY3Rpb25hcnknOlxyXG5cdFx0XHRcdG5ld0ZpbGUgPSBhd2FpdCBDb25sYW5nRGljdGlvbmFyeS5DcmVhdGVOZXdGaWxlRm9yTGF5ZXIoc252LCBmaWxlVHlwZSwgcGFyZW50Rm9sZGVySUQsIG5hbWUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0YXdhaXQgbmV3RmlsZS5TYXZlKHNudik7XHJcblx0XHRyZXR1cm4gbmV3RmlsZTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBhc3luYyBMb2FkRmlsZShzbnY6IFNvdXJjZUFuZFZhdWx0LCBmaWxlSUQ6IG51bWJlcik6IFByb21pc2U8Q0ZFRmlsZT4ge1xyXG5cdFx0Y29uc3Qgc291cmNlRm9sZGVyID0gc252LnNvdXJjZUZvbGRlcjtcclxuXHRcdGNvbnN0IHZhdWx0ID0gc252LnZhdWx0O1xyXG5cclxuXHRcdGNvbnN0IHRGaWxlID0gdmF1bHQuZ2V0RmlsZUJ5UGF0aChzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy8nICsgZmlsZUlEICsgJy5qc29uJyk7XHJcblx0XHRpZiAodEZpbGUgPT09IG51bGwpIHtcclxuXHRcdFx0dGhyb3cgRXJyb3IoXCJGaWxlIGNvdWxkIG5vdCBiZSBmb3VuZCBhdCB0aGUgcGF0aDogXCIgKyBzb3VyY2VGb2xkZXIudmF1bHRQYXRoICsgJy8nICsgZmlsZUlEICsgJy5qc29uJyk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBqc29uRGF0YSA9IGF3YWl0IHZhdWx0LmNhY2hlZFJlYWQodEZpbGUpO1xyXG5cdFx0Y29uc3QgcGxhaW5PYmplY3QgPSBKU09OLnBhcnNlKGpzb25EYXRhKTtcclxuXHRcdHN3aXRjaChwbGFpbk9iamVjdC5maWxlVHlwZSkge1xyXG5cdFx0XHRjYXNlICdGb2xkZXInOlxyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiBhd2FpdCBPYmplY3QuYXNzaWduKG5ldyBGb2xkZXIoKSwgcGxhaW5PYmplY3QpO1xyXG5cdFx0XHRjYXNlICdTaW5nbGUgTWVkaWEgRmlsZSc6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IE9iamVjdC5hc3NpZ24obmV3IFNpbmdsZU1lZGlhRmlsZSgpLCBwbGFpbk9iamVjdCk7XHJcblx0XHRcdGNhc2UgJ1ZhcmlhbnQgTWVkaWEgRmlsZSc6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IE9iamVjdC5hc3NpZ24obmV3IFZhcmlhbnRNZWRpYUZpbGUoKSwgcGxhaW5PYmplY3QpO1xyXG5cdFx0XHRjYXNlICdQbGF5bGlzdCc6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IE9iamVjdC5hc3NpZ24obmV3IFBsYXlsaXN0KCksIHBsYWluT2JqZWN0KTtcclxuXHRcdFx0Y2FzZSAnU3RvcnknOlxyXG5cdFx0XHRcdHJldHVybiBhd2FpdCBPYmplY3QuYXNzaWduKG5ldyBTdG9yeSgpLCBwbGFpbk9iamVjdCk7XHJcblx0XHRcdGNhc2UgJ1NvdXJjZSBGb2xkZXIgU2hvcnRjdXQnOlxyXG5cdFx0XHRcdHJldHVybiBhd2FpdCBPYmplY3QuYXNzaWduKG5ldyBTb3VyY2VGb2xkZXJTaG9ydGN1dCgpLCBwbGFpbk9iamVjdCk7XHJcblx0XHRcdGNhc2UgJ0NvbmxhbmcgRGljdGlvbmFyeSc6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IE9iamVjdC5hc3NpZ24obmV3IENvbmxhbmdEaWN0aW9uYXJ5KCksIHBsYWluT2JqZWN0KTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IFZhdWx0IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTb3VyY2VGb2xkZXIgfSBmcm9tIFwiLi9zb3VyY2UtZm9sZGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTb3VyY2VBbmRWYXVsdCB7XG5cdHNvdXJjZUZvbGRlcjogU291cmNlRm9sZGVyO1xuXHR2YXVsdDogVmF1bHQ7XG5cdGNvbnN0cnVjdG9yKHNvdXJjZUZvbGRlcjogU291cmNlRm9sZGVyLCB2YXVsdDogVmF1bHQpIHtcblx0XHR0aGlzLnNvdXJjZUZvbGRlciA9IHNvdXJjZUZvbGRlcjtcblx0XHR0aGlzLnZhdWx0ID0gdmF1bHQ7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ0FBLElBQUFBLG1CQUF3Qzs7O0FDQXhDLElBQUFDLG1CQUE2Qzs7O0FDQTdDLHNCQUE4QjtBQWN2QixJQUFNLFdBQU4sTUFBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQW1DcEIsYUFBYSxzQkFBc0IsS0FBcUIsVUFBa0IsZ0JBQXdCLE1BQWdDO0FBQ2pJLFVBQU0sZUFBZSxJQUFJO0FBR3pCLFVBQU0saUJBQWlCLElBQUksU0FBUTtBQUNuQyxtQkFBZSxLQUFLLGFBQWE7QUFDakMsbUJBQWUsV0FBVztBQUMxQixtQkFBZSxXQUFXO0FBQzFCLG1CQUFlLGlCQUFpQjtBQUdoQyxpQkFBYTtBQUNiLFVBQU0sYUFBYSxLQUFLLEdBQUc7QUFHM0IsUUFBSSxlQUFlLE9BQU8sZUFBZSxnQkFBZ0I7QUFDeEQsWUFBTSxlQUF5QixNQUFNLGVBQWUsU0FBUyxLQUFLLGVBQWUsY0FBYztBQUMvRixtQkFBYSxpQkFBaUIsS0FBSyxlQUFlLEVBQUU7QUFDcEQsWUFBTSxhQUFhLEtBQUssR0FBRztBQUFBLElBQzVCO0FBR0EsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBWUEsTUFBTSxpQkFBaUIsZ0JBQWdDLGNBQThCLFlBQTRCO0FBQ2hILGlCQUFhLFlBQVk7QUFDekIsaUJBQWEsVUFBVSxZQUFZO0FBQ2xDLFlBQU0sS0FBSyxRQUFRLGdCQUFnQixV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Q0osa0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFFQSxZQUFRLEtBQUssVUFBVTtBQUFBLE1BQ3RCLEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFFQSxjQUFVLEtBQUs7QUFFZixZQUFRLEtBQUssS0FBSztBQUFBLE1BQ2pCLEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFFQSxZQUFRLEtBQUssWUFBWTtBQUFBLE1BQ3hCLEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFFQSxZQUFRLEtBQUssT0FBTztBQUFBLE1BQ25CLEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFFQSxZQUFRLEtBQUssU0FBUztBQUFBLE1BQ3JCLEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxJQUNGO0FBRUEsWUFBUSxLQUFLLEdBQUc7QUFBQSxNQUNmLEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVU7QUFDVjtBQUFBLElBQ0Y7QUFFQSxZQUFRLEtBQUssR0FBRztBQUFBLE1BQ2YsS0FBSztBQUNKLGtCQUFVO0FBQ1Y7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVTtBQUNWO0FBQUEsSUFDRjtBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxJQUFJLFFBQVE7QUFFWCxRQUFJLGFBQWEsSUFBSSxLQUFLLGNBQWMsS0FBSyxRQUFRO0FBQ3JELFFBQUksT0FBTyxLQUFLLGFBQWEsS0FBSyxTQUFTLFlBQVksSUFBSSxZQUFZLElBQUksSUFBSSxZQUFZO0FBRzNGLFFBQUksY0FBYyxLQUFLLGNBQWMsR0FBRztBQUN2QyxhQUFPO0FBQUEsSUFDUjtBQUVBLGlCQUFhO0FBQ2IsWUFBUTtBQUVSLFdBQU8sVUFBVSxLQUFLLE1BQU0sTUFBTSxPQUFPLE9BQU8sWUFBWSxPQUFPLEtBQUssVUFBVTtBQUFBLEVBQ25GO0FBQUEsRUFFQSxjQUFjLEtBQXFCLFVBQWtCO0FBQ3BELFVBQU0sV0FBVyxJQUFJLFVBQVU7QUFDL0IsYUFBUyxNQUFNLFdBQVc7QUFDMUIsYUFBUyxNQUFNLFFBQVMsV0FBVyxPQUFRO0FBQzNDLGFBQVMsTUFBTSxTQUFVLFdBQVcsT0FBUTtBQUM1QyxhQUFTLFlBQVk7QUFDckIsVUFBTSxXQUFXLFNBQVMsVUFBVTtBQUNwQyxhQUFTLE1BQU0sV0FBVztBQUMxQixhQUFTLGNBQWMsS0FBSztBQUM1QixhQUFTLE1BQU0sT0FBUSxLQUFLLElBQUksV0FBWTtBQUM1QyxhQUFTLE1BQU0sU0FBVSxLQUFLLElBQUksV0FBWTtBQUM5QyxhQUFTLE1BQU0sUUFBUSxLQUFLO0FBQUEsRUFDN0I7QUFDRDs7O0FDOWlCTyxJQUFNLG9CQUFOLGNBQWdDLFFBQVE7QUFBQSxFQU85QyxhQUFzQixzQkFBc0IsS0FBcUIsVUFBa0IsZ0JBQXdCLE1BQTBDO0FBQ3BKLFVBQU0sdUJBQTJDLE1BQU0sTUFBTSxzQkFBc0IsS0FBSyxVQUFVLGdCQUFnQixJQUFJO0FBQ3RILHlCQUFxQixXQUFXO0FBQ2hDLHlCQUFxQixRQUFRLENBQUM7QUFDOUIseUJBQXFCLGFBQWE7QUFDbEMseUJBQXFCLGtCQUFrQjtBQUN2QyxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsTUFBZSxRQUFRLEtBQXFCLFNBQXdDO0FBQ25GLFVBQU0sTUFBTSxRQUFRLEtBQUssT0FBTztBQUVoQyxVQUFNLG1CQUFtQixRQUFRLFNBQVMsUUFBUTtBQUNsRCxxQkFBaUIsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFTLE9BQU8sUUFBUSxDQUFFO0FBQ3RFLHFCQUFpQixTQUFTLFVBQVUsRUFBRSxNQUFNLGFBQWEsT0FBTyxZQUFZLENBQUU7QUFDOUUscUJBQWlCLFFBQVEsS0FBSztBQUU5QixVQUFNLGFBQWEsUUFBUSxVQUFVLE1BQU07QUFDM0MsVUFBTSxLQUFLLG9CQUFvQixLQUFLLFNBQVMsVUFBVTtBQUV2RCxxQkFBaUIsV0FBVyxZQUFZO0FBQ3ZDLFdBQUssV0FBVyxpQkFBaUI7QUFDakMsWUFBTSxLQUFLLEtBQUssR0FBRztBQUNuQixZQUFNLEtBQUssUUFBUSxLQUFLLE9BQU87QUFBQSxJQUNoQztBQUVBLFVBQU0sS0FBSyxZQUFZLEtBQUssT0FBTztBQUFBLEVBQ3BDO0FBQUEsRUFFQSxNQUFjLFlBQVksS0FBcUIsU0FBeUIsS0FBcUIsT0FBZTtBQUMzRyxRQUFJLE1BQU07QUFFVixVQUFNLGFBQWEsSUFBSSxTQUFTLFVBQVUsRUFBRSxNQUFNLE9BQU8sQ0FBRTtBQUMzRCxlQUFXLE1BQU0sTUFBTTtBQUN2QixlQUFXLE1BQU0sUUFBUTtBQUN6QixlQUFXLFVBQVUsWUFBWTtBQUNoQyxZQUFNLEtBQUssU0FBUyxLQUFLLFNBQVMsS0FBSyxLQUFLO0FBQUEsSUFDN0M7QUFFQSxVQUFNLFVBQVUsSUFBSSxVQUFVLE1BQU07QUFDcEMsWUFBUSxNQUFNLE1BQU07QUFDcEIsWUFBUSxNQUFNLFdBQVc7QUFDekIsVUFBTSxjQUFjLEtBQUssTUFBTSxLQUFLLEVBQUUsQ0FBQztBQUN2QyxVQUFNLGFBQWEsS0FBSyxNQUFNLEtBQUssRUFBRSxDQUFDO0FBQ3RDLFVBQU0saUJBQWlCLEtBQUssbUJBQW1CLFNBQVMsV0FBVztBQUNuRSxtQkFBZSxVQUFVLElBQUksbUJBQW1CO0FBQ2hELFlBQVEsU0FBUyxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUU7QUFDcEMsWUFBUSxTQUFTLEtBQUssRUFBRSxNQUFNLFdBQVcsQ0FBRTtBQUUzQyxtQkFBZSxVQUFVLFlBQVk7QUFDcEMsVUFBSTtBQUNILGNBQU0sVUFBVSxVQUFVLFVBQVUsV0FBVztBQUFBLE1BQ2hELFNBQVMsS0FBUDtBQUNELGdCQUFRLE1BQU0seUJBQXlCLEdBQUc7QUFBQSxNQUMzQztBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFjLFNBQVMsS0FBcUIsU0FBeUIsS0FBcUIsT0FBZTtBQUN4RyxRQUFJLE1BQU07QUFDVixVQUFNLGFBQWEsSUFBSSxVQUFVLE1BQU07QUFFdkMsVUFBTSxhQUFhLFdBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxPQUFPLENBQUU7QUFDbEUsZUFBVyxVQUFVLFlBQVk7QUFDaEMsWUFBTSxLQUFLLFlBQVksS0FBSyxTQUFTLEtBQUssS0FBSztBQUFBLElBQ2hEO0FBRUEsVUFBTSxlQUFlLFdBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFTLENBQUU7QUFDdEUsaUJBQWEsWUFBWTtBQUN6QixpQkFBYSxVQUFVLFlBQVk7QUFDbEMsV0FBSyxNQUFNLE9BQU8sT0FBTyxDQUFDO0FBQzFCLFlBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsWUFBTSxLQUFLLFFBQVEsS0FBSyxPQUFPO0FBQUEsSUFDaEM7QUFFQSxVQUFNLFVBQVUsSUFBSSxVQUFVLE1BQU07QUFDcEMsWUFBUSxNQUFNLFdBQVc7QUFDekIsWUFBUSxTQUFTLEtBQUssRUFBRSxNQUFNLGFBQWEsS0FBSyxTQUFTLENBQUU7QUFDM0QsVUFBTSxjQUFjLEtBQUssTUFBTSxLQUFLLEVBQUUsQ0FBQztBQUN2QyxVQUFNLGFBQWEsS0FBSyxNQUFNLEtBQUssRUFBRSxDQUFDO0FBQ3RDLFVBQU0sZUFBZSxLQUFLLHFCQUFxQixTQUFTLFdBQVc7QUFFbkUsWUFBUSxTQUFTLEtBQUssRUFBRSxNQUFNLGFBQWEsQ0FBRTtBQUM3QyxVQUFNLGtCQUFrQixRQUFRLFNBQVMsU0FBUyxFQUFFLE1BQU0sUUFBUSxPQUFPLFdBQVcsQ0FBRTtBQUN0RixvQkFBZ0IsTUFBTSxXQUFXO0FBRWpDLFVBQU0sV0FBVyxZQUFZO0FBQzVCLFdBQUssTUFBTSxLQUFLLElBQUksQ0FBQyxhQUFhLE9BQU8sZ0JBQWdCLEtBQUs7QUFDOUQsV0FBSyxPQUFPLEtBQUs7QUFDakIsWUFBTSxLQUFLLEtBQUssR0FBRztBQUNuQixZQUFNLEtBQUssUUFBUSxLQUFLLE9BQU87QUFBQSxJQUNoQztBQUVBLFFBQUksWUFBWSxPQUFPLFVBQVU7QUFDaEMsVUFBSSxNQUFNLFFBQVEsU0FBUztBQUMxQixjQUFNLFNBQVM7QUFBQSxNQUNoQjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFUSxvQkFBb0IsS0FBcUIsU0FBeUIsS0FBcUI7QUFDOUYsUUFBSSxTQUFTLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFFO0FBQzVDLFFBQUksU0FBUyxLQUFLLEVBQUUsTUFBTSxhQUFhLEtBQUssU0FBUyxDQUFFO0FBQ3ZELFVBQU0sZUFBZSxLQUFLLHFCQUFxQixHQUFHO0FBRWxELFFBQUksU0FBUyxLQUFLLEVBQUUsTUFBTSxhQUFhLENBQUU7QUFDekMsVUFBTSxrQkFBa0IsSUFBSSxTQUFTLFNBQVMsRUFBRSxNQUFNLFFBQVEsT0FBTyxHQUFHLENBQUU7QUFDMUUsVUFBTSxlQUFlLElBQUksU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFTLENBQUU7QUFFL0QsVUFBTSxXQUFXLFlBQVk7QUFDNUIsV0FBSyxNQUFNLEtBQUssQ0FBQyxhQUFhLE9BQU8sZ0JBQWdCLEtBQUssQ0FBQztBQUMzRCxXQUFLLE9BQU8sS0FBSyxNQUFNLFNBQVMsQ0FBQztBQUNqQyxZQUFNLEtBQUssS0FBSyxHQUFHO0FBQ25CLFlBQU0sS0FBSyxRQUFRLEtBQUssT0FBTztBQUFBLElBQ2hDO0FBRUEsaUJBQWEsVUFBVTtBQUN2QixRQUFJLFlBQVksT0FBTyxVQUFVO0FBQ2hDLFVBQUksTUFBTSxRQUFRLFNBQVM7QUFDMUIsY0FBTSxTQUFTO0FBQUEsTUFDaEI7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBRVEscUJBQXFCLEtBQXFCLGVBQWUsSUFBSTtBQUNwRSxZQUFPLEtBQUssVUFBVTtBQUFBLE1BQ3JCLEtBQUs7QUFBQSxNQUNMO0FBQ0MsZUFBTyxNQUFNLGdCQUFnQixLQUFLLGNBQWMsSUFBSSxLQUFLO0FBQUEsTUFDMUQsS0FBSztBQUNKLGVBQU8sVUFBVSxnQkFBZ0IsS0FBSyxjQUFjLEVBQUU7QUFBQSxJQUN4RDtBQUFBLEVBQ0Q7QUFBQSxFQUVRLG1CQUFtQixLQUFxQixlQUFlLElBQUk7QUFDbEUsWUFBTyxLQUFLLFVBQVU7QUFBQSxNQUNyQixLQUFLO0FBQUEsTUFDTDtBQUNDLGVBQU8sTUFBTSxRQUFRLEtBQUssY0FBYyxJQUFJLEtBQUs7QUFBQSxNQUNsRCxLQUFLO0FBQ0osZUFBTyxVQUFVLFFBQVEsS0FBSyxjQUFjLElBQUksTUFBTSxNQUFNLElBQUk7QUFBQSxJQUNsRTtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQWMsWUFBWSxLQUFxQixLQUFxQjtBQUNuRSxRQUFJLFNBQVMsS0FBSyxFQUFFLE1BQU0sZUFBZSxLQUFLLFdBQVcsSUFBSSxDQUFFO0FBRS9ELFVBQU0sV0FBVyxJQUFJLFNBQVMsU0FBUyxFQUFFLE1BQU0sV0FBVyxDQUFFO0FBQzVELGFBQVMsVUFBVSxLQUFLO0FBRXhCLFFBQUksU0FBUyxLQUFLLEVBQUUsTUFBTSxjQUFjLENBQUU7QUFFMUMsVUFBTSxnQkFBZ0IsS0FBSyxxQkFBcUIsS0FBSyxLQUFLLFVBQVU7QUFDcEUsVUFBTSxnQkFBZ0IsSUFBSSxTQUFTLFNBQVMsRUFBRSxNQUFNLFFBQVEsT0FBTyxLQUFLLFdBQVcsQ0FBRTtBQUVyRixRQUFJLGNBQWMsU0FBUyxVQUFVLGdCQUFnQjtBQUNyRCxRQUFJLGlCQUFpQixTQUFTLFVBQVUsZ0JBQWdCO0FBRXhELGdCQUFZLE1BQU0sUUFBUTtBQUMxQixtQkFBZSxNQUFNLFFBQVE7QUFFN0IsU0FBSyxhQUFhLFlBQVk7QUFFOUIsZ0JBQVksTUFBTSxVQUFVO0FBQzVCLG1CQUFlLFFBQVEsS0FBSztBQUM1QixtQkFBZSxNQUFNLFVBQVU7QUFFL0IsVUFBTSxhQUFhLElBQUksVUFBVSxxQkFBcUI7QUFFdEQsVUFBTSxpQkFBaUIsTUFBTTtBQUM1QixXQUFLLGFBQWEsZUFBZTtBQUNqQyxXQUFLLGtCQUFrQixTQUFTO0FBQ2hDLGlCQUFXLE1BQU07QUFDakIsZUFBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLE1BQU0sUUFBUSxLQUFLO0FBQzNDLFlBQUksS0FBSyxNQUFNLENBQUMsRUFBRSxTQUFTLFVBQVUsSUFBSSxDQUFDLEVBQUUsU0FBUyxlQUFlLEtBQUssR0FBRztBQUMzRSxnQkFBTSxVQUFVLFdBQVcsVUFBVSxxQkFBcUI7QUFDMUQsZUFBSyxZQUFZLEtBQUssS0FBSyxTQUFTLENBQUM7QUFBQSxRQUN0QztBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsbUJBQWU7QUFFZixrQkFBYyxVQUFVO0FBQ3hCLGtCQUFjLFVBQVU7QUFFeEIsYUFBUyxXQUFXLE1BQU07QUFDekIsaUJBQVcsTUFBTTtBQUVqQixvQkFBYyxTQUFTLFVBQVUsZ0JBQWdCO0FBQ2pELHVCQUFpQixTQUFTLFVBQVUsZ0JBQWdCO0FBQ3BELFdBQUssYUFBYSxZQUFZO0FBRTlCLGtCQUFZLE1BQU0sVUFBVTtBQUM1QixxQkFBZSxRQUFRLEtBQUs7QUFDNUIscUJBQWUsTUFBTSxVQUFVO0FBRS9CLHFCQUFlO0FBQUEsSUFDaEI7QUFBQSxFQUNEO0FBQUEsRUFFUSxPQUFPLG9CQUE0QjtBQUMxQyxVQUFNLGNBQWMsS0FBSyxNQUFNLE9BQU8sb0JBQW9CLENBQUMsRUFBRSxDQUFDO0FBQzlELFFBQUksSUFBSTtBQUNSLFFBQUksT0FBTztBQUNYLFFBQUksUUFBUSxLQUFLLE1BQU0sU0FBUztBQUVoQyxXQUFPLFFBQVEsT0FBTztBQUNyQixZQUFNLE1BQU0sS0FBSyxPQUFPLE9BQU8sU0FBUyxDQUFDO0FBQ3pDLFVBQUksS0FBSyxNQUFNLEdBQUcsRUFBRSxDQUFDLElBQUksWUFBWSxDQUFDLEdBQUc7QUFDeEMsZUFBTyxNQUFNO0FBQ2IsWUFBSTtBQUFBLE1BQ0wsT0FBTztBQUNOLGdCQUFRLE1BQU07QUFDZCxZQUFJO0FBQUEsTUFDTDtBQUFBLElBQ0Q7QUFFQSxTQUFLLE1BQU0sT0FBTyxHQUFHLEdBQUcsV0FBVztBQUFBLEVBQ3BDO0FBRUQ7OztBQ2xPTyxJQUFNLFNBQU4sY0FBb0IsUUFBUTtBQUFBLEVBYzFCLGFBQWEsSUFBa0M7QUFDdEQsT0FBRyxNQUFNLGNBQWM7QUFDdkIsT0FBRyxNQUFNLGtCQUFrQjtBQUFBLEVBQzVCO0FBQUEsRUFFUSxnQkFBZ0IsS0FBcUIsZUFBZSxJQUFJO0FBQy9ELFFBQUk7QUFDSixZQUFPLEtBQUssVUFBVTtBQUFBLE1BQ3JCLEtBQUs7QUFDSixlQUFPLE1BQU0sZ0JBQWdCLEtBQUssY0FBYyxLQUFLLFVBQVUsS0FBSyxVQUFVO0FBQUEsTUFDL0UsS0FBSztBQUNKLGVBQU8sVUFBVSxnQkFBZ0IsS0FBSyxjQUFjLEtBQUssUUFBUTtBQUFBLE1BQ2xFO0FBQ0MsZ0JBQVEsSUFBSSxTQUFTLFNBQVMsRUFBRSxNQUFNLFFBQVEsT0FBTyxhQUFhLENBQUU7QUFDcEUsY0FBTSxNQUFNLFdBQVcsS0FBSyxXQUFXO0FBQ3ZDLGVBQU87QUFBQSxJQUNUO0FBQUEsRUFDRDtBQUFBLEVBRVEsZ0JBQWdCLEtBQXFCLE1BQW9CO0FBQ2hFLFVBQU0sUUFBUSxLQUFLLGVBQWUsS0FBSyxLQUFLLE9BQU87QUFDbkQsVUFBTSxVQUFVLEtBQUssV0FBVyxLQUFLLFlBQVk7QUFDakQsUUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxZQUFNLE1BQU0sa0JBQWtCLFFBQVE7QUFDdEMsWUFBTSxNQUFNLFFBQVEsUUFBUTtBQUFBLElBQzdCO0FBQ0EsUUFBSSxLQUFLLFlBQVk7QUFDcEIsV0FBSyxhQUFhLEtBQUs7QUFBQSxJQUN4QjtBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFUSxlQUFlLEtBQXFCLGVBQWUsSUFBSTtBQUM5RCxRQUFJO0FBQ0osWUFBTyxLQUFLLFVBQVU7QUFBQSxNQUNyQixLQUFLO0FBQ0osZUFBTyxNQUFNLGVBQWUsS0FBSyxjQUFjLEtBQUssVUFBVSxLQUFLLFVBQVU7QUFBQSxNQUM5RSxLQUFLO0FBQ0osZUFBTyxVQUFVLGdCQUFnQixLQUFLLGNBQWMsS0FBSyxRQUFRO0FBQUEsTUFDbEU7QUFDQyxnQkFBUSxJQUFJLFNBQVMsWUFBWSxFQUFFLE1BQU0sYUFBYSxDQUFFO0FBQ3hELGNBQU0sTUFBTSxXQUFXLEtBQUssV0FBVztBQUN2QyxlQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Q7QUFBQSxFQUVRLFlBQVksS0FBcUIsV0FBVyxLQUFLLFVBQVUsZUFBZSxJQUFJO0FBQ3JGLFlBQU8sS0FBSyxVQUFVO0FBQUEsTUFDckIsS0FBSztBQUNKLGVBQU8sTUFBTSxRQUFRLEtBQUssY0FBYyxVQUFVLEtBQUssVUFBVTtBQUFBLE1BQ2xFLEtBQUs7QUFDSixlQUFPLFVBQVUsUUFBUSxLQUFLLGNBQWMsVUFBVSxNQUFNLE1BQU0sSUFBSTtBQUFBLE1BQ3ZFLFNBQVM7QUFDUixjQUFNLE9BQU8sSUFBSSxTQUFTLEtBQUssRUFBRSxNQUFNLGFBQWEsQ0FBRTtBQUN0RCxhQUFLLE1BQU0sV0FBVyxXQUFXO0FBQ2pDLGVBQU87QUFBQSxNQUNSO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFBQSxFQUVBLGFBQXNCLHNCQUFzQixLQUFxQixVQUFrQixnQkFBd0IsTUFBOEI7QUFDeEksVUFBTSxlQUF3QixNQUFNLE1BQU0sc0JBQXNCLEtBQUssVUFBVSxnQkFBZ0IsSUFBSTtBQUNuRyxpQkFBYSxtQkFBbUI7QUFDaEMsaUJBQWEsUUFBUSxDQUFDO0FBQ3RCLGlCQUFhLGFBQWEsQ0FBQztBQUMzQixpQkFBYSxXQUFXO0FBQ3hCLGlCQUFhLGFBQWE7QUFDMUIsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLE1BQWUsUUFBUSxLQUFxQixTQUF5QjtBQUNwRSxVQUFNLE1BQU0sUUFBUSxLQUFLLE9BQU87QUFDaEMsU0FBSyxZQUFZLEtBQUssUUFBUSxVQUFVLE1BQU0sQ0FBQztBQUFBLEVBQ2hEO0FBQUEsRUFFUSxZQUFZLEtBQXFCLFNBQXlCO0FBQ2pFLFlBQVEsTUFBTTtBQUNkLFlBQVEsU0FBUyxLQUFLLEVBQUUsTUFBTSxxQkFBcUIsQ0FBRTtBQUNyRCxVQUFNLGdCQUFnQixRQUFRLFVBQVUsTUFBTTtBQUM5QyxVQUFNLGtCQUFrQixjQUFjLFNBQVMsU0FBUyxFQUFFLE1BQU0sUUFBUSxPQUFPLE1BQU0sS0FBSyxtQkFBbUIsR0FBRyxDQUFFO0FBQ2xILGtCQUFjLFNBQVMsS0FBSyxFQUFFLE1BQU0sTUFBVyxLQUFLLE1BQU0sT0FBTyxDQUFFO0FBQ25FLFVBQU0sV0FBVyxjQUFjLFNBQVMsVUFBVSxFQUFFLE1BQU0sS0FBSyxDQUFFO0FBQ2pFLGFBQVMsVUFBVSxNQUFNO0FBQ3hCLFdBQUssbUJBQW1CLFNBQVMsZ0JBQWdCLEtBQUssSUFBSTtBQUMxRCxXQUFLLG9CQUFvQixLQUFLLE9BQU87QUFBQSxJQUN0QztBQUVBLFlBQVEsU0FBUyxLQUFLLEVBQUUsTUFBTSxxQkFBcUIsQ0FBRTtBQUNyRCxVQUFNLGdCQUFnQixRQUFRLFNBQVMsU0FBUyxFQUFFLE1BQU0sT0FBTyxDQUFFO0FBQ2pFLGtCQUFjLFFBQVEsS0FBSyxXQUFXLEtBQUssS0FBSyxXQUFXO0FBQzNELGtCQUFjLFdBQVcsWUFBWTtBQUNwQyxXQUFLLFdBQVcsV0FBVyxjQUFjLEtBQUs7QUFDOUMsWUFBTSxLQUFLLEtBQUssR0FBRztBQUNuQixXQUFLLFlBQVksS0FBSyxPQUFPO0FBQUEsSUFDOUI7QUFFQSxZQUFRLFNBQVMsS0FBSyxFQUFFLE1BQU0sWUFBWSxDQUFFO0FBQzVDLFVBQU0sZ0JBQWdCLFFBQVEsU0FBUyxRQUFRO0FBQy9DLGFBQVMsSUFBSSxHQUFHLElBQUksT0FBTSxlQUFlLFFBQVEsS0FBSztBQUNyRCxvQkFBYyxTQUFTLFVBQVUsRUFBRSxNQUFNLE9BQU0sZUFBZSxDQUFDLEdBQUcsT0FBTyxPQUFNLGVBQWUsQ0FBQyxFQUFFLENBQUU7QUFBQSxJQUNwRztBQUNBLGtCQUFjLFFBQVEsS0FBSztBQUMzQixrQkFBYyxXQUFXLFlBQVk7QUFDcEMsV0FBSyxXQUFXLGNBQWM7QUFDOUIsWUFBTSxLQUFLLEtBQUssR0FBRztBQUNuQixXQUFLLFlBQVksS0FBSyxPQUFPO0FBQUEsSUFDOUI7QUFFQSxZQUFRLFNBQVMsS0FBSyxFQUFFLE1BQU0sZ0JBQWdCLENBQUU7QUFDaEQsVUFBTSxnQkFBZ0IsUUFBUSxTQUFTLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBRTtBQUNyRSxrQkFBYyxVQUFVLEtBQUs7QUFDN0Isa0JBQWMsVUFBVSxZQUFZO0FBQ25DLFdBQUssYUFBYSxjQUFjO0FBQ2hDLFlBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsV0FBSyxZQUFZLEtBQUssT0FBTztBQUFBLElBQzlCO0FBRUEsU0FBSyxzQkFBc0IsS0FBSyxPQUFPO0FBQUEsRUFDeEM7QUFBQSxFQUVRLHNCQUFzQixLQUFxQixLQUFxQjtBQUN2RSxVQUFNLGdCQUFnQixJQUFJLFVBQVU7QUFDcEMsa0JBQWMsWUFBWSxLQUFLLGFBQWEsU0FBUztBQUNyRCxhQUFTLElBQUksR0FBRyxJQUFJLEtBQUssV0FBVyxRQUFRLEtBQUs7QUFDaEQsWUFBTSxlQUFlO0FBQ3JCLFlBQU0sVUFBVSxjQUFjLFVBQVU7QUFDeEMsY0FBUSxZQUFZLEtBQUssYUFBYSxTQUFTO0FBRS9DLGNBQVEsU0FBUyxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUU7QUFDekMsWUFBTSxZQUFZLEtBQUssZ0JBQWdCLFNBQVMsS0FBSyxXQUFXLFlBQVksRUFBRSxJQUFJO0FBQ2xGLFVBQUksS0FBSyxhQUFhLGFBQWE7QUFDbEMsa0JBQVUsTUFBTSxrQkFBa0IsS0FBSyxXQUFXLFlBQVksRUFBRTtBQUNoRSxrQkFBVSxNQUFNLFFBQVEsS0FBSyxXQUFXLFlBQVksRUFBRTtBQUFBLE1BQ3ZEO0FBQ0EsZ0JBQVUsV0FBVyxZQUFZO0FBQ2hDLGFBQUssV0FBVyxZQUFZLEVBQUUsT0FBTyxVQUFVO0FBQy9DLGNBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsYUFBSyxZQUFZLEtBQUssR0FBRztBQUFBLE1BQzFCO0FBQ0EsVUFBSSxLQUFLLFlBQVk7QUFDcEIsa0JBQVUsTUFBTSxTQUFTO0FBQUEsTUFDMUIsT0FBTztBQUNOLGtCQUFVLE1BQU0sUUFBUTtBQUFBLE1BQ3pCO0FBQ0EsVUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxhQUFLLDhCQUE4QixLQUFLLEtBQUssZUFBZSxZQUFZO0FBQUEsTUFDekU7QUFBQSxJQUNEO0FBQ0EsVUFBTSxnQkFBZ0IsY0FBYyxTQUFTLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFFO0FBQ2pGLGtCQUFjLFVBQVUsWUFBWTtBQUNuQyxXQUFLLFdBQVcsS0FBSyxJQUFJLFVBQVUsQ0FBQztBQUNwQyxZQUFNLEtBQUssS0FBSyxHQUFHO0FBQ25CLG9CQUFjLE9BQU87QUFDckIsV0FBSyxzQkFBc0IsS0FBSyxHQUFHO0FBQUEsSUFDcEM7QUFBQSxFQUNEO0FBQUEsRUFFUSw4QkFBOEIsS0FBcUIsS0FBcUIsZUFBK0IsY0FBc0I7QUFDcEksVUFBTSxXQUFXLGNBQWMsVUFBVTtBQUN6QyxhQUFTLFlBQVksS0FBSyxhQUFhLFNBQVM7QUFFaEQsYUFBUyxTQUFTLEtBQUssRUFBRSxNQUFNLGNBQWMsQ0FBRTtBQUMvQyxVQUFNLGFBQWEsU0FBUyxTQUFTLFNBQVMsRUFBRSxNQUFNLFNBQVMsT0FBTyxLQUFLLFdBQVcsWUFBWSxFQUFFLE1BQU0sQ0FBRTtBQUM1RyxVQUFNLGFBQWEsU0FBUyxTQUFTLFVBQVUsRUFBRSxNQUFNLE9BQU8sQ0FBRTtBQUNoRSxlQUFXLFdBQVcsWUFBWTtBQUNqQyxXQUFLLFdBQVcsWUFBWSxFQUFFLFFBQVEsV0FBVztBQUNqRCxZQUFNLEtBQUssS0FBSyxHQUFHO0FBQ25CLG9CQUFjLE9BQU87QUFDckIsV0FBSyxzQkFBc0IsS0FBSyxHQUFHO0FBQUEsSUFDcEM7QUFDQSxhQUFTLFNBQVMsS0FBSyxFQUFFLE1BQU0sb0JBQW9CLENBQUU7QUFDckQsVUFBTSxrQkFBa0IsU0FBUyxTQUFTLFNBQVMsRUFBRSxNQUFNLFNBQVMsT0FBTyxLQUFLLFdBQVcsWUFBWSxFQUFFLGdCQUFnQixDQUFFO0FBQzNILG9CQUFnQixXQUFXLFlBQVk7QUFDdEMsV0FBSyxXQUFXLFlBQVksRUFBRSxrQkFBa0IsZ0JBQWdCO0FBQ2hFLFlBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsb0JBQWMsT0FBTztBQUNyQixXQUFLLHNCQUFzQixLQUFLLEdBQUc7QUFBQSxJQUNwQztBQUNBLGVBQVcsVUFBVSxZQUFZO0FBQ2pDLFdBQUssV0FBVyxZQUFZLEVBQUUsa0JBQWtCLFdBQVc7QUFDM0QsVUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxhQUFLLFdBQVcsWUFBWSxFQUFFLFFBQVEsZ0JBQWdCO0FBQUEsTUFDdkQ7QUFDQSxZQUFNLEtBQUssS0FBSyxHQUFHO0FBQ25CLG9CQUFjLE9BQU87QUFDckIsV0FBSyxzQkFBc0IsS0FBSyxHQUFHO0FBQUEsSUFDbkM7QUFBQSxFQUNEO0FBQUEsRUFFUSxpQkFBaUIsS0FBcUIsU0FBeUI7QUFDdEUsVUFBTSxhQUFhLFFBQVEsVUFBVSxNQUFNO0FBQzNDLFVBQU0sYUFBYSxXQUFXLFNBQVMsVUFBVSxFQUFFLE1BQU0sSUFBSSxDQUFFO0FBQy9ELFVBQU0sa0JBQWtCLFdBQVcsU0FBUyxTQUFTLEVBQUUsTUFBTSxRQUFRLE9BQU8sTUFBTSxLQUFLLG1CQUFtQixHQUFHLENBQUU7QUFDL0csZUFBVyxTQUFTLEtBQUssRUFBRSxNQUFNLE1BQVcsS0FBSyxNQUFNLE9BQU8sQ0FBRTtBQUNoRSxVQUFNLGFBQWEsV0FBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLElBQUksQ0FBRTtBQUMvRCxVQUFNLGVBQWUsV0FBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBRTtBQUMzRSxpQkFBYSxZQUFZO0FBQ3pCLFVBQU0sWUFBWSxXQUFXLFNBQVMsVUFBVSxFQUFFLE1BQU0sV0FBVyxDQUFFO0FBQ3JFLFVBQU0saUJBQWlCLFdBQVcsU0FBUyxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUU7QUFDM0UsVUFBTSxpQkFBaUIsV0FBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLFlBQVksQ0FBRTtBQUMzRSxVQUFNLGFBQWEsV0FBVyxTQUFTLFVBQVUsRUFBRSxNQUFNLGtCQUFrQixDQUFFO0FBQzdFLGVBQVcsVUFBVSxZQUFZO0FBQ2hDLFlBQU0sS0FBSyxZQUFZLEtBQUssT0FBTztBQUFBLElBQ3BDO0FBQ0EsbUJBQWUsVUFBVSxZQUFZO0FBQ3BDLFlBQU0sS0FBSyxvQkFBb0IsS0FBSyxPQUFPO0FBQUEsSUFDNUM7QUFDQSxtQkFBZSxVQUFVLFlBQVk7QUFDcEMsWUFBTSxLQUFLLDJCQUEyQixLQUFLLE9BQU87QUFBQSxJQUNuRDtBQUNBLGVBQVcsVUFBVSxZQUFZO0FBQ2hDLFVBQUksS0FBSyxtQkFBbUIsR0FBRztBQUM5QixhQUFLO0FBQ0wsY0FBTSxLQUFLLG9CQUFvQixLQUFLLE9BQU87QUFBQSxNQUM1QztBQUFBLElBQ0Q7QUFDQSxlQUFXLFVBQVUsWUFBWTtBQUNoQyxVQUFJLEtBQUssbUJBQW1CLEtBQUssTUFBTSxRQUFRO0FBQzlDLGFBQUs7QUFDTCxjQUFNLEtBQUssb0JBQW9CLEtBQUssT0FBTztBQUFBLE1BQzVDO0FBQUEsSUFDRDtBQUNBLG9CQUFnQixXQUFXLFlBQVk7QUFDdEMsV0FBSyxtQkFBbUIsU0FBUyxnQkFBZ0IsS0FBSyxJQUFJO0FBQzFELFlBQU0sS0FBSyxvQkFBb0IsS0FBSyxPQUFPO0FBQUEsSUFDNUM7QUFDQSxpQkFBYSxVQUFVLFlBQVk7QUFDbEMsV0FBSyxNQUFNLE9BQU8sS0FBSyxrQkFBa0IsQ0FBQztBQUMxQyxZQUFNLEtBQUssS0FBSyxHQUFHO0FBQ25CLFVBQUksS0FBSyxxQkFBcUIsR0FBRztBQUNoQyxhQUFLO0FBQUEsTUFDTjtBQUNBLFlBQU0sS0FBSyxvQkFBb0IsS0FBSSxPQUFPO0FBQUEsSUFDM0M7QUFDQSxjQUFVLFVBQVUsWUFBWTtBQUMvQixZQUFNLGNBQWMsSUFBSSxLQUFLO0FBQzdCLFlBQU0saUJBQWlCLEtBQUssTUFBTSxLQUFLLGdCQUFnQixFQUFFO0FBQ3pELFVBQUksbUJBQW1CLE1BQU0saUJBQWlCLElBQUksYUFBYSxXQUFXO0FBQ3pFLG9CQUFZLGNBQWM7QUFBQSxNQUMzQjtBQUNBLFdBQUssTUFBTSxPQUFPLEtBQUssbUJBQW1CLEdBQUcsR0FBRyxXQUFXO0FBQzNELFlBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsV0FBSztBQUNMLFlBQU0sS0FBSyxvQkFBb0IsS0FBSSxPQUFPO0FBQUEsSUFDM0M7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFjLG9CQUFvQixLQUFxQixTQUF5QjtBQUMvRSxZQUFRLE1BQU07QUFDZCxTQUFLLGlCQUFpQixLQUFLLE9BQU87QUFFbEMsWUFBUSxTQUFTLEtBQUssRUFBRSxNQUFNLGlCQUFpQixDQUFFO0FBQ2pELFVBQU0sbUJBQW1CLFFBQVEsU0FBUyxTQUFTLEVBQUUsTUFBTSxPQUFPLENBQUU7QUFFcEUsVUFBTSxXQUFXLFFBQVEsVUFBVSxNQUFNO0FBQ3pDLFVBQU0sZ0JBQWdCLFNBQVMsVUFBVSxNQUFNO0FBQy9DLFVBQU0sV0FBVyxTQUFTLFVBQVUsTUFBTTtBQUUxQyxVQUFNLFdBQVcsY0FBYyxVQUFVO0FBQ3pDLGFBQVMsTUFBTSxXQUFXO0FBQzFCLGFBQVMsTUFBTSxNQUFNO0FBQ3JCLGFBQVMsTUFBTSxPQUFPO0FBRXRCLFVBQU0sa0JBQWtCLGNBQWMsU0FBUyxTQUFTLEVBQUUsTUFBTSxPQUFPLENBQUU7QUFDekUsb0JBQWdCLFdBQVcsWUFBWTtBQUN0QyxvQkFBYyxNQUFNLFFBQVEsZ0JBQWdCLFFBQVE7QUFDcEQsZUFBUyxNQUFNLFFBQVEsTUFBTSxTQUFTLGdCQUFnQixLQUFLLElBQUk7QUFDL0QsV0FBSyxNQUFNLEtBQUssZ0JBQWdCLEVBQUUsc0JBQXNCLFNBQVMsZ0JBQWdCLEtBQUs7QUFDdEYsWUFBTSxLQUFLLEtBQUssR0FBRztBQUFBLElBQ3BCO0FBRUEsVUFBTSxXQUFXLGNBQWMsVUFBVSxNQUFNO0FBQy9DLGtCQUFjLE1BQU0sUUFBUTtBQUM1QixhQUFTLE1BQU0sWUFBWTtBQUMzQixhQUFTLE1BQU0sUUFBUTtBQUN2QixhQUFTLE1BQU0sWUFBWTtBQUMzQixhQUFTLE1BQU0sV0FBVztBQUMxQixhQUFTLE1BQU0sTUFBTTtBQUVyQixRQUFJLEtBQUssbUJBQW1CLEtBQUssTUFBTSxRQUFRO0FBQzlDLFlBQU0sY0FBYyxLQUFLLE1BQU0sS0FBSyxnQkFBZ0I7QUFDcEQsWUFBTSxjQUFjLFlBQVk7QUFDaEMsdUJBQWlCLFFBQVEsS0FBSyxZQUFZO0FBQzFDLFVBQUksY0FBYyxHQUFHO0FBQ3BCLGNBQU0sWUFBOEIsTUFBTSxlQUFlLFNBQVMsS0FBSyxXQUFXO0FBQ2xGLGNBQU0sVUFBVSxpQkFBaUIsVUFBVSxHQUFHO0FBQUEsTUFDL0M7QUFDQSxVQUFJLEtBQUssTUFBTSxLQUFLLGdCQUFnQixFQUFFLHFCQUFxQjtBQUMxRCx3QkFBZ0IsUUFBUSxLQUFLLEtBQUssTUFBTSxLQUFLLGdCQUFnQixFQUFFO0FBQy9ELHNCQUFjLE1BQU0sUUFBUSxnQkFBZ0IsUUFBUTtBQUNwRCxpQkFBUyxNQUFNLFFBQVEsTUFBTSxTQUFTLGdCQUFnQixLQUFLLElBQUk7QUFBQSxNQUNoRSxPQUFPO0FBQ04sd0JBQWdCLFFBQVE7QUFDeEIsYUFBSyxNQUFNLEtBQUssZ0JBQWdCLEVBQUUsc0JBQXNCO0FBQ3hELGNBQU0sS0FBSyxLQUFLLEdBQUc7QUFBQSxNQUNwQjtBQUFBLElBQ0QsT0FBTztBQUNOLFlBQU0sY0FBYyxJQUFJLEtBQUs7QUFDN0IsWUFBTSxXQUFXLEtBQUssbUJBQW1CO0FBQ3pDLFVBQUksWUFBWSxLQUFLLEtBQUsscUJBQXFCLEdBQUc7QUFDakQsY0FBTSxpQkFBaUIsS0FBSyxNQUFNLFFBQVEsRUFBRTtBQUM1QyxjQUFNLGVBQWUsS0FBSyxNQUFNLFFBQVEsRUFBRTtBQUMxQyxvQkFBWSxzQkFBc0I7QUFDbEMsd0JBQWdCLFFBQVEsS0FBSztBQUM3QixzQkFBYyxNQUFNLFFBQVEsZ0JBQWdCLFFBQVE7QUFDcEQsaUJBQVMsTUFBTSxRQUFRLE1BQU0sU0FBUyxnQkFBZ0IsS0FBSyxJQUFJO0FBQy9ELFlBQUksbUJBQW1CLE1BQU0saUJBQWlCLElBQUksYUFBYSxXQUFXO0FBQ3pFLGdCQUFNLGNBQWMsaUJBQWlCO0FBQ3JDLHNCQUFZLGNBQWM7QUFDMUIsMkJBQWlCLFFBQVEsS0FBSztBQUM5QixjQUFJLGNBQWMsR0FBRztBQUNwQixrQkFBTSxZQUE4QixNQUFNLGVBQWUsU0FBUyxLQUFLLFdBQVc7QUFDbEYsa0JBQU0sVUFBVSxpQkFBaUIsVUFBVSxHQUFHO0FBQUEsVUFDL0M7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUNBLFdBQUssTUFBTSxLQUFLLFdBQVc7QUFDM0IsWUFBTSxLQUFLLEtBQUssR0FBRztBQUFBLElBQ3BCO0FBQ0EsVUFBTSxLQUFLLHNCQUFzQixLQUFLLFVBQVUsUUFBUTtBQUN4RCxxQkFBaUIsV0FBVyxZQUFZO0FBQ3ZDLFlBQU0sY0FBYyxLQUFLLE1BQU0sS0FBSyxnQkFBZ0I7QUFDcEQsa0JBQVksY0FBYyxTQUFTLGlCQUFpQixLQUFLO0FBQ3pELFlBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsWUFBTSxZQUE4QixNQUFNLGVBQWUsU0FBUyxLQUFLLFlBQVksV0FBVztBQUM5RixZQUFNLFVBQVUsaUJBQWlCLFVBQVUsR0FBRztBQUFBLElBQy9DO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBYywyQkFBMkIsS0FBcUIsU0FBeUI7QUFDdEYsWUFBUSxNQUFNO0FBRWQsU0FBSyxpQkFBaUIsS0FBSyxPQUFPO0FBRWxDLFVBQU0sV0FBVyxRQUFRLFVBQVUsTUFBTTtBQUN6QyxVQUFNLGdCQUFnQixTQUFTLFVBQVUsTUFBTTtBQUMvQyxVQUFNLFdBQVcsU0FBUyxVQUFVLE1BQU07QUFFMUMsVUFBTSxXQUFXLGNBQWMsVUFBVTtBQUN6QyxhQUFTLE1BQU0sV0FBVztBQUMxQixhQUFTLE1BQU0sTUFBTTtBQUNyQixhQUFTLE1BQU0sT0FBTztBQUV0QixVQUFNLFdBQVcsY0FBYyxVQUFVLE1BQU07QUFDL0Msa0JBQWMsTUFBTSxRQUFRO0FBQzVCLGFBQVMsTUFBTSxZQUFZO0FBQzNCLGFBQVMsTUFBTSxRQUFRO0FBQ3ZCLGFBQVMsTUFBTSxZQUFZO0FBQzNCLGFBQVMsTUFBTSxXQUFXO0FBQzFCLGFBQVMsTUFBTSxNQUFNO0FBRXJCLFVBQU0sY0FBYyxLQUFLLE1BQU0sS0FBSyxnQkFBZ0I7QUFDcEQsVUFBTSxjQUFjLFlBQVk7QUFDaEMsUUFBSSxjQUFjLEdBQUc7QUFDcEIsWUFBTSxZQUE4QixNQUFNLGVBQWUsU0FBUyxLQUFLLFdBQVc7QUFDbEYsWUFBTSxVQUFVLGlCQUFpQixVQUFVLEdBQUc7QUFBQSxJQUMvQztBQUNBLFFBQUksS0FBSyxNQUFNLEtBQUssZ0JBQWdCLEVBQUUscUJBQXFCO0FBQzFELFlBQU0sUUFBUSxLQUFLLE1BQU0sS0FBSyxnQkFBZ0IsRUFBRTtBQUNoRCxvQkFBYyxNQUFNLFFBQVEsUUFBUTtBQUNwQyxlQUFTLE1BQU0sUUFBUSxNQUFNLFFBQVE7QUFBQSxJQUN0QztBQUNBLFVBQU0sS0FBSyw2QkFBNkIsVUFBVSxRQUFRO0FBQUEsRUFDM0Q7QUFBQSxFQUVBLE1BQWMsc0JBQXNCLEtBQXFCLFVBQTBCLFVBQTBCO0FBQzVHLGFBQVMsTUFBTTtBQUVmLFVBQU0sbUJBQW1CLFNBQVMsVUFBVTtBQUM1QyxxQkFBaUIsWUFBWSxLQUFLLGFBQWEsU0FBUztBQUN4RCxRQUFJLEtBQUssWUFBWTtBQUNwQix1QkFBaUIsTUFBTSxZQUFZO0FBQUEsSUFDcEMsT0FBTztBQUNOLHVCQUFpQixNQUFNLFlBQVk7QUFBQSxJQUNwQztBQUNBLGFBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxNQUFNLEtBQUssZ0JBQWdCLEVBQUUsTUFBTSxRQUFRLEtBQUs7QUFDeEUsWUFBTSxlQUFlO0FBQ3JCLFlBQU0sY0FBYyxLQUFLLE1BQU0sS0FBSyxnQkFBZ0IsRUFBRSxNQUFNLENBQUM7QUFDN0QsWUFBTSxVQUFVLEtBQUssV0FBVyxZQUFZLFlBQVk7QUFFeEQsWUFBTSxVQUFVLGlCQUFpQixVQUFVO0FBQzNDLGNBQVEsWUFBWSxLQUFLLGFBQWEsU0FBUztBQUUvQyxZQUFNLGVBQWUsUUFBUSxTQUFTLFVBQVUsRUFBRSxNQUFNLElBQUksQ0FBRTtBQUM5RCxtQkFBYSxZQUFZO0FBQ3pCLG1CQUFhLFVBQVUsWUFBWTtBQUNsQyxhQUFLLE1BQU0sS0FBSyxnQkFBZ0IsRUFBRSxNQUFNLE9BQU8sY0FBYyxDQUFDO0FBQzlELGNBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsY0FBTSxLQUFLLHNCQUFzQixLQUFLLFVBQVUsUUFBUTtBQUFBLE1BQ3pEO0FBQ0EsVUFBSSxLQUFLLFlBQVk7QUFDcEIsYUFBSyxhQUFhLFlBQVk7QUFBQSxNQUMvQjtBQUVBLFVBQUksS0FBSyxhQUFhLGFBQWE7QUFDbEMsY0FBTSxhQUFhLFFBQVEsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFJLENBQUU7QUFDNUQsbUJBQVcsVUFBVSxNQUFNO0FBQzFCLGdCQUFNLFFBQVEsU0FBUyxVQUFVO0FBQ2pDLGdCQUFNLE1BQU0sV0FBVztBQUN2QixnQkFBTSxNQUFNLE1BQU07QUFDbEIsZ0JBQU0sTUFBTSxPQUFPO0FBQ25CLGdCQUFNLFlBQVksSUFBSSxVQUFVLFVBQVUsS0FBSztBQUMvQyxvQkFBVSxNQUFNLE9BQU8sS0FBSyxDQUFDLEtBQUssS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFLO0FBQUEsUUFDN0Q7QUFDQSxZQUFJLEtBQUssWUFBWTtBQUNwQixlQUFLLGFBQWEsVUFBVTtBQUFBLFFBQzdCO0FBQUEsTUFDRDtBQUVBLFlBQU0scUJBQXFCLFFBQVEsVUFBVTtBQUM3QyxZQUFNLGtCQUFrQixtQkFBbUIsVUFBVTtBQUNyRCxzQkFBZ0IsTUFBTSxTQUFTO0FBQy9CLHNCQUFnQixNQUFNLFFBQVE7QUFDOUIsc0JBQWdCLE1BQU0sV0FBVztBQUNqQyx5QkFBbUIsVUFBVSxNQUFNO0FBQ2xDLGNBQU0sWUFBWSxnQkFBZ0IsVUFBVTtBQUM1QyxrQkFBVSxZQUFZLEtBQUssYUFBYSxTQUFTO0FBQ2pELGtCQUFVLE1BQU0sV0FBVztBQUMzQixrQkFBVSxNQUFNLE1BQU07QUFDdEIsa0JBQVUsTUFBTSxPQUFPO0FBQ3ZCLGlCQUFTQyxLQUFJLEdBQUdBLEtBQUksS0FBSyxXQUFXLFFBQVFBLE1BQUs7QUFDaEQsZ0JBQU0sbUJBQW1CQTtBQUN6QixnQkFBTSxjQUFjLEtBQUssV0FBVyxnQkFBZ0I7QUFDcEQsZ0JBQU0sZ0JBQWdCLFVBQVUsVUFBVTtBQUMxQyxjQUFJLEtBQUssWUFBWTtBQUNwQixpQkFBSyxhQUFhLGFBQWE7QUFBQSxVQUNoQztBQUNBLGNBQUksS0FBSyxhQUFhLGFBQWE7QUFDbEMsMEJBQWMsTUFBTSxrQkFBa0IsWUFBWTtBQUNsRCwwQkFBYyxNQUFNLFFBQVEsWUFBWTtBQUFBLFVBQ3pDO0FBQ0Esd0JBQWMsTUFBTSxTQUFTO0FBQzdCLGVBQUssWUFBWSxlQUFlLElBQUksWUFBWSxJQUFJO0FBQ3BELHdCQUFjLFVBQVUsWUFBWTtBQUNuQyxpQkFBSyxNQUFNLEtBQUssZ0JBQWdCLEVBQUUsTUFBTSxZQUFZLEVBQUUsZUFBZTtBQUNyRSxrQkFBTSxLQUFLLEtBQUssR0FBRztBQUNuQixpQkFBSyxzQkFBc0IsS0FBSyxVQUFVLFFBQVE7QUFBQSxVQUNuRDtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBRUEsWUFBTSxTQUFTLEtBQUssWUFBWSxpQkFBaUIsSUFBSSxLQUFLLFdBQVcsWUFBWSxZQUFZLEVBQUUsSUFBSTtBQUNuRyxVQUFJLEtBQUssWUFBWTtBQUNwQixhQUFLLGFBQWEsTUFBTTtBQUFBLE1BQ3pCO0FBQ0EsVUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxlQUFPLE1BQU0sa0JBQWtCLFFBQVE7QUFDdkMsZUFBTyxNQUFNLFFBQVEsUUFBUTtBQUFBLE1BQzlCO0FBRUEsWUFBTSxZQUFZLEtBQUssZ0JBQWdCLFNBQVMsV0FBVztBQUMzRCxVQUFJLEtBQUssWUFBWTtBQUNwQixrQkFBVSxNQUFNLFNBQVM7QUFDekIsYUFBSyxhQUFhLFNBQVM7QUFBQSxNQUM1QixPQUFPO0FBQ04sa0JBQVUsTUFBTSxRQUFRO0FBQUEsTUFDekI7QUFFQSxnQkFBVSxXQUFXLFlBQVk7QUFDaEMsb0JBQVksVUFBVSxVQUFVO0FBQ2hDLGNBQU0sS0FBSyxLQUFLLEdBQUc7QUFBQSxNQUNwQjtBQUFBLElBQ0Q7QUFDQSxVQUFNLFlBQVksaUJBQWlCLFNBQVMsVUFBVSxFQUFFLE1BQU0sSUFBSSxDQUFFO0FBQ3BFLGNBQVUsVUFBVSxZQUFZO0FBQy9CLFdBQUssTUFBTSxLQUFLLGdCQUFnQixFQUFFLE1BQU0sS0FBSyxJQUFJLGFBQWEsQ0FBQyxDQUFDO0FBQ2hFLFlBQU0sS0FBSyxLQUFLLEdBQUc7QUFDbkIsWUFBTSxLQUFLLHNCQUFzQixLQUFLLFVBQVUsUUFBUTtBQUFBLElBQ3pEO0FBQUEsRUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQTRGQSxNQUFjLDZCQUE2QixVQUEwQixVQUEwQjtBQUM5RixhQUFTLE1BQU07QUFFZixVQUFNLG1CQUFtQixTQUFTLFVBQVUsTUFBTTtBQUNsRCxxQkFBaUIsWUFBWSxLQUFLLGFBQWEsU0FBUztBQUN4RCxRQUFJLEtBQUssWUFBWTtBQUNwQix1QkFBaUIsTUFBTSxZQUFZO0FBQUEsSUFDcEMsT0FBTztBQUNOLHVCQUFpQixNQUFNLFlBQVk7QUFBQSxJQUNwQztBQUVBLGFBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxNQUFNLEtBQUssZ0JBQWdCLEVBQUUsTUFBTSxRQUFRLEtBQUs7QUFDeEUsWUFBTSxjQUFjLEtBQUssTUFBTSxLQUFLLGdCQUFnQixFQUFFLE1BQU0sQ0FBQztBQUM3RCxZQUFNLFVBQVUsS0FBSyxXQUFXLFlBQVksWUFBWTtBQUV4RCxVQUFJLEtBQUssYUFBYSxhQUFhO0FBQ2xDLGNBQU0sYUFBYSxpQkFBaUIsU0FBUyxVQUFVLEVBQUUsTUFBTSxTQUFJLENBQUU7QUFDckUsbUJBQVcsVUFBVSxNQUFNO0FBQzFCLGdCQUFNLFFBQVEsU0FBUyxVQUFVO0FBQ2pDLGdCQUFNLE1BQU0sV0FBVztBQUN2QixnQkFBTSxNQUFNLE1BQU07QUFDbEIsZ0JBQU0sTUFBTSxPQUFPO0FBQ25CLGdCQUFNLFlBQVksSUFBSSxVQUFVLFlBQVksT0FBTztBQUNuRCxvQkFBVSxNQUFNLE9BQU8sS0FBSyxDQUFDLEtBQUssS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFLO0FBQUEsUUFDN0Q7QUFBQSxNQUNEO0FBRUEsWUFBTSxVQUFVLGlCQUFpQixVQUFVLEVBQUU7QUFDN0MsY0FBUSxZQUFZLEtBQUssYUFBYSxTQUFTO0FBQy9DLFlBQU0sVUFBVSxpQkFBaUIsVUFBVSxFQUFFO0FBQzdDLGNBQVEsWUFBWSxLQUFLLGFBQWEsU0FBUztBQUUvQyxZQUFNLFNBQVMsS0FBSyxZQUFZLFNBQVMsSUFBSSxRQUFRLElBQUk7QUFDekQsVUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxlQUFPLE1BQU0sa0JBQWtCLFFBQVE7QUFDdkMsZUFBTyxNQUFNLFFBQVEsUUFBUTtBQUFBLE1BQzlCO0FBRUEsVUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxjQUFNLFlBQVksSUFBSSxVQUFVLFlBQVksT0FBTztBQUNuRCxrQkFBVSxjQUFjLFNBQVMsSUFBSSxNQUFNLElBQUk7QUFBQSxNQUNoRCxPQUFPO0FBQ04sY0FBTSxTQUFTLEtBQUssWUFBWSxTQUFTLElBQUksWUFBWSxPQUFPO0FBQ2hFLGVBQU8sTUFBTSxrQkFBa0IsUUFBUTtBQUN2QyxlQUFPLE1BQU0sUUFBUSxRQUFRO0FBQUEsTUFDOUI7QUFBQSxJQUNEO0FBQ0EsUUFBSSxLQUFLLGFBQWEsYUFBYTtBQUNsQyxlQUFTLElBQUksR0FBRyxJQUFJLEtBQUssTUFBTSxLQUFLLGdCQUFnQixFQUFFLE1BQU0sUUFBUSxLQUFLO0FBQ3hFLGNBQU0sY0FBYyxLQUFLLE1BQU0sS0FBSyxnQkFBZ0IsRUFBRSxNQUFNLENBQUM7QUFFN0QsY0FBTSxVQUFVLFNBQVMsVUFBVTtBQUNuQyxnQkFBUSxNQUFNLFdBQVc7QUFDekIsZ0JBQVEsTUFBTSxNQUFNO0FBQ3BCLGdCQUFRLE1BQU0sT0FBTztBQUVyQixjQUFNLFlBQVksSUFBSSxVQUFVLEtBQUssV0FBVyxZQUFZLFlBQVksRUFBRSxJQUFJO0FBQzlFLGNBQU0sVUFBVSxNQUFNLFNBQVMsS0FBSyxDQUFDLEtBQUssS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxLQUFLO0FBRXBFLGNBQU0sUUFBUSxTQUFTLFVBQVU7QUFDakMsY0FBTSxNQUFNLFdBQVc7QUFDdkIsY0FBTSxNQUFNLE1BQU07QUFDbEIsY0FBTSxNQUFNLE9BQU87QUFFbkIsY0FBTSxZQUFZLElBQUksVUFBVSxZQUFZLE9BQU87QUFDbkQsY0FBTSxVQUFVLE1BQU0sT0FBTyxLQUFLLENBQUMsS0FBSyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEtBQUs7QUFBQSxNQUNuRTtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBRUQ7QUFyb0JPLElBQU0sUUFBTjtBQUFNLE1BUUcsaUJBQWlCO0FBQUEsRUFDL0I7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNEO0FBMm5CRCxJQUFNLE9BQU4sTUFBVztBQUFBLEVBSVYsY0FBYztBQUNiLFNBQUssY0FBYztBQUNuQixTQUFLLFFBQVEsQ0FBQztBQUNkLFNBQUssc0JBQXNCO0FBQUEsRUFDNUI7QUFDRDtBQUVBLElBQU0sZUFBTixNQUFtQjtBQUFBLEVBR2xCLFlBQVksY0FBc0I7QUFDakMsU0FBSyxlQUFlO0FBQ3BCLFNBQUssVUFBVTtBQUFBLEVBQ2hCO0FBQ0Q7QUFFQSxJQUFNLFlBQU4sTUFBZ0I7QUFBQSxFQUlmLFlBQVksT0FBTyxJQUFJLFFBQVEsU0FBUyxrQkFBa0IsU0FBUztBQUNsRSxTQUFLLE9BQU87QUFDWixTQUFLLFFBQVE7QUFDYixTQUFLLGtCQUFrQjtBQUFBLEVBQ3hCO0FBQ0Q7OztBQ2pxQk8sSUFBTSxpQkFBTixNQUFxQjtBQUFBLEVBZTNCLGFBQWEsVUFBVSxLQUFxQixVQUFrQixnQkFBd0IsTUFBZ0M7QUFDckgsUUFBSTtBQUNKLFlBQU8sVUFBVTtBQUFBLE1BQ2hCLEtBQUs7QUFBQSxNQUNMO0FBQ0Msa0JBQVUsTUFBTSxPQUFPLHNCQUFzQixLQUFLLFVBQVUsZ0JBQWdCLElBQUk7QUFDaEY7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVSxNQUFNLGdCQUFnQixzQkFBc0IsS0FBSyxVQUFVLGdCQUFnQixJQUFJO0FBQ3pGO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVUsTUFBTSxpQkFBaUIsc0JBQXNCLEtBQUssVUFBVSxnQkFBZ0IsSUFBSTtBQUMxRjtBQUFBLE1BQ0QsS0FBSztBQUNKLGtCQUFVLE1BQU0sU0FBUyxzQkFBc0IsS0FBSyxVQUFVLGdCQUFnQixJQUFJO0FBQ2xGO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVUsTUFBTSxNQUFNLHNCQUFzQixLQUFLLFVBQVUsZ0JBQWdCLElBQUk7QUFDL0U7QUFBQSxNQUNELEtBQUs7QUFDSixrQkFBVSxNQUFNLHFCQUFxQixzQkFBc0IsS0FBSyxVQUFVLGdCQUFnQixJQUFJO0FBQzlGO0FBQUEsTUFDRCxLQUFLO0FBQ0osa0JBQVUsTUFBTSxrQkFBa0Isc0JBQXNCLEtBQUssVUFBVSxnQkFBZ0IsSUFBSTtBQUMzRjtBQUFBLElBQ0Y7QUFDQSxVQUFNLFFBQVEsS0FBSyxHQUFHO0FBQ3RCLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxhQUFhLFNBQVMsS0FBcUIsUUFBa0M7QUFDNUUsVUFBTSxlQUFlLElBQUk7QUFDekIsVUFBTSxRQUFRLElBQUk7QUFFbEIsVUFBTSxRQUFRLE1BQU0sY0FBYyxhQUFhLFlBQVksTUFBTSxTQUFTLE9BQU87QUFDakYsUUFBSSxVQUFVLE1BQU07QUFDbkIsWUFBTSxNQUFNLDBDQUEwQyxhQUFhLFlBQVksTUFBTSxTQUFTLE9BQU87QUFBQSxJQUN0RztBQUNBLFVBQU0sV0FBVyxNQUFNLE1BQU0sV0FBVyxLQUFLO0FBQzdDLFVBQU0sY0FBYyxLQUFLLE1BQU0sUUFBUTtBQUN2QyxZQUFPLFlBQVksVUFBVTtBQUFBLE1BQzVCLEtBQUs7QUFBQSxNQUNMO0FBQ0MsZUFBTyxNQUFNLE9BQU8sT0FBTyxJQUFJLE9BQU8sR0FBRyxXQUFXO0FBQUEsTUFDckQsS0FBSztBQUNKLGVBQU8sTUFBTSxPQUFPLE9BQU8sSUFBSSxnQkFBZ0IsR0FBRyxXQUFXO0FBQUEsTUFDOUQsS0FBSztBQUNKLGVBQU8sTUFBTSxPQUFPLE9BQU8sSUFBSSxpQkFBaUIsR0FBRyxXQUFXO0FBQUEsTUFDL0QsS0FBSztBQUNKLGVBQU8sTUFBTSxPQUFPLE9BQU8sSUFBSSxTQUFTLEdBQUcsV0FBVztBQUFBLE1BQ3ZELEtBQUs7QUFDSixlQUFPLE1BQU0sT0FBTyxPQUFPLElBQUksTUFBTSxHQUFHLFdBQVc7QUFBQSxNQUNwRCxLQUFLO0FBQ0osZUFBTyxNQUFNLE9BQU8sT0FBTyxJQUFJLHFCQUFxQixHQUFHLFdBQVc7QUFBQSxNQUNuRSxLQUFLO0FBQ0osZUFBTyxNQUFNLE9BQU8sT0FBTyxJQUFJLGtCQUFrQixHQUFHLFdBQVc7QUFBQSxJQUNqRTtBQUFBLEVBQ0Q7QUFDRDtBQUFBO0FBQUE7QUFBQTtBQXpFYSxlQUtMLGlCQUEyQjtBQUFBLEVBQ2pDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Q7OztBQ3BCTSxJQUFNLGlCQUFOLE1BQXFCO0FBQUEsRUFHM0IsWUFBWSxjQUE0QixPQUFjO0FBQ3JELFNBQUssZUFBZTtBQUNwQixTQUFLLFFBQVE7QUFBQSxFQUNkO0FBQ0Q7OztBYk5PLElBQU0sZUFBTixNQUFtQjtBQUFBLEVBSWpCLGNBQWM7QUFDckIsU0FBSyxZQUFZO0FBQ2pCLFNBQUssWUFBWTtBQUFBLEVBQ2xCO0FBQUEsRUFFQSxNQUFNLFFBQVEsV0FBMkIsT0FBYztBQUN0RCxVQUFNLE1BQU0sSUFBSSxlQUFlLE1BQU0sS0FBSztBQUMxQyxVQUFNLFlBQVksTUFBTSxjQUFjLElBQUksYUFBYSxZQUFZLFNBQVMsTUFBTTtBQUNsRixRQUFJLFdBQVc7QUFDZCxZQUFNLGVBQWUsVUFBVSxLQUFLLFVBQVUsR0FBRyxhQUFhO0FBQUEsSUFDL0Q7QUFDQSxVQUFNLGFBQWEsTUFBTSxlQUFlLFNBQVMsS0FBSyxDQUFDO0FBQ3ZELFVBQU0sYUFBYSxLQUFLLEdBQUc7QUFDM0IsVUFBTSxXQUFXLEtBQUssR0FBRztBQUN6QixVQUFNLFdBQVcsUUFBUSxLQUFLLFNBQVM7QUFBQSxFQUN4QztBQUFBLEVBRUEsYUFBYSx5QkFBeUIsV0FBbUIsT0FBcUM7QUFDN0YsZ0JBQVksVUFBVSxTQUFTLGNBQWMsSUFBSSxVQUFVLE1BQU0sR0FBRyxHQUFHLElBQUk7QUFDM0UsVUFBTSxTQUFTLE1BQU0sY0FBYyxZQUFZLGNBQWMsTUFBTTtBQUNuRSxRQUFJO0FBQ0osUUFBSSxRQUFRO0FBQ1gsd0JBQWtCLE1BQU0sS0FBSyxtQkFBbUIsV0FBVyxLQUFLO0FBQUEsSUFDakUsT0FBTztBQUNOLHdCQUFrQixNQUFNLEtBQUssc0JBQXNCLFdBQVcsS0FBSztBQUFBLElBQ3BFO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLGFBQXFCLHNCQUFzQixXQUFtQixPQUFxQztBQUNsRyxVQUFNLGtCQUFrQixJQUFJLGFBQWE7QUFDekMsb0JBQWdCLFlBQVk7QUFDNUIsb0JBQWdCLFlBQVk7QUFDNUIsUUFBSTtBQUNILFlBQU0sTUFBTSxhQUFhLFNBQVM7QUFBQSxJQUNuQyxVQUFFO0FBQ0QsWUFBTSxpQkFBYSxnQ0FBYyxZQUFZLGNBQWM7QUFDM0QsWUFBTSxNQUFNLFFBQVEsTUFBTSxZQUFZLEdBQUc7QUFBQSxJQUMxQztBQUNBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxhQUFxQixtQkFBbUIsV0FBbUIsT0FBcUM7QUFDL0YsVUFBTSxjQUFjLE1BQU0sY0FBYyxZQUFZLGNBQWM7QUFDbEUsUUFBSSxnQkFBZ0IsTUFBTTtBQUN6QixVQUFJLHdCQUFPLGlEQUFpRCxZQUFZLGNBQWM7QUFDdEYsWUFBTSxNQUFNLGlEQUFpRCxZQUFZLGNBQWM7QUFBQSxJQUN4RjtBQUNBLFVBQU0sV0FBVyxNQUFNLE1BQU0sV0FBVyxXQUFXO0FBRW5ELFVBQU0sY0FBYyxNQUFNLEtBQUssTUFBTSxRQUFRO0FBQzdDLFVBQU0sa0JBQWtCLE9BQU8sT0FBTyxJQUFJLGFBQWEsR0FBRyxXQUFXO0FBQ3JFLG9CQUFnQixZQUFZO0FBQzVCLFVBQU0sYUFBYSxLQUFLLElBQUksZUFBZSxpQkFBaUIsS0FBSyxDQUFDO0FBQ2xFLFdBQU87QUFBQSxFQUNSO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxhQUFhLEtBQUssZ0JBQWdDO0FBQ2pELFVBQU0sZUFBZSxlQUFlO0FBQ3BDLFVBQU0sUUFBUSxlQUFlO0FBRzdCLFVBQU0sUUFBUSxNQUFNLGNBQWMsYUFBYSxZQUFZLGNBQWM7QUFDekUsUUFBSSxVQUFVLE1BQU07QUFDbkIsVUFBSSx3QkFBTyxpREFBaUQsYUFBYSxZQUFZLGNBQWM7QUFDbkcsWUFBTSxNQUFNLGlEQUFpRCxhQUFhLFlBQVksY0FBYztBQUFBLElBQ3JHO0FBRUEsVUFBTSxXQUFXLEtBQUssVUFBVSxZQUFZO0FBQzVDLFVBQU0sTUFBTSxPQUFPLE9BQU8sUUFBUTtBQUFBLEVBQ25DO0FBQ0Q7OztBRC9FTyxJQUFNLDRCQUE0QjtBQUVsQyxJQUFNLHFCQUFOLGNBQWlDLDBCQUFTO0FBQUEsRUFFaEQsWUFBWSxNQUFxQixNQUFjO0FBQzlDLFVBQU0sSUFBSTtBQUNWLFNBQUssY0FBYztBQUFBLEVBQ3BCO0FBQUEsRUFFQSxjQUFjO0FBQ2IsV0FBTztBQUFBLEVBQ1I7QUFBQSxFQUVBLGlCQUFpQjtBQUNoQixXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ2QsVUFBTSxVQUFVLEtBQUssWUFBWSxTQUFTLENBQUM7QUFDM0MsWUFBUSxNQUFNO0FBQ2QsVUFBTSxnQkFBZ0IsUUFBUSxVQUFVLGtCQUFrQjtBQUMxRCxVQUFNLFdBQVcsY0FBYyxVQUFVLGVBQWU7QUFDeEQsYUFBUyxTQUFTLE1BQU0sRUFBRSxNQUFNLHlCQUF5QixDQUFFO0FBQzNELFVBQU0sMEJBQTBCLFNBQVMsU0FBUyxTQUFTLEVBQUUsTUFBTSxRQUFRLE9BQU8sS0FBSyxZQUFZLENBQUU7QUFDckcsNEJBQXdCLE1BQU0sUUFBUTtBQUN0QyxVQUFNLGVBQWUsU0FBUyxTQUFTLFVBQVUsRUFBRSxNQUFNLFNBQVMsQ0FBRTtBQUNwRSxVQUFNLFFBQVEsS0FBSyxJQUFJO0FBQ3ZCLGlCQUFhLFVBQVUsWUFBWTtBQUNsQyxZQUFNLE9BQU8sd0JBQXdCO0FBQ3JDLFlBQU0sS0FBb0IsTUFBTSxhQUFhLHlCQUF5QixNQUFNLEtBQUs7QUFDakYsWUFBTSxHQUFHLFFBQVEsZUFBZSxLQUFLO0FBQUEsSUFDdEM7QUFDQSxhQUFTLFlBQVksT0FBTyxrQkFBa0I7QUFDN0MsVUFBSSxjQUFjLFFBQVEsU0FBUztBQUNsQyxjQUFNLE9BQU8sd0JBQXdCO0FBQ3JDLGNBQU0sS0FBSyxNQUFNLGFBQWEseUJBQXlCLE1BQU0sS0FBSztBQUNsRSxjQUFNLEdBQUcsUUFBUSxlQUFlLEtBQUs7QUFBQSxNQUN0QztBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLFVBQVU7QUFBQSxFQUVoQjtBQUNEOzs7QUQ5Q0EsSUFBQUMsbUJBQW9HO0FBUXBHLElBQU0sbUJBQWdDO0FBQUEsRUFDckMsYUFBYTtBQUNkO0FBRUEsSUFBcUIsTUFBckIsY0FBaUMsd0JBQU87QUFBQSxFQUd2QyxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUV4QixTQUFLO0FBQUEsTUFDSjtBQUFBLE1BQ0EsQ0FBQyxTQUFTLElBQUksbUJBQW1CLE1BQU0sS0FBSyxTQUFTLFdBQVc7QUFBQSxJQUNqRTtBQUVBLFNBQUssY0FBYyxVQUFVLGlCQUFpQixNQUFNO0FBQ25ELFdBQUssYUFBYSx5QkFBeUI7QUFBQSxJQUM1QyxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDZixhQUFLLGFBQWEseUJBQXlCO0FBQUEsTUFDNUM7QUFBQSxJQUNELENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLGdCQUFnQixDQUFDLFFBQWdCLFNBQXVCO0FBQ3ZELGdCQUFRLElBQUksT0FBTyxhQUFhLENBQUM7QUFDakMsZUFBTyxpQkFBaUIsdUJBQXVCO0FBQUEsTUFDaEQ7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLGNBQWMsSUFBSSxpQkFBaUIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUl2RCxTQUFLLGlCQUFpQixVQUFVLFNBQVMsQ0FBQyxRQUFvQjtBQUM3RCxjQUFRLElBQUksU0FBUyxHQUFHO0FBQUEsSUFDekIsQ0FBQztBQUdELFNBQUssaUJBQWlCLE9BQU8sWUFBWSxNQUFNLFFBQVEsSUFBSSxhQUFhLEdBQUcsSUFBSSxLQUFLLEdBQUksQ0FBQztBQUFBLEVBQzFGO0FBQUEsRUFFQSxXQUFXO0FBQUEsRUFFWDtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDMUU7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUFBLEVBRUEsTUFBTSxhQUFhLFdBQW1CO0FBQ3JDLFVBQU0sRUFBRSxVQUFVLElBQUksS0FBSztBQUUzQixRQUFJLE9BQTZCO0FBRWpDLFdBQU8sVUFBVSxRQUFRLEtBQUs7QUFDOUIsUUFBSSxTQUFTLE1BQU07QUFDbEIsVUFBSSx3QkFBTyxnREFBZ0Q7QUFDM0Q7QUFBQSxJQUNEO0FBQ0EsVUFBTSxLQUFLLGFBQWEsRUFBRSxNQUFNLFdBQVcsUUFBUSxLQUFLLENBQUM7QUFHekQsY0FBVSxXQUFXLElBQUk7QUFBQSxFQUMxQjtBQUNEO0FBRUEsSUFBTSxtQkFBTixjQUErQixrQ0FBaUI7QUFBQSxFQUcvQyxZQUFZLEtBQVUsUUFBYTtBQUNsQyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBQyxZQUFXLElBQUk7QUFFdEIsZ0JBQVksTUFBTTtBQUVsQixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxxQkFBcUIsRUFDN0IsUUFBUSw2REFBNkQsRUFDckUsUUFBUSxVQUFRLEtBQ2YsZUFBZSxxQkFBcUIsRUFDcEMsU0FBUyxLQUFLLE9BQU8sU0FBUyxXQUFXLEVBQ3pDLFNBQVMsT0FBTyxVQUFVO0FBQzFCLFdBQUssT0FBTyxTQUFTLGNBQWM7QUFDbkMsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2hDLENBQUMsQ0FBQztBQUFBLEVBQ0w7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaSIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
